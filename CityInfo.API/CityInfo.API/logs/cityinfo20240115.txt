2024-01-15 10:08:59.487 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 10:08:59.587 +06:00 [DBG] Hosting starting
2024-01-15 10:08:59.745 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 10:08:59.749 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 10:08:59.750 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 10:08:59.752 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 10:08:59.753 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 10:08:59.756 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 10:08:59.758 +06:00 [INF] Hosting environment: Development
2024-01-15 10:08:59.759 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 10:08:59.761 +06:00 [DBG] Hosting started
2024-01-15 10:09:30.527 +06:00 [DBG] Connection id "0HN0LFV2UKEHU" accepted.
2024-01-15 10:09:30.534 +06:00 [DBG] Connection id "0HN0LFV2UKEHU" started.
2024-01-15 10:09:30.631 +06:00 [DBG] Connection 0HN0LFV2UKEHU established using the following protocol: "Tls13"
2024-01-15 10:09:30.707 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:09:30.723 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 10:09:30.756 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:09:30.758 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:09:30.760 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:09:30.791 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:09:30.810 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:09:30.812 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:09:30.820 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:09:30.887 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:09:30.890 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:09:30.891 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:09:30.891 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:09:30.896 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:09:30.896 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:09:30.925 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:09:31.088 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 10:09:31.292 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:09:32.049 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:09:32.158 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-01-15 10:09:32.420 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
        SELECT c.Id, c.Description, c.Name, c.userId
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-15 10:09:32.500 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:09:32.528 +06:00 [DBG] Created DbConnection. (31ms).
2024-01-15 10:09:32.531 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:32.928 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:33.010 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:09:33.017 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-01-15 10:09:33.022 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-01-15 10:09:33.027 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:09:33.098 +06:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:09:33.148 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:33.168 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:33.169 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:33.169 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:33.170 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:33.171 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:33.174 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:33.178 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 70ms reading results.
2024-01-15 10:09:33.183 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:33.194 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (10ms).
2024-01-15 10:09:33.216 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:09:33.226 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:09:33.227 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:09:33.228 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:09:33.230 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:09:33.231 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:09:33.345 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 2419.196ms
2024-01-15 10:09:33.352 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:09:33.359 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:09:33.411 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:33.413 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:09:33.414 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 2713.7814ms
2024-01-15 10:09:42.669 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/65 - null null
2024-01-15 10:09:42.676 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:09:42.679 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:09:42.681 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:09:42.684 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65'
2024-01-15 10:09:42.686 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/65'
2024-01-15 10:09:42.689 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-15 10:09:42.692 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-15 10:09:42.708 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:09:42.710 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:09:42.712 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:09:42.714 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:09:42.717 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:09:42.719 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:09:42.722 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:09:42.725 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:09:42.733 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-01-15 10:09:42.736 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-01-15 10:09:42.740 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-15 10:09:42.743 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-15 10:09:42.745 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-01-15 10:09:42.750 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-01-15 10:09:42.753 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-01-15 10:09:42.756 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2024-01-15 10:09:42.759 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-15 10:09:42.760 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-15 10:09:42.762 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-15 10:09:42.764 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-01-15 10:09:42.766 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-15 10:09:42.792 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:09:42.803 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-01-15 10:09:42.831 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
            SELECT TOP(1) c.Id, c.Description, c.Name, c.userId
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 10:09:42.845 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:09:42.846 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:09:42.848 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:42.851 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:42.854 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:09:42.857 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:09:42.867 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2024-01-15 10:09:42.874 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:09:42.918 +06:00 [INF] Executed DbCommand (47ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:09:42.923 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:42.925 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:42.928 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-15 10:09:42.931 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:42.933 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:09:42.940 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:09:42.943 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:09:42.944 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:09:42.945 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:09:42.947 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:09:42.949 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2024-01-15 10:09:42.951 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 229.0429ms
2024-01-15 10:09:42.952 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-15 10:09:42.955 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:09:42.956 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:42.959 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 10:09:42.962 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/65 - 200 80 application/json; charset=utf-8 292.6677ms
2024-01-15 10:09:44.927 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:09:44.932 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:09:44.935 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:09:44.936 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:09:44.938 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:09:44.941 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:09:44.943 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:09:44.947 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:09:44.949 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:09:44.952 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:09:44.955 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:09:44.959 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:09:44.961 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:09:44.964 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:09:44.967 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:09:44.975 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:09:45.064 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:09:45.074 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:09:45.076 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-15 10:09:45.079 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:45.083 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:45.085 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:09:45.087 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:09:45.091 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-01-15 10:09:45.093 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:09:45.099 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:09:45.101 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:45.102 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:45.104 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:45.105 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:45.107 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:45.108 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:09:45.109 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:45.110 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 9ms reading results.
2024-01-15 10:09:45.113 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:45.115 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:09:45.119 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:09:45.121 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:09:45.123 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:09:45.124 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:09:45.125 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:09:45.126 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:09:45.128 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 161.4411ms
2024-01-15 10:09:45.130 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:09:45.132 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:09:45.134 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:45.137 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-15 10:09:45.140 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 214.4217ms
2024-01-15 10:09:46.623 +06:00 [DBG] Connection id "0HN0LFV2UKEHU" received FIN.
2024-01-15 10:09:46.629 +06:00 [DBG] Connection id "0HN0LFV2UKEHU" is closed. The last processed stream ID was 5.
2024-01-15 10:09:46.629 +06:00 [DBG] The connection queue processing loop for 0HN0LFV2UKEHU completed.
2024-01-15 10:09:46.635 +06:00 [DBG] Connection id "0HN0LFV2UKEHU" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-15 10:09:46.659 +06:00 [DBG] Connection id "0HN0LFV2UKEHU" stopped.
2024-01-15 10:09:58.041 +06:00 [DBG] Connection id "0HN0LFV2UKEHV" accepted.
2024-01-15 10:09:58.042 +06:00 [DBG] Connection id "0HN0LFV2UKEHV" started.
2024-01-15 10:09:58.048 +06:00 [DBG] Connection 0HN0LFV2UKEHV established using the following protocol: "Tls13"
2024-01-15 10:09:58.051 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-15 10:09:58.058 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:09:58.059 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:09:58.060 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:09:58.062 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:09:58.064 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 13.3205ms
2024-01-15 10:09:58.067 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 37
2024-01-15 10:09:58.072 +06:00 [DBG] POST requests are not supported
2024-01-15 10:09:58.073 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:09:58.075 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:09:58.076 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-15 10:09:58.079 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-15 10:09:58.081 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:09:58.082 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:09:58.089 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-15 10:09:58.092 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:09:58.095 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:09:58.097 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:09:58.100 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:09:58.103 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:09:58.105 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:09:58.107 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:09:58.110 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:09:58.113 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-15 10:09:58.117 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:09:58.121 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:09:58.129 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000003": started reading request body.
2024-01-15 10:09:58.132 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000003": done reading request body.
2024-01-15 10:09:58.167 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:09:58.169 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:09:58.174 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:09:58.184 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:09:58.191 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:09:58.199 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-15 10:09:58.218 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 10:09:58.233 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:09:58.236 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-15 10:09:58.238 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.240 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.241 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:09:58.243 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:09:58.247 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-15 10:09:58.251 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:09:58.274 +06:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:09:58.281 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.284 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-15 10:09:58.287 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.289 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:09:58.293 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.password == __password_0)'
2024-01-15 10:09:58.297 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.password == @__password_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 10:09:58.300 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.302 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.305 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:09:58.306 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:09:58.308 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:09:58.310 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:09:58.314 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:09:58.318 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.320 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:09:58.322 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.324 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:09:58.328 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:09:58.330 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:09:58.331 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:09:58.332 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:09:58.333 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:09:58.334 +06:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-15 10:09:58.342 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 236.8288ms
2024-01-15 10:09:58.344 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:09:58.345 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:09:58.346 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:09:58.348 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:09:58.350 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 404 28 application/json; charset=utf-8 282.691ms
2024-01-15 10:10:10.309 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-15 10:10:10.312 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:10:10.312 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:10.313 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:10.314 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:10:10.314 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 5.0588ms
2024-01-15 10:10:10.317 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 37
2024-01-15 10:10:10.334 +06:00 [DBG] POST requests are not supported
2024-01-15 10:10:10.336 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:10.341 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:10.344 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-15 10:10:10.346 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-15 10:10:10.349 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:10.351 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:10.352 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-15 10:10:10.355 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:10:10.357 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:10:10.360 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:10:10.363 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:10:10.365 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:10:10.366 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:10.368 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:10.370 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:10.371 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-15 10:10:10.374 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:10:10.376 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:10:10.378 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000007": started reading request body.
2024-01-15 10:10:10.380 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000007": done reading request body.
2024-01-15 10:10:10.383 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:10.386 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:10.389 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:10.391 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:10.393 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:10:10.396 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:10:10.396 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:10:10.398 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.400 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.402 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:10.403 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:10:10.404 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:10:10.406 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:10.410 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:10.415 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.417 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:10:10.419 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.421 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:10:10.423 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.425 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.427 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:10.429 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:10:10.430 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:10:10.432 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:10.436 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:10.438 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.440 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:10:10.442 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.444 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:10:10.446 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:10:10.451 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:10:10.453 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:10:10.454 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:10:10.455 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:10:10.456 +06:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-15 10:10:10.458 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 91.3743ms
2024-01-15 10:10:10.460 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:10.462 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:10:10.463 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:10.464 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:10:10.467 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 404 28 application/json; charset=utf-8 151.1735ms
2024-01-15 10:10:19.790 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-15 10:10:19.794 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:10:19.795 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:19.797 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:19.798 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:10:19.800 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 9.3859ms
2024-01-15 10:10:19.802 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 38
2024-01-15 10:10:19.809 +06:00 [DBG] POST requests are not supported
2024-01-15 10:10:19.810 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:19.812 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:19.813 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-15 10:10:19.814 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-15 10:10:19.822 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:19.826 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:19.828 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-15 10:10:19.831 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:10:19.835 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:10:19.837 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:10:19.840 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:10:19.842 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:10:19.844 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:19.846 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:19.847 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:19.866 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-15 10:10:19.868 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:10:19.873 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:10:19.876 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:0000000B": started reading request body.
2024-01-15 10:10:19.878 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:0000000B": done reading request body.
2024-01-15 10:10:19.880 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:19.884 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:19.886 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:19.889 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:19.894 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:10:19.897 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:10:19.898 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:10:19.900 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.902 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.904 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:19.907 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:10:19.908 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:10:19.909 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:19.913 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:19.916 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.919 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:10:19.922 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.924 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:10:19.926 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.936 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.939 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:19.942 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:10:19.943 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 10:10:19.946 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:19.954 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:19.958 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.960 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:10:19.963 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:19.966 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:10:19.973 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:10:19.978 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:10:19.982 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:10:19.985 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:10:19.987 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:10:19.990 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-15 10:10:19.995 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 150.5482ms
2024-01-15 10:10:19.999 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:20.002 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:10:20.004 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:20.006 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:10:20.008 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 200 28 application/json; charset=utf-8 207.0996ms
2024-01-15 10:10:28.334 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-15 10:10:28.347 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:10:28.348 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:28.350 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:28.351 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:10:28.352 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 18.3209ms
2024-01-15 10:10:28.354 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 38
2024-01-15 10:10:28.368 +06:00 [DBG] POST requests are not supported
2024-01-15 10:10:28.373 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:28.375 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:28.377 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-15 10:10:28.378 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-15 10:10:28.380 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:28.382 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:28.383 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-15 10:10:28.386 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:10:28.387 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:10:28.389 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:10:28.390 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:10:28.393 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:10:28.395 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:28.397 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:28.399 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:28.401 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-15 10:10:28.405 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:10:28.406 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:10:28.408 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:0000000F": started reading request body.
2024-01-15 10:10:28.413 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:0000000F": done reading request body.
2024-01-15 10:10:28.418 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:28.420 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:28.424 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:28.428 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:28.431 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:10:28.433 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:10:28.435 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:10:28.436 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.436 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.438 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:28.441 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:10:28.443 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 10:10:28.445 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:28.485 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:28.489 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.490 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:10:28.492 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.493 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:10:28.495 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.499 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.500 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:28.501 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:10:28.502 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:10:28.503 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:28.506 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:28.511 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.512 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:10:28.513 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.515 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:10:28.516 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:10:28.518 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:10:28.519 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:10:28.520 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:10:28.520 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:10:28.521 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-15 10:10:28.522 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 127.5378ms
2024-01-15 10:10:28.524 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:28.525 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:10:28.526 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:28.533 +06:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-01-15 10:10:28.534 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 200 28 application/json; charset=utf-8 180.6761ms
2024-01-15 10:10:36.461 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-15 10:10:36.477 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:10:36.478 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:36.480 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:36.481 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:10:36.481 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 19.8964ms
2024-01-15 10:10:36.483 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 38
2024-01-15 10:10:36.487 +06:00 [DBG] POST requests are not supported
2024-01-15 10:10:36.487 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:10:36.488 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:10:36.489 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-15 10:10:36.490 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-15 10:10:36.491 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:36.492 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:36.493 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-15 10:10:36.494 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:10:36.494 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:10:36.495 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:10:36.497 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:10:36.498 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:10:36.501 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:36.502 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-15 10:10:36.503 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:36.504 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-15 10:10:36.504 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:10:36.505 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:10:36.506 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000013": started reading request body.
2024-01-15 10:10:36.507 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000013": done reading request body.
2024-01-15 10:10:36.509 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:36.510 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:36.512 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-15 10:10:36.520 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-15 10:10:36.522 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:10:36.525 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:10:36.526 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:10:36.527 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.528 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.530 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:36.534 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:10:36.537 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-01-15 10:10:36.538 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:36.544 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:36.549 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.551 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:10:36.553 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.556 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:10:36.560 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.561 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.564 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:10:36.565 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:10:36.566 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:10:36.568 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:36.572 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:10:36.576 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.578 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:10:36.579 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.581 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:10:36.584 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:10:36.587 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:10:36.588 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:10:36.588 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:10:36.590 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:10:36.591 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-15 10:10:36.593 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 91.9329ms
2024-01-15 10:10:36.596 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-15 10:10:36.597 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:10:36.599 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:10:36.602 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 10:10:36.604 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 200 28 application/json; charset=utf-8 120.2586ms
2024-01-15 10:12:12.228 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:12:12.237 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:12:12.239 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:12:12.241 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:12:12.242 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:12:12.243 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:12:12.245 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:12:12.246 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:12:12.248 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:12:12.251 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:12:12.254 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:12:12.256 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:12:12.258 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:12:12.260 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:12:12.262 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:12:12.265 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:12:12.269 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:12:12.272 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:12:12.273 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:12:12.274 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:12:12.276 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:12:12.279 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:12:12.280 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:12:12.281 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:12:12.283 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:12:12.290 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:12:12.293 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:12:12.295 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:12:12.296 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:12:12.299 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:12:12.301 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:12:12.303 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:12:12.304 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:12:12.305 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 12ms reading results.
2024-01-15 10:12:12.306 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:12:12.308 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:12:12.309 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:12:12.312 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:12:12.312 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:12:12.313 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:12:12.314 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:12:12.315 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:12:12.317 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 55.4122ms
2024-01-15 10:12:12.324 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:12:12.325 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:12:12.327 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:12:12.328 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:12:12.330 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 103.2234ms
2024-01-15 10:16:03.084 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:16:03.089 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - null null
2024-01-15 10:16:03.098 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:03.107 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:03.110 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:03.113 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:03.115 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:03.117 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:03.118 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:16:03.119 +06:00 [DBG] 2 candidate(s) found for the request path '/api/cities/pointsofinterest'
2024-01-15 10:16:03.121 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/pointsofinterest' is valid for the request path '/api/cities/pointsofinterest'
2024-01-15 10:16:03.120 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:16:03.123 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/pointsofinterest'
2024-01-15 10:16:03.127 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:03.131 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:03.133 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:03.135 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:03.137 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:03.139 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:03.140 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:03.142 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:03.142 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointsOfInterestReturnDto]]] GetPointsOfInterest() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:03.145 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:03.148 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:03.149 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:03.151 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:03.153 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:03.155 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:03.158 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:03.160 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:03.163 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:03.164 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:03.168 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:03.170 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:03.172 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-15 10:16:03.174 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:03.176 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.182 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:03.190 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(c => c.Name)'
2024-01-15 10:16:03.194 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.198 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:03.199 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:03.200 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3], [Property: PointOfInterest.userId (int) Required FK Index, 4] }
        SELECT p.Id, p.CityId, p.Description, p.Name, p.userId
        FROM PointsOfInterest AS p
        ORDER BY p.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-15 10:16:03.202 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:03.206 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:03.208 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:03.209 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-15 10:16:03.213 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:03.214 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.218 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:03.228 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:03.231 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:03.233 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.236 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:03.237 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:03.241 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:03.239 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:03.243 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-15 10:16:03.245 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:03.246 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-15 10:16:03.247 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.251 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 33ms reading results.
2024-01-15 10:16:03.253 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-15 10:16:03.254 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.257 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.258 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-15 10:16:03.262 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-15 10:16:03.264 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:03.265 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.268 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:03.269 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-15 10:16:03.270 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:03.273 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:03.274 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:03.273 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:03.275 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:03.278 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:03.280 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 127.0715ms
2024-01-15 10:16:03.282 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-15 10:16:03.285 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:03.294 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-15 10:16:03.296 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:03.297 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-15 10:16:03.298 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.302 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-15 10:16:03.305 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 220.5292ms
2024-01-15 10:16:03.317 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API) in 146.5343ms
2024-01-15 10:16:03.320 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:03.322 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:03.324 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:03.327 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 10:16:03.330 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - 404 162 application/problem+json; charset=utf-8 245.8118ms
2024-01-15 10:16:04.796 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:16:04.808 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:04.811 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:04.814 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:04.817 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:16:04.823 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:16:04.830 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:04.831 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:04.833 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:04.838 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:04.843 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:04.845 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:04.848 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:04.850 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:04.854 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:04.858 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:04.860 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:04.863 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:04.864 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:16:04.866 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:04.871 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:04.874 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:04.876 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:04.878 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 10:16:04.881 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:04.888 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:04.894 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:04.895 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:04.897 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:04.899 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:04.902 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:04.904 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:04.907 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:04.908 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 14ms reading results.
2024-01-15 10:16:04.909 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:04.909 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2024-01-15 10:16:04.911 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:04.915 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:04.916 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:04.917 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:04.918 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:04.921 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:04.925 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 70.9089ms
2024-01-15 10:16:04.926 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:04.928 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:04.929 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:04.930 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:04.932 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 136.2163ms
2024-01-15 10:16:06.558 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-15 10:16:06.568 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:06.571 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:06.574 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:06.576 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:16:06.579 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:16:06.581 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:06.584 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:06.591 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:16:06.595 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:06.597 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:06.600 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:06.604 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:06.606 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:06.608 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:06.611 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:06.613 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:06.615 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:16:06.618 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:06.620 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:06.622 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:06.624 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:06.628 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:06.630 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-01-15 10:16:06.634 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 10:16:06.636 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:06.637 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:16:06.638 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:06.639 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:06.651 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:06.652 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:06.653 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:16:06.654 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:06.667 +06:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:06.669 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:06.670 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:06.692 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:06.693 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:06.695 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-15 10:16:06.696 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:06.698 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:06.698 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-15 10:16:06.700 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-15 10:16:06.701 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-15 10:16:06.726 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 117.9005ms
2024-01-15 10:16:06.743 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:06.759 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:06.773 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:06.774 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:06.775 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 217.7858ms
2024-01-15 10:16:09.793 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:16:09.797 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - null null
2024-01-15 10:16:09.813 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:09.817 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:09.819 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:09.820 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:09.824 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:09.829 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:09.832 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:16:09.835 +06:00 [DBG] 2 candidate(s) found for the request path '/api/cities/pointsofinterest'
2024-01-15 10:16:09.840 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:16:09.842 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/pointsofinterest' is valid for the request path '/api/cities/pointsofinterest'
2024-01-15 10:16:09.846 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:09.850 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/pointsofinterest'
2024-01-15 10:16:09.853 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:09.858 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:09.860 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:09.862 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:09.869 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:09.874 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointsOfInterestReturnDto]]] GetPointsOfInterest() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:09.878 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:09.882 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:09.885 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:09.888 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:09.892 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:09.895 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:09.899 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:09.903 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:09.905 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:09.911 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:09.916 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:09.920 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:09.923 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:09.926 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:09.931 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:09.934 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:09.935 +06:00 [DBG] Created DbConnection. (4ms).
2024-01-15 10:16:09.939 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:09.941 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:09.943 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-15 10:16:09.945 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:09.947 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:09.949 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:09.951 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:09.953 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-01-15 10:16:09.955 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:09.956 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-01-15 10:16:09.958 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:09.960 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:09.962 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-01-15 10:16:09.967 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:09.968 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-15 10:16:09.972 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:09.977 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-15 10:16:09.979 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:09.982 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:09.984 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:09.988 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 6ms reading results.
2024-01-15 10:16:09.990 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:09.993 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:09.996 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:09.999 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (6ms).
2024-01-15 10:16:10.002 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:10.006 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:10.008 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:10.013 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:10.016 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 44ms reading results.
2024-01-15 10:16:10.017 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-15 10:16:10.021 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:10.025 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-15 10:16:10.026 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-15 10:16:10.028 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-15 10:16:10.030 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:10.032 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API) in 111.7342ms
2024-01-15 10:16:10.035 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:10.037 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:10.038 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:10.039 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:10.040 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:10.042 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:10.043 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:10.044 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 10:16:10.046 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:10.048 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - 404 162 application/problem+json; charset=utf-8 251.1523ms
2024-01-15 10:16:10.049 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 143.865ms
2024-01-15 10:16:10.055 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:10.057 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:10.058 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:10.060 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 10:16:10.062 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 268.9587ms
2024-01-15 10:16:11.495 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:16:11.507 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:11.509 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:11.511 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:11.513 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:16:11.517 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:16:11.519 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:11.521 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:11.523 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:11.524 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:11.525 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:11.527 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:11.531 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:11.534 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:11.536 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:11.538 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:11.540 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:11.542 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:11.543 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:16:11.544 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:11.546 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:11.548 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:11.550 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:16:11.551 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:11.553 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:11.559 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:11.562 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:11.564 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:11.567 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:11.569 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:11.570 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:11.570 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:11.572 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:11.574 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 11ms reading results.
2024-01-15 10:16:11.576 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:11.578 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:11.580 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:11.584 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:11.585 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:11.585 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:11.586 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:11.587 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:11.589 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 52.7038ms
2024-01-15 10:16:11.590 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:11.592 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:11.593 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:11.594 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:11.595 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 100.2175ms
2024-01-15 10:16:14.685 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-15 10:16:14.696 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:14.698 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:14.702 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:14.706 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:16:14.709 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:16:14.713 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:14.715 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:14.717 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:16:14.721 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:14.724 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:14.727 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:14.731 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:14.735 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:14.739 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:14.743 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:14.746 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:14.748 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:16:14.751 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:14.753 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:14.755 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:14.758 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:14.761 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:14.765 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:14.766 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:16:14.767 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:14.769 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:14.772 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:14.773 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:14.776 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 10:16:14.778 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:14.783 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:14.787 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:14.789 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:16:14.792 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:14.796 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-15 10:16:14.798 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-15 10:16:14.800 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:14.802 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:14.803 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-15 10:16:14.807 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-15 10:16:14.809 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-15 10:16:14.812 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 72.8281ms
2024-01-15 10:16:14.815 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:14.816 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:14.817 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:14.819 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:14.821 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 136.3ms
2024-01-15 10:16:19.814 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/65/pointsofinterest - null null
2024-01-15 10:16:19.824 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:19.827 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:19.829 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:19.830 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest'
2024-01-15 10:16:19.832 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest'
2024-01-15 10:16:19.834 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:19.836 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:19.837 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:16:19.840 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:19.842 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:19.844 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:19.845 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:19.849 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:19.853 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:19.856 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:19.858 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:19.859 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:16:19.861 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:19.862 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:19.865 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:19.868 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:19.871 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:19.873 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:19.874 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:16:19.876 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.877 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.879 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:19.880 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:19.883 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:19.885 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:19.890 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:19.895 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.896 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:19.898 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.900 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:19.904 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-01-15 10:16:19.909 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3], [Property: PointOfInterest.userId (int) Required FK Index, 4] }
        SELECT p.Id, p.CityId, p.Description, p.Name, p.userId
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-15 10:16:19.912 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.913 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.915 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:19.917 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:19.919 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:19.920 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-15 10:16:19.924 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-15 10:16:19.927 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.929 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:19.931 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.933 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:16:19.941 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:19.945 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:19.946 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:19.948 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:19.949 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:19.951 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:19.954 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 101.3976ms
2024-01-15 10:16:19.956 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:19.958 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:19.960 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:19.962 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 10:16:19.964 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/65/pointsofinterest - 200 2 application/json; charset=utf-8 150.4144ms
2024-01-15 10:16:20.340 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/65/pointsofinterest - null null
2024-01-15 10:16:20.348 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:20.354 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:20.359 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:20.363 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest'
2024-01-15 10:16:20.369 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest'
2024-01-15 10:16:20.374 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:20.377 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:20.379 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:16:20.383 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:20.386 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:20.388 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:20.392 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:20.395 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:20.397 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:20.399 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:20.402 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:20.405 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:16:20.407 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:20.409 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:20.411 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:20.413 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:20.416 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:20.419 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:20.420 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:16:20.421 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.422 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.426 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:20.429 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:20.431 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 10:16:20.433 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:20.437 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:20.440 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.441 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:20.443 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.444 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:20.445 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.447 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.449 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:20.450 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:20.451 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:16:20.453 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-15 10:16:20.457 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-15 10:16:20.460 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.461 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:20.463 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.464 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:20.466 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:20.469 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:20.470 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:20.472 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:20.473 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:20.474 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:20.476 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 79.2841ms
2024-01-15 10:16:20.478 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:20.479 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:20.480 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.486 +06:00 [DBG] Disposed connection to database '' on server '' (5ms).
2024-01-15 10:16:20.487 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/65/pointsofinterest - 200 2 application/json; charset=utf-8 147.1516ms
2024-01-15 10:16:20.659 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/65/pointsofinterest - null null
2024-01-15 10:16:20.672 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:20.674 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:20.679 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:20.682 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest'
2024-01-15 10:16:20.685 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest'
2024-01-15 10:16:20.689 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:20.692 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:20.695 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:16:20.698 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:20.702 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:20.705 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:20.710 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:20.712 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:20.715 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:20.718 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:20.721 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:20.723 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:16:20.725 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:20.727 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:20.729 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:20.730 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:20.732 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:20.735 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:20.737 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:16:20.738 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.741 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.743 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:20.745 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:20.747 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:20.749 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:20.754 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:20.759 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.761 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:20.764 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.767 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:16:20.771 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.773 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.776 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:20.777 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:16:20.778 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:16:20.780 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-15 10:16:20.784 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-15 10:16:20.787 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.788 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:16:20.791 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.793 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:20.795 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:20.799 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:20.800 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:20.802 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:20.803 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:20.805 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:20.807 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 92.195ms
2024-01-15 10:16:20.810 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:20.811 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:20.812 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:20.813 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:20.816 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/65/pointsofinterest - 200 2 application/json; charset=utf-8 156.672ms
2024-01-15 10:16:42.134 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-15 10:16:42.151 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:42.155 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:42.159 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:42.162 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-15 10:16:42.164 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-15 10:16:42.167 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:42.170 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:42.172 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-15 10:16:42.175 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:42.177 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:42.184 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:42.190 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:42.191 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:42.193 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:42.194 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-15 10:16:42.196 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:42.198 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:42.199 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:16:42.200 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:42.201 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:42.203 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:42.206 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:16:42.207 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:16:42.208 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:42.214 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-15 10:16:42.217 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:42.219 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:42.222 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:42.224 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:42.227 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:42.229 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:16:42.231 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:42.232 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 15ms reading results.
2024-01-15 10:16:42.234 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:42.236 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:16:42.239 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:42.242 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:42.243 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-15 10:16:42.245 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-15 10:16:42.246 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-15 10:16:42.247 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 10:16:42.249 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 56.6408ms
2024-01-15 10:16:42.252 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-15 10:16:42.253 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:42.254 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:42.255 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:42.256 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 456 application/json; charset=utf-8 122.1289ms
2024-01-15 10:16:44.987 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-15 10:16:44.992 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:16:44.994 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:16:44.997 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:16:45.002 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:16:45.005 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:16:45.008 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:45.011 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:45.014 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:16:45.018 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:16:45.022 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:16:45.024 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:16:45.029 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:16:45.033 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:16:45.037 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:45.040 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:16:45.043 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:45.045 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:16:45.048 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:45.050 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:45.052 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:16:45.055 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:16:45.058 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:16:45.061 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:16:45.062 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:16:45.063 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:45.066 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:45.067 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:16:45.068 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:16:45.078 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-15 10:16:45.083 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:45.092 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:16:45.095 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:45.097 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:16:45.099 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:45.102 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-15 10:16:45.104 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-15 10:16:45.108 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:16:45.111 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:16:45.114 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-15 10:16:45.117 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-15 10:16:45.119 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-15 10:16:45.125 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 87.7547ms
2024-01-15 10:16:45.126 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:16:45.128 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:16:45.129 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:16:45.130 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:16:45.131 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 144.2835ms
2024-01-15 10:17:02.579 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/65/pointsofinterest/ - null null
2024-01-15 10:17:02.589 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:17:02.593 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:17:02.596 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:17:02.600 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:17:02.603 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/65/pointsofinterest/ - 204 null null 24.0842ms
2024-01-15 10:17:02.605 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/65/pointsofinterest/ - application/json 62
2024-01-15 10:17:02.609 +06:00 [DBG] POST requests are not supported
2024-01-15 10:17:02.610 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:17:02.613 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:17:02.614 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest/'
2024-01-15 10:17:02.616 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest/'
2024-01-15 10:17:02.619 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:02.621 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:02.627 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:17:02.629 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:17:02.632 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:17:02.635 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:17:02.638 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:17:02.639 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:17:02.642 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:17:02.644 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:17:02.647 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:17:02.649 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:17:02.652 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:02.657 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:02.658 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:17:02.660 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:02.663 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:17:02.664 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:17:02.666 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:17:02.668 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:17:02.671 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000033": started reading request body.
2024-01-15 10:17:02.673 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000033": done reading request body.
2024-01-15 10:17:02.680 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:02.682 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:02.683 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:17:02.689 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:02.693 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:17:02.695 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:17:02.696 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:17:02.697 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.699 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.703 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:02.704 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:02.706 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:17:02.707 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:17:02.712 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:17:02.716 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.717 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 0ms reading results.
2024-01-15 10:17:02.718 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.719 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2024-01-15 10:17:02.723 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.724 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.725 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:02.726 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:17:02.727 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:02.728 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:17:02.732 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:17:02.734 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:02.734 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.735 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:17:02.737 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.738 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2024-01-15 10:17:02.746 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-15 10:17:02.752 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-15 10:17:02.779 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:02.813 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:02.837 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:02.844 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:02.847 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-15 10:17:02.952 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.953 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.963 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:02.964 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:17:02.964 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:17:02.965 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 10:17:02.977 +06:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 10:17:02.994 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:02.995 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 17ms reading results.
2024-01-15 10:17:03.034 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:03.035 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:17:03.087 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-15 10:17:03.200 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 558.3629ms
2024-01-15 10:17:03.202 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:03.204 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 104
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\PointsOfInterestController.cs:line 79
   at lambda_method106(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-15 10:17:03.235 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:17:03.236 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:03.237 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:17:03.237 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/65/pointsofinterest/ - 500 null text/plain; charset=utf-8 632.7097ms
2024-01-15 10:17:05.380 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/65/pointsofinterest/ - application/json 62
2024-01-15 10:17:05.390 +06:00 [DBG] POST requests are not supported
2024-01-15 10:17:05.394 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:17:05.397 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:17:05.401 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest/'
2024-01-15 10:17:05.405 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest/'
2024-01-15 10:17:05.409 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:05.412 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:05.414 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:17:05.419 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:17:05.422 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:17:05.425 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:17:05.429 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:17:05.432 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:17:05.436 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:17:05.438 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:17:05.441 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:17:05.444 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:17:05.449 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:05.451 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:05.454 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:17:05.456 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:05.458 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:17:05.462 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:17:05.465 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:17:05.467 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:17:05.469 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000035": started reading request body.
2024-01-15 10:17:05.471 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000035": done reading request body.
2024-01-15 10:17:05.473 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:05.475 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:05.478 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:17:05.480 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:05.484 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:17:05.486 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:17:05.487 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-15 10:17:05.489 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.491 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.493 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:05.495 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:05.497 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:17:05.499 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:17:05.504 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:17:05.508 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.511 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:17:05.513 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.515 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:17:05.517 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.518 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.519 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:05.519 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:17:05.520 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:05.521 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:17:05.525 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:17:05.529 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:05.531 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.533 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-15 10:17:05.535 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.537 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:17:05.539 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-15 10:17:05.541 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-15 10:17:05.543 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:05.546 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:05.548 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:05.549 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:05.551 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-15 10:17:05.553 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.555 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.557 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:05.558 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:05.560 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:17:05.566 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 10:17:05.576 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 10:17:05.578 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.580 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:17:05.583 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.587 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-15 10:17:05.599 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-15 10:17:05.666 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 230.2798ms
2024-01-15 10:17:05.668 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:05.670 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 104
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\PointsOfInterestController.cs:line 79
   at lambda_method106(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-15 10:17:05.684 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:17:05.685 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:05.685 +06:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-01-15 10:17:05.688 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/65/pointsofinterest/ - 500 null text/plain; charset=utf-8 307.9339ms
2024-01-15 10:17:23.565 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/65/pointsofinterest/ - null null
2024-01-15 10:17:23.575 +06:00 [DBG] OPTIONS requests are not supported
2024-01-15 10:17:23.580 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:17:23.582 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:17:23.585 +06:00 [DBG] The request is a preflight request.
2024-01-15 10:17:23.587 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/65/pointsofinterest/ - 204 null null 22.1999ms
2024-01-15 10:17:23.591 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/65/pointsofinterest/ - application/json 62
2024-01-15 10:17:23.602 +06:00 [DBG] POST requests are not supported
2024-01-15 10:17:23.603 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:17:23.604 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:17:23.606 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest/'
2024-01-15 10:17:23.609 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest/'
2024-01-15 10:17:23.612 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:23.613 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:23.614 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:17:23.617 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:17:23.619 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:17:23.621 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:17:23.625 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:17:23.628 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:17:23.631 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:17:23.634 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:17:23.635 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:17:23.637 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:17:23.640 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:23.642 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:23.644 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:17:23.646 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:17:23.647 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:17:23.648 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:17:23.652 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 10:17:23.653 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 10:17:23.655 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000039": started reading request body.
2024-01-15 10:17:23.656 +06:00 [DBG] Connection id "0HN0LFV2UKEHV", Request id "0HN0LFV2UKEHV:00000039": done reading request body.
2024-01-15 10:17:23.658 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:23.660 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:23.662 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:17:23.664 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:17:23.667 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:17:23.669 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:17:23.671 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:17:23.672 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.674 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.675 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:23.676 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:23.678 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:17:23.680 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:17:23.686 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:17:23.690 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.691 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:17:23.692 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.693 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2024-01-15 10:17:23.694 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.695 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.696 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:23.697 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:17:23.698 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:17:23.699 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:17:23.703 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 10:17:23.705 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:23.707 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.708 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-15 10:17:23.709 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.710 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:17:23.711 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-15 10:17:23.712 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-15 10:17:23.713 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:23.715 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:23.717 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:23.718 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 10:17:23.718 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-15 10:17:23.719 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.730 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.731 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:17:23.732 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-15 10:17:23.733 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-15 10:17:23.734 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 10:17:23.739 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 10:17:23.742 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.744 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-15 10:17:23.746 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.747 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 10:17:23.750 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-15 10:17:23.823 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 191.6727ms
2024-01-15 10:17:23.825 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:17:23.839 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d282a4e3-f765-4e33-92e0-64628870914b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 104
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\PointsOfInterestController.cs:line 79
   at lambda_method106(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-15 10:17:23.882 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:17:23.883 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:17:23.926 +06:00 [DBG] Disposed connection to database '' on server '' (42ms).
2024-01-15 10:17:23.927 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/65/pointsofinterest/ - 500 null text/plain; charset=utf-8 336.4777ms
2024-01-15 10:23:58.360 +06:00 [DBG] Connection id "0HN0LFV2UKEHV" received FIN.
2024-01-15 10:23:58.369 +06:00 [DBG] Connection id "0HN0LFV2UKEHV" is closed. The last processed stream ID was 57.
2024-01-15 10:23:58.372 +06:00 [DBG] The connection queue processing loop for 0HN0LFV2UKEHV completed.
2024-01-15 10:23:58.379 +06:00 [DBG] Connection id "0HN0LFV2UKEHV" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-15 10:23:58.397 +06:00 [DBG] Connection id "0HN0LFV2UKEHV" stopped.
2024-01-15 10:24:26.568 +06:00 [DBG] Connection id "0HN0LFV2UKEI0" accepted.
2024-01-15 10:24:26.583 +06:00 [DBG] Connection id "0HN0LFV2UKEI0" started.
2024-01-15 10:24:26.596 +06:00 [DBG] Connection 0HN0LFV2UKEI0 established using the following protocol: "Tls13"
2024-01-15 10:24:26.605 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-15 10:24:26.615 +06:00 [DBG] The request path  does not match the path filter
2024-01-15 10:24:26.617 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-15 10:24:26.618 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:24:26.620 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:24:26.622 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-15 10:24:26.625 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:24:26.626 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:24:26.631 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:24:26.633 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:24:26.635 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:24:26.638 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:24:26.640 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:24:26.643 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:24:26.645 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:24:26.647 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:24:26.649 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:24:26.651 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:24:26.654 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:24:26.656 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:24:26.658 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:24:26.661 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:24:26.664 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 10:24:26.667 +06:00 [DBG] Creating DbConnection.
2024-01-15 10:24:26.668 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-15 10:24:26.670 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:24:26.672 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:24:26.678 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 10:24:26.680 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 10:24:26.681 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-15 10:24:26.684 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:24:26.701 +06:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 10:24:26.705 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 10:24:26.706 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-15 10:24:26.707 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:24:26.709 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 10:24:26.711 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-15 10:24:26.712 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:24:26.716 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-15 10:24:26.717 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-15 10:24:26.720 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-15 10:24:26.722 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-15 10:24:26.723 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 78.2327ms
2024-01-15 10:24:26.726 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-15 10:24:26.727 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 10:24:26.729 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 10:24:26.730 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 10:24:26.732 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 127.2472ms
2024-01-15 10:24:47.257 +06:00 [DBG] Connection id "0HN0LFV2UKEI1" accepted.
2024-01-15 10:24:47.262 +06:00 [DBG] Connection id "0HN0LFV2UKEI1" started.
2024-01-15 10:24:47.271 +06:00 [DBG] Connection 0HN0LFV2UKEI1 established using the following protocol: "Tls13"
2024-01-15 10:24:47.276 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-15 10:24:47.521 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-15 10:24:47.548 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-15 10:24:47.549 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 273.2415ms
2024-01-15 10:24:47.565 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-15 10:24:47.581 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-15 10:24:47.584 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 18.7592ms
2024-01-15 10:24:47.663 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.1935ms
2024-01-15 10:24:47.732 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-15 10:24:47.922 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.8835ms
2024-01-15 10:25:35.130 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 63
2024-01-15 10:25:35.147 +06:00 [DBG] POST requests are not supported
2024-01-15 10:25:35.150 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-15 10:25:35.153 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:25:35.155 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:25:35.157 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:25:35.160 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:25:35.163 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:25:35.164 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:25:35.166 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:25:35.167 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:25:35.168 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:25:35.170 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:25:35.171 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:25:35.173 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:25:35.174 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:25:35.175 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:25:35.176 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:25:35.189 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:25:35.190 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:25:35.191 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:25:35.192 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:25:35.193 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:25:35.194 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:25:35.195 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:25:35.196 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:25:35.196 +06:00 [DBG] Connection id "0HN0LFV2UKEI1", Request id "0HN0LFV2UKEI1:00000009": started reading request body.
2024-01-15 10:25:35.197 +06:00 [DBG] Connection id "0HN0LFV2UKEI1", Request id "0HN0LFV2UKEI1:00000009": done reading request body.
2024-01-15 10:25:35.198 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:25:35.199 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:25:35.200 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:25:35.201 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:25:35.203 +06:00 [DBG] The request has model state errors, returning an error response.
2024-01-15 10:25:35.205 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-01-15 10:25:35.212 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:25:35.216 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-01-15 10:25:35.218 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-01-15 10:25:35.220 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-01-15 10:25:35.222 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 48.9633ms
2024-01-15 10:25:35.223 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:25:35.223 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 93.5379ms
2024-01-15 10:39:05.075 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 10:39:05.143 +06:00 [DBG] Hosting starting
2024-01-15 10:39:05.299 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 10:39:05.301 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 10:39:05.301 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 10:39:05.302 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 10:39:05.303 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 10:39:05.305 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 10:39:05.306 +06:00 [INF] Hosting environment: Development
2024-01-15 10:39:05.306 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 10:39:05.307 +06:00 [DBG] Hosting started
2024-01-15 10:39:45.123 +06:00 [DBG] Connection id "0HN0LGFVNVBDP" accepted.
2024-01-15 10:39:45.129 +06:00 [DBG] Connection id "0HN0LGFVNVBDP" started.
2024-01-15 10:39:45.212 +06:00 [DBG] Connection 0HN0LGFVNVBDP established using the following protocol: "Tls13"
2024-01-15 10:39:45.273 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-15 10:39:45.461 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 10:39:45.525 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-15 10:39:45.563 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-15 10:39:45.613 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 345.6037ms
2024-01-15 10:39:45.641 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-15 10:39:45.641 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-15 10:39:45.657 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 16.6857ms
2024-01-15 10:39:45.756 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 114.5594ms
2024-01-15 10:39:45.780 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-15 10:39:45.957 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.3305ms
2024-01-15 10:40:22.301 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 49
2024-01-15 10:40:22.320 +06:00 [DBG] POST requests are not supported
2024-01-15 10:40:22.324 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-15 10:40:22.329 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:40:22.368 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:40:22.377 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:40:22.385 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:40:22.397 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:40:22.446 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:40:22.459 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:40:22.466 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:40:22.470 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:40:22.477 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:40:22.483 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:40:22.490 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:40:22.651 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 10:40:22.851 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:40:22.859 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:40:22.862 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:40:22.898 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:40:22.899 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:40:22.901 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:40:22.904 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:40:22.906 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:40:22.908 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:40:22.911 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:40:22.912 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:40:22.924 +06:00 [DBG] Connection id "0HN0LGFVNVBDP", Request id "0HN0LGFVNVBDP:00000009": started reading request body.
2024-01-15 10:40:22.925 +06:00 [DBG] Connection id "0HN0LGFVNVBDP", Request id "0HN0LGFVNVBDP:00000009": done reading request body.
2024-01-15 10:40:23.008 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:40:23.009 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:40:23.010 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:40:23.016 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:40:23.018 +06:00 [DBG] The request has model state errors, returning an error response.
2024-01-15 10:40:23.021 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-01-15 10:40:23.060 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:40:23.064 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-01-15 10:40:23.067 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-01-15 10:40:23.073 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-01-15 10:40:23.080 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 589.181ms
2024-01-15 10:40:23.081 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:40:23.085 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 786.7538ms
2024-01-15 10:50:49.591 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 10:50:49.665 +06:00 [DBG] Hosting starting
2024-01-15 10:50:49.789 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 10:50:49.791 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 10:50:49.793 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 10:50:49.795 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 10:50:49.797 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 10:50:49.799 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 10:50:49.800 +06:00 [INF] Hosting environment: Development
2024-01-15 10:50:49.801 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 10:50:49.804 +06:00 [DBG] Hosting started
2024-01-15 10:51:02.780 +06:00 [DBG] Connection id "0HN0LGM9MJPL0" accepted.
2024-01-15 10:51:02.787 +06:00 [DBG] Connection id "0HN0LGM9MJPL0" started.
2024-01-15 10:51:02.868 +06:00 [DBG] Connection 0HN0LGM9MJPL0 established using the following protocol: "Tls13"
2024-01-15 10:51:02.960 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-15 10:51:03.045 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 10:51:03.172 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-15 10:51:03.195 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-15 10:51:03.200 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 245.8324ms
2024-01-15 10:51:03.209 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-15 10:51:03.209 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-15 10:51:03.236 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 27.326ms
2024-01-15 10:51:03.282 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.902ms
2024-01-15 10:51:03.319 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-15 10:51:03.504 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 185.4179ms
2024-01-15 10:52:01.772 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 64
2024-01-15 10:52:01.792 +06:00 [DBG] POST requests are not supported
2024-01-15 10:52:01.797 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-15 10:52:01.801 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:52:01.835 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:52:01.846 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:52:01.855 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:52:01.865 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:52:01.906 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:52:01.915 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:52:01.922 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:52:01.927 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:52:01.933 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:52:01.941 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:52:01.945 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:52:02.088 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 10:52:02.243 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:52:02.245 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:52:02.247 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:52:02.250 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:52:02.251 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:52:02.252 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:52:02.253 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:52:02.254 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:52:02.260 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:52:02.261 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:52:02.262 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:52:02.268 +06:00 [DBG] Connection id "0HN0LGM9MJPL0", Request id "0HN0LGM9MJPL0:00000009": started reading request body.
2024-01-15 10:52:02.269 +06:00 [DBG] Connection id "0HN0LGM9MJPL0", Request id "0HN0LGM9MJPL0:00000009": done reading request body.
2024-01-15 10:52:02.402 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:52:02.404 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:52:02.405 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:52:02.411 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:52:02.443 +06:00 [DBG] The request has model state errors, returning an error response.
2024-01-15 10:52:02.448 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-01-15 10:52:02.453 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:52:02.468 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-01-15 10:52:02.471 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-01-15 10:52:02.473 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-01-15 10:52:02.494 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 544.8754ms
2024-01-15 10:52:02.496 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:52:02.499 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 728.2341ms
2024-01-15 10:54:43.014 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 10:54:43.074 +06:00 [DBG] Hosting starting
2024-01-15 10:54:43.228 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 10:54:43.229 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 10:54:43.232 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 10:54:43.233 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 10:54:43.234 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 10:54:43.235 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 10:54:43.236 +06:00 [INF] Hosting environment: Development
2024-01-15 10:54:43.238 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 10:54:43.243 +06:00 [DBG] Hosting started
2024-01-15 10:54:43.269 +06:00 [DBG] Connection id "0HN0LGOBDC4IT" accepted.
2024-01-15 10:54:43.275 +06:00 [DBG] Connection id "0HN0LGOBDC4IT" started.
2024-01-15 10:54:43.313 +06:00 [DBG] Connection id "0HN0LGOBDC4IU" accepted.
2024-01-15 10:54:43.348 +06:00 [DBG] Connection id "0HN0LGOBDC4IU" started.
2024-01-15 10:54:43.348 +06:00 [DBG] Connection 0HN0LGOBDC4IT established using the following protocol: "Tls13"
2024-01-15 10:54:43.352 +06:00 [DBG] Connection 0HN0LGOBDC4IU established using the following protocol: "Tls13"
2024-01-15 10:54:43.376 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-15 10:54:43.539 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 10:54:43.577 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-15 10:54:43.603 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-15 10:54:43.617 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-15 10:54:43.617 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-15 10:54:43.622 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 248.8421ms
2024-01-15 10:54:43.634 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 16.7424ms
2024-01-15 10:54:43.675 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.4463ms
2024-01-15 10:54:43.782 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-15 10:54:43.872 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.0232ms
2024-01-15 10:55:35.248 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 79
2024-01-15 10:55:35.265 +06:00 [DBG] POST requests are not supported
2024-01-15 10:55:35.268 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-15 10:55:35.274 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:55:35.311 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:55:35.321 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:55:35.328 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:55:35.340 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:55:35.378 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:55:35.390 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:55:35.394 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:55:35.397 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:55:35.404 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:55:35.405 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:55:35.410 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:55:35.547 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 10:55:35.756 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:55:35.761 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:55:35.763 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:55:35.768 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:55:35.770 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:55:35.771 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:55:35.774 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:55:35.815 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:55:35.818 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:55:35.820 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:55:35.822 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:55:35.835 +06:00 [DBG] Connection id "0HN0LGOBDC4IT", Request id "0HN0LGOBDC4IT:00000009": started reading request body.
2024-01-15 10:55:35.837 +06:00 [DBG] Connection id "0HN0LGOBDC4IT", Request id "0HN0LGOBDC4IT:00000009": done reading request body.
2024-01-15 10:55:35.923 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:55:35.929 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:55:35.931 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:55:35.938 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:55:35.941 +06:00 [DBG] The request has model state errors, returning an error response.
2024-01-15 10:55:35.943 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-01-15 10:55:35.993 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:55:36.001 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-01-15 10:55:36.004 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-01-15 10:55:36.006 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-01-15 10:55:36.017 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 605.1441ms
2024-01-15 10:55:36.019 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:55:36.022 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 775.9415ms
2024-01-15 10:57:46.712 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 10:57:46.779 +06:00 [DBG] Hosting starting
2024-01-15 10:57:46.894 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 10:57:46.895 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 10:57:46.895 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 10:57:46.896 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 10:57:46.896 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 10:57:46.897 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 10:57:46.897 +06:00 [INF] Hosting environment: Development
2024-01-15 10:57:46.898 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 10:57:46.898 +06:00 [DBG] Hosting started
2024-01-15 10:58:44.031 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ" accepted.
2024-01-15 10:58:44.037 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ" started.
2024-01-15 10:58:44.123 +06:00 [DBG] Connection 0HN0LGQJ5EDFJ established using the following protocol: "Tls13"
2024-01-15 10:58:44.175 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-15 10:58:44.306 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 10:58:44.404 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-15 10:58:44.434 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-15 10:58:44.438 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 267.6473ms
2024-01-15 10:58:44.445 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-15 10:58:44.445 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-15 10:58:44.456 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 11.0415ms
2024-01-15 10:58:44.515 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.8975ms
2024-01-15 10:58:44.542 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-15 10:58:44.716 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.2885ms
2024-01-15 10:59:12.708 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 64
2024-01-15 10:59:12.726 +06:00 [DBG] POST requests are not supported
2024-01-15 10:59:12.730 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-15 10:59:12.734 +06:00 [INF] CORS policy execution successful.
2024-01-15 10:59:12.769 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:59:12.779 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 10:59:12.784 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:59:12.793 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:59:12.835 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 10:59:12.846 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 10:59:12.854 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 10:59:12.859 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 10:59:12.868 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 10:59:12.870 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 10:59:12.875 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:59:13.024 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 10:59:13.135 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 10:59:13.145 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:59:13.155 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 10:59:13.166 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:59:13.172 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:59:13.179 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 10:59:13.188 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 10:59:13.199 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:59:13.200 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 10:59:13.210 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:59:13.233 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 10:59:13.236 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ", Request id "0HN0LGQJ5EDFJ:00000009": started reading request body.
2024-01-15 10:59:13.237 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ", Request id "0HN0LGQJ5EDFJ:00000009": done reading request body.
2024-01-15 10:59:13.327 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:59:13.329 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:59:13.330 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 10:59:13.344 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 10:59:13.346 +06:00 [DBG] The request has model state errors, returning an error response.
2024-01-15 10:59:13.348 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-01-15 10:59:13.350 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 10:59:13.355 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-01-15 10:59:13.364 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-01-15 10:59:13.369 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-01-15 10:59:13.377 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 498.8942ms
2024-01-15 10:59:13.378 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 10:59:13.383 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 678.4244ms
2024-01-15 11:01:22.727 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ" received FIN.
2024-01-15 11:01:22.748 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-15 11:01:22.752 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ" is closed. The last processed stream ID was 9.
2024-01-15 11:01:22.755 +06:00 [DBG] The connection queue processing loop for 0HN0LGQJ5EDFJ completed.
2024-01-15 11:01:22.759 +06:00 [DBG] Connection id "0HN0LGQJ5EDFJ" stopped.
2024-01-15 11:50:43.001 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 11:50:43.077 +06:00 [DBG] Hosting starting
2024-01-15 11:50:43.184 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 11:50:43.185 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 11:50:43.188 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 11:50:43.190 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 11:50:43.191 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 11:50:43.194 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 11:50:43.197 +06:00 [INF] Hosting environment: Development
2024-01-15 11:50:43.199 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 11:50:43.203 +06:00 [DBG] Hosting started
2024-01-15 11:50:45.922 +06:00 [DBG] Connection id "0HN0LHNLI4BL2" accepted.
2024-01-15 11:50:45.951 +06:00 [DBG] Connection id "0HN0LHNLI4BL2" started.
2024-01-15 11:50:45.986 +06:00 [DBG] Connection 0HN0LHNLI4BL2 established using the following protocol: "Tls13"
2024-01-15 11:50:46.021 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-15 11:50:46.121 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 11:50:46.185 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-15 11:50:46.218 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-15 11:50:46.223 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 205.5767ms
2024-01-15 11:50:46.246 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-15 11:50:46.260 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-15 11:50:46.261 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 14.5449ms
2024-01-15 11:50:46.307 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.8431ms
2024-01-15 11:50:46.374 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-15 11:50:46.501 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 127.4174ms
2024-01-15 11:55:57.768 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 79
2024-01-15 11:55:57.779 +06:00 [DBG] POST requests are not supported
2024-01-15 11:55:57.784 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-15 11:55:57.787 +06:00 [INF] CORS policy execution successful.
2024-01-15 11:55:57.817 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 11:55:57.823 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2024-01-15 11:55:57.829 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 11:55:57.838 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 11:55:57.870 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 11:55:57.880 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 11:55:57.885 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 11:55:57.889 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 11:55:57.895 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 11:55:57.897 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 11:55:57.902 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 11:55:58.041 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 11:55:58.240 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 11:55:58.248 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 11:55:58.251 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 11:55:58.294 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 11:55:58.296 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 11:55:58.297 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 11:55:58.300 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 11:55:58.309 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 11:55:58.311 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 11:55:58.314 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 11:55:58.320 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-15 11:55:58.331 +06:00 [DBG] Connection id "0HN0LHNLI4BL2", Request id "0HN0LHNLI4BL2:00000009": started reading request body.
2024-01-15 11:55:58.333 +06:00 [DBG] Connection id "0HN0LHNLI4BL2", Request id "0HN0LHNLI4BL2:00000009": done reading request body.
2024-01-15 11:55:58.430 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 11:55:58.431 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 11:55:58.432 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 11:55:58.439 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 11:55:58.464 +06:00 [DBG] The request has model state errors, returning an error response.
2024-01-15 11:55:58.466 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-01-15 11:55:58.470 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-15 11:55:58.482 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-01-15 11:55:58.485 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-01-15 11:55:58.487 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2024-01-15 11:55:58.493 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 589.2935ms
2024-01-15 11:55:58.496 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 11:55:58.499 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 735.6426ms
2024-01-15 11:59:33.927 +06:00 [DBG] Connection id "0HN0LHNLI4BL3" received FIN.
2024-01-15 11:59:33.934 +06:00 [DBG] Connection id "0HN0LHNLI4BL3" accepted.
2024-01-15 11:59:33.936 +06:00 [DBG] Connection id "0HN0LHNLI4BL4" accepted.
2024-01-15 11:59:33.936 +06:00 [DBG] Connection id "0HN0LHNLI4BL3" started.
2024-01-15 11:59:33.941 +06:00 [DBG] Connection id "0HN0LHNLI4BL4" started.
2024-01-15 11:59:33.951 +06:00 [DBG] Connection 0HN0LHNLI4BL4 established using the following protocol: "Tls13"
2024-01-15 11:59:34.000 +06:00 [INF] Request starting HTTP/1.1 POST https://localhost:7156/api/cities/65/pointsofinterest - application/json 90
2024-01-15 11:59:34.003 +06:00 [DBG] POST requests are not supported
2024-01-15 11:59:34.006 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest'
2024-01-15 11:59:34.007 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest'
2024-01-15 11:59:34.008 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 11:59:34.009 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 11:59:34.010 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 11:59:34.011 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 11:59:34.012 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 11:59:34.013 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 11:59:34.014 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 11:59:34.015 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 11:59:34.016 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 11:59:34.002 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-01-15 11:59:34.122 +06:00 [DBG] Connection id "0HN0LHNLI4BL3" stopped.
2024-01-15 11:59:34.125 +06:00 [DBG] Connection id "0HN0LHNLI4BL3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-15 11:59:34.054 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 11:59:34.129 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 11:59:34.130 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 11:59:34.131 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 11:59:34.132 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 11:59:34.133 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 11:59:34.134 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 11:59:34.135 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 11:59:34.136 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 11:59:34.137 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 11:59:34.137 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 11:59:34.139 +06:00 [DBG] Connection id "0HN0LHNLI4BL4", Request id "0HN0LHNLI4BL4:00000001": started reading request body.
2024-01-15 11:59:34.180 +06:00 [DBG] Connection id "0HN0LHNLI4BL4", Request id "0HN0LHNLI4BL4:00000001": done reading request body.
2024-01-15 11:59:34.182 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 11:59:34.185 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 11:59:34.186 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 11:59:34.187 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 11:59:39.967 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 11:59:40.132 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-01-15 11:59:40.347 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 11:59:40.451 +06:00 [DBG] Creating DbConnection.
2024-01-15 11:59:40.492 +06:00 [DBG] Created DbConnection. (39ms).
2024-01-15 11:59:40.499 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:40.861 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:40.868 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 11:59:40.876 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-01-15 11:59:40.889 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2024-01-15 11:59:40.902 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 11:59:40.972 +06:00 [INF] Executed DbCommand (71ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 11:59:40.996 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:41.009 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 21ms reading results.
2024-01-15 11:59:41.013 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:41.025 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (12ms).
2024-01-15 11:59:44.860 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-01-15 11:59:44.928 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
            SELECT TOP(1) c.Id, c.Description, c.Name, c.userId
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 11:59:44.940 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:44.945 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:44.950 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 11:59:44.955 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-01-15 11:59:44.960 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-15 11:59:44.963 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 11:59:44.968 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 11:59:45.012 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 11:59:45.036 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:45.042 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 69ms reading results.
2024-01-15 11:59:45.049 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:45.051 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 11:59:45.059 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Id == __userId_0)
    .FirstOrDefault()'
2024-01-15 11:59:45.067 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.Id == @__userId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 11:59:45.072 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:45.077 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:45.079 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 11:59:45.081 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 11:59:45.085 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-15 11:59:45.086 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-15 11:59:45.095 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-15 11:59:45.099 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:45.102 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-15 11:59:45.104 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:45.106 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-15 11:59:46.071 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-15 11:59:46.079 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-15 11:59:46.112 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 11:59:46.150 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 11:59:46.182 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 11:59:46.200 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 11:59:46.212 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-15 11:59:46.304 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:46.307 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:46.312 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 11:59:46.315 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 11:59:46.317 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 11:59:46.319 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 11:59:46.331 +06:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 11:59:46.348 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:46.351 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 16ms reading results.
2024-01-15 11:59:46.358 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:46.360 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 11:59:46.375 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5cbd130b-1523-4b62-8eb9-7b80e85ad835
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5cbd130b-1523-4b62-8eb9-7b80e85ad835
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-15 11:59:46.447 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 12431.1319ms
2024-01-15 11:59:46.454 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 11:59:46.464 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5cbd130b-1523-4b62-8eb9-7b80e85ad835
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 109
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\PointsOfInterestController.cs:line 79
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-15 11:59:46.517 +06:00 [DBG] Connection id "0HN0LHNLI4BL4" completed keep alive response.
2024-01-15 11:59:46.521 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 11:59:46.528 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 11:59:46.533 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 11:59:46.534 +06:00 [INF] Request finished HTTP/1.1 POST https://localhost:7156/api/cities/65/pointsofinterest - 500 null text/plain; charset=utf-8 12534.0943ms
2024-01-15 12:01:04.429 +06:00 [INF] Request starting HTTP/1.1 POST https://localhost:7156/api/cities/65/pointsofinterest - application/json 90
2024-01-15 12:01:04.442 +06:00 [DBG] POST requests are not supported
2024-01-15 12:01:04.445 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest'
2024-01-15 12:01:04.446 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest'
2024-01-15 12:01:04.454 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 12:01:04.458 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 12:01:04.461 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 12:01:04.462 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 12:01:04.463 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 12:01:04.467 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 12:01:04.471 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 12:01:04.474 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 12:01:04.478 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 12:01:04.487 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 12:01:04.493 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 12:01:04.497 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 12:01:04.505 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 12:01:04.508 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 12:01:04.510 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 12:01:04.515 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 12:01:04.521 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 12:01:04.524 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 12:01:04.530 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 12:01:04.537 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 12:01:04.542 +06:00 [DBG] Connection id "0HN0LHNLI4BL4", Request id "0HN0LHNLI4BL4:00000002": started reading request body.
2024-01-15 12:01:04.544 +06:00 [DBG] Connection id "0HN0LHNLI4BL4", Request id "0HN0LHNLI4BL4:00000002": done reading request body.
2024-01-15 12:01:04.548 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 12:01:04.550 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 12:01:04.552 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 12:01:04.556 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 12:01:04.583 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 12:01:04.605 +06:00 [DBG] Creating DbConnection.
2024-01-15 12:01:04.609 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-15 12:01:04.610 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.613 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.617 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:01:04.619 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 12:01:04.623 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-01-15 12:01:04.626 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 12:01:04.638 +06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 12:01:04.645 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.650 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-15 12:01:04.656 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.664 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (8ms).
2024-01-15 12:01:04.675 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.682 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.690 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:01:04.696 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-01-15 12:01:04.702 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-01-15 12:01:04.708 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 12:01:04.718 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 12:01:04.726 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:01:04.731 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.736 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 9ms reading results.
2024-01-15 12:01:04.740 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.743 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 12:01:04.747 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.751 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.754 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:01:04.757 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 12:01:04.761 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-01-15 12:01:04.765 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-15 12:01:04.777 +06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-15 12:01:04.785 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.790 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-15 12:01:04.795 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:04.798 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 12:01:15.620 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-15 12:01:15.623 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-15 12:01:15.627 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:01:15.632 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:01:15.638 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:01:15.644 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:01:15.648 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-15 12:01:15.655 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:15.659 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:15.661 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:01:15.663 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-15 12:01:15.666 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-15 12:01:15.670 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 12:01:15.682 +06:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 12:01:15.690 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:15.693 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-15 12:01:15.698 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:15.700 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-15 12:01:15.706 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5cbd130b-1523-4b62-8eb9-7b80e85ad835
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5cbd130b-1523-4b62-8eb9-7b80e85ad835
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-15 12:01:15.778 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 11299.2287ms
2024-01-15 12:01:15.786 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 12:01:15.792 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5cbd130b-1523-4b62-8eb9-7b80e85ad835
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 109
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\PointsOfInterestController.cs:line 79
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-15 12:01:15.824 +06:00 [DBG] Connection id "0HN0LHNLI4BL4" completed keep alive response.
2024-01-15 12:01:15.826 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 12:01:15.826 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:01:15.828 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-15 12:01:15.829 +06:00 [INF] Request finished HTTP/1.1 POST https://localhost:7156/api/cities/65/pointsofinterest - 500 null text/plain; charset=utf-8 11398.8125ms
2024-01-15 12:04:13.901 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-15 12:04:14.033 +06:00 [DBG] Hosting starting
2024-01-15 12:04:14.183 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-15 12:04:14.184 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-15 12:04:14.186 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-15 12:04:14.187 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-15 12:04:14.187 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-15 12:04:14.188 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 12:04:14.189 +06:00 [INF] Hosting environment: Development
2024-01-15 12:04:14.190 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2024-01-15 12:04:14.191 +06:00 [DBG] Hosting started
2024-01-15 12:04:18.827 +06:00 [DBG] Connection id "0HN0LHV7QJ923" received FIN.
2024-01-15 12:04:18.837 +06:00 [DBG] Connection id "0HN0LHV7QJ923" accepted.
2024-01-15 12:04:18.840 +06:00 [DBG] Connection id "0HN0LHV7QJ923" started.
2024-01-15 12:04:18.841 +06:00 [DBG] Connection id "0HN0LHV7QJ924" accepted.
2024-01-15 12:04:18.844 +06:00 [DBG] Connection id "0HN0LHV7QJ924" started.
2024-01-15 12:04:18.855 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-01-15 12:04:18.879 +06:00 [DBG] Connection id "0HN0LHV7QJ923" stopped.
2024-01-15 12:04:18.883 +06:00 [DBG] Connection id "0HN0LHV7QJ923" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-15 12:04:18.887 +06:00 [DBG] Connection 0HN0LHV7QJ924 established using the following protocol: "Tls13"
2024-01-15 12:04:18.903 +06:00 [INF] Request starting HTTP/1.1 POST https://localhost:7156/api/cities/65/pointsofinterest - application/json 90
2024-01-15 12:04:18.911 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-15 12:04:18.917 +06:00 [DBG] POST requests are not supported
2024-01-15 12:04:18.929 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/65/pointsofinterest'
2024-01-15 12:04:18.933 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/65/pointsofinterest'
2024-01-15 12:04:18.935 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 12:04:18.938 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 12:04:18.961 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-15 12:04:18.964 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-15 12:04:18.967 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-15 12:04:18.972 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-15 12:04:18.975 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-15 12:04:18.977 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-15 12:04:18.980 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 12:04:19.059 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-15 12:04:19.143 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-15 12:04:19.147 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-15 12:04:19.149 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-15 12:04:19.151 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 12:04:19.153 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-15 12:04:19.156 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-15 12:04:19.159 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-15 12:04:19.161 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 12:04:19.163 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-15 12:04:19.165 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-15 12:04:19.167 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-15 12:04:19.174 +06:00 [DBG] Connection id "0HN0LHV7QJ924", Request id "0HN0LHV7QJ924:00000001": started reading request body.
2024-01-15 12:04:19.175 +06:00 [DBG] Connection id "0HN0LHV7QJ924", Request id "0HN0LHV7QJ924:00000001": done reading request body.
2024-01-15 12:04:19.225 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 12:04:19.227 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 12:04:19.229 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-15 12:04:19.232 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-15 12:04:19.661 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-15 12:04:19.701 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-01-15 12:04:19.819 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 12:04:19.849 +06:00 [DBG] Creating DbConnection.
2024-01-15 12:04:19.864 +06:00 [DBG] Created DbConnection. (13ms).
2024-01-15 12:04:19.868 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:20.125 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:20.129 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:04:20.135 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-15 12:04:20.144 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2024-01-15 12:04:20.151 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 12:04:20.225 +06:00 [INF] Executed DbCommand (71ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 12:04:20.258 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:20.272 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 31ms reading results.
2024-01-15 12:04:20.282 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:20.294 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (13ms).
2024-01-15 12:04:24.241 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-01-15 12:04:24.302 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
            SELECT TOP(1) c.Id, c.Description, c.Name, c.userId
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 12:04:24.315 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:24.321 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:24.327 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:04:24.332 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-01-15 12:04:24.340 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-01-15 12:04:24.346 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 12:04:24.361 +06:00 [INF] Executed DbCommand (14ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-15 12:04:24.405 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:04:24.438 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:24.442 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 78ms reading results.
2024-01-15 12:04:24.448 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:24.454 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-15 12:04:26.286 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Id == __userId_0)
    .FirstOrDefault()'
2024-01-15 12:04:26.299 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.Id == @__userId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-15 12:04:26.303 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:26.305 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:26.307 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:04:26.310 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-15 12:04:26.313 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-15 12:04:26.314 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-15 12:04:26.321 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-15 12:04:26.327 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:26.330 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-15 12:04:26.333 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:26.337 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-15 12:04:46.535 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-15 12:04:46.544 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-15 12:04:46.582 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:04:46.630 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:04:46.657 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:04:46.674 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-15 12:04:46.685 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-15 12:04:46.779 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:46.782 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:46.792 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-15 12:04:46.797 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-01-15 12:04:46.802 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-15 12:04:46.806 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 12:04:46.822 +06:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-15 12:04:46.843 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:46.849 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 16ms reading results.
2024-01-15 12:04:46.854 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:46.857 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-15 12:04:46.875 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2b9bba0b-1b1c-493d-b5fe-dbbab29f24ee
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2b9bba0b-1b1c-493d-b5fe-dbbab29f24ee
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-15 12:04:46.960 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 27976.4356ms
2024-01-15 12:04:46.968 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-15 12:04:46.978 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_PointsOfInterest_Users_UserId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2b9bba0b-1b1c-493d-b5fe-dbbab29f24ee
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 109
   at CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest(Int32 cityId, PointOfInterestForCreationDto pointOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\PointsOfInterestController.cs:line 79
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-15 12:04:47.053 +06:00 [DBG] Connection id "0HN0LHV7QJ924" completed keep alive response.
2024-01-15 12:04:47.057 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-15 12:04:47.062 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-15 12:04:47.064 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-15 12:04:47.070 +06:00 [INF] Request finished HTTP/1.1 POST https://localhost:7156/api/cities/65/pointsofinterest - 500 null text/plain; charset=utf-8 28167.2532ms
