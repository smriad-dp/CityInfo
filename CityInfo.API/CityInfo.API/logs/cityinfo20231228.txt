2023-12-28 16:05:36.404 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-12-28 16:05:36.484 +06:00 [DBG] Hosting starting
2023-12-28 16:05:36.621 +06:00 [INF] Now listening on: https://localhost:7156
2023-12-28 16:05:36.622 +06:00 [INF] Now listening on: http://localhost:5062
2023-12-28 16:05:36.623 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-12-28 16:05:36.624 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-12-28 16:05:36.625 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-12-28 16:05:36.627 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2023-12-28 16:05:36.629 +06:00 [INF] Hosting environment: Development
2023-12-28 16:05:36.630 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2023-12-28 16:05:36.631 +06:00 [DBG] Hosting started
2023-12-28 16:05:43.177 +06:00 [DBG] Connection id "0HN07HI6P4PTF" accepted.
2023-12-28 16:05:43.179 +06:00 [DBG] Connection id "0HN07HI6P4PTF" started.
2023-12-28 16:05:43.216 +06:00 [DBG] Connection 0HN07HI6P4PTF established using the following protocol: "Tls13"
2023-12-28 16:05:43.254 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/ - null null
2023-12-28 16:05:43.394 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-12-28 16:05:43.405 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:05:43.415 +06:00 [DBG] No candidates found for the request path '/'
2023-12-28 16:05:43.416 +06:00 [DBG] Request did not match any endpoints
2023-12-28 16:05:43.421 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/ - 404 0 null 172.0669ms
2023-12-28 16:05:43.427 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7156/, Response status code: 404
2023-12-28 16:05:51.034 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2023-12-28 16:05:51.104 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-12-28 16:05:51.126 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-12-28 16:05:51.128 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 94.5759ms
2023-12-28 16:05:51.133 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2023-12-28 16:05:51.143 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2023-12-28 16:05:51.153 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 20.5929ms
2023-12-28 16:05:51.203 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.7372ms
2023-12-28 16:05:51.241 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2023-12-28 16:05:51.376 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.5062ms
2023-12-28 16:06:06.421 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities?pageNumber=1&pageSize=10 - null null
2023-12-28 16:06:06.425 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:06:06.432 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:06:06.435 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:06:06.438 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:06:06.441 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:06:06.464 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:06:06.472 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:06:06.474 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:06:06.476 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:06:06.479 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:06:06.481 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:06:06.486 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:06:06.725 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:06:06.822 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:06:06.830 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:06:06.833 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:06:06.836 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:06:06.839 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:06:06.841 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:06:06.842 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:06:06.845 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:06:06.847 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:06:06.849 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:06:06.851 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:06:06.852 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:06:06.854 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:06:06.855 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:06:06.857 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:06:06.858 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:06:06.860 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-12-28 16:06:06.862 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:06:06.864 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:06:06.866 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:06:06.869 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:06:06.872 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:06:06.875 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-12-28 16:06:06.878 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:06:06.880 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:06:06.882 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:06:06.884 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:06:07.340 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:06:07.703 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-12-28 16:06:07.823 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:06:07.849 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:06:07.863 +06:00 [DBG] Created DbConnection. (12ms).
2023-12-28 16:06:07.868 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:06:08.394 +06:00 [ERR] An error occurred using the connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:06:08.414 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CityInfo" requested by the login. The login failed.
Login failed for user 'DATA-PATH\smriad'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:de02db09-5484-4cfa-ba7d-7a63678c30a1
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CityInfo" requested by the login. The login failed.
Login failed for user 'DATA-PATH\smriad'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:de02db09-5484-4cfa-ba7d-7a63678c30a1
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-12-28 16:06:08.491 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 2005.9162ms
2023-12-28 16:06:08.494 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:06:08.497 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CityInfo" requested by the login. The login failed.
Login failed for user 'DATA-PATH\smriad'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:de02db09-5484-4cfa-ba7d-7a63678c30a1
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 39
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-12-28 16:06:08.533 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:06:08.539 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:06:08.545 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-12-28 16:06:08.549 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 2128.6447ms
2023-12-28 16:06:22.595 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/1?includePointsOfInterest=false - null null
2023-12-28 16:06:22.597 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:06:22.599 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-12-28 16:06:22.602 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-12-28 16:06:22.604 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:06:22.606 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:06:22.611 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:06:22.613 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:06:22.615 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:06:22.617 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:06:22.619 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:06:22.621 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:06:22.623 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:06:22.626 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:06:22.629 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-12-28 16:06:22.630 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-12-28 16:06:22.633 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:06:22.634 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:06:22.636 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-12-28 16:06:22.638 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-12-28 16:06:22.640 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:06:22.642 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-12-28 16:06:22.644 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:06:22.645 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:06:22.646 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:06:22.648 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:06:22.668 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:06:22.678 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-12-28 16:06:22.726 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:06:22.738 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:06:22.740 +06:00 [DBG] Created DbConnection. (1ms).
2023-12-28 16:06:22.741 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:06:22.754 +06:00 [ERR] An error occurred using the connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:06:22.759 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CityInfo" requested by the login. The login failed.
Login failed for user 'DATA-PATH\smriad'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:0f027be4-d92c-44bb-9899-138363d0a292
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CityInfo" requested by the login. The login failed.
Login failed for user 'DATA-PATH\smriad'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:0f027be4-d92c-44bb-9899-138363d0a292
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-12-28 16:06:22.820 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 196.4984ms
2023-12-28 16:06:22.823 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:06:22.825 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CityInfo" requested by the login. The login failed.
Login failed for user 'DATA-PATH\smriad'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:0f027be4-d92c-44bb-9899-138363d0a292
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCityAsync(Int32 cityId, Boolean includePointsOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 59
   at CityInfo.API.Controllers.CitiesController.GetCity(Int32 id, Boolean includePointsOfInterest) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-12-28 16:06:22.843 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:06:22.847 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:06:22.850 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-12-28 16:06:22.852 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/1?includePointsOfInterest=false - 500 null text/plain; charset=utf-8 257.006ms
2023-12-28 16:06:51.912 +06:00 [INF] Application is shutting down...
2023-12-28 16:06:51.913 +06:00 [DBG] Hosting stopping
2023-12-28 16:06:51.934 +06:00 [DBG] Connection id "0HN07HI6P4PTF" is closing.
2023-12-28 16:06:51.938 +06:00 [DBG] Connection id "0HN07HI6P4PTF" is closed. The last processed stream ID was 13.
2023-12-28 16:06:51.941 +06:00 [DBG] Connection id "0HN07HI6P4PTF" received FIN.
2023-12-28 16:06:51.943 +06:00 [DBG] Connection id "0HN07HI6P4PTF" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 16:06:51.943 +06:00 [DBG] The connection queue processing loop for 0HN07HI6P4PTF completed.
2023-12-28 16:06:51.950 +06:00 [DBG] Connection id "0HN07HI6P4PTF" stopped.
2023-12-28 16:06:51.954 +06:00 [DBG] Hosting stopped
2023-12-28 16:07:23.682 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:07:23.969 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:07:25.210 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:08:01.251 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:08:01.527 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:08:01.535 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:08:01.555 +06:00 [DBG] Created DbConnection. (18ms).
2023-12-28 16:08:01.556 +06:00 [DBG] Migrating using database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:01.564 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:01.674 +06:00 [DBG] An error occurred using the connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:01.675 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:01.677 +06:00 [DBG] An error occurred using the connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:01.693 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:08:01.694 +06:00 [DBG] Created DbConnection. (0ms).
2023-12-28 16:08:01.694 +06:00 [DBG] Opening connection to database 'master' on server 'DPM23153'.
2023-12-28 16:08:01.702 +06:00 [DBG] Opened connection to database 'master' on server 'DPM23153'.
2023-12-28 16:08:01.707 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:01.712 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (5ms).
2023-12-28 16:08:01.714 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (9ms).
2023-12-28 16:08:01.717 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [CityInfo];
2023-12-28 16:08:01.981 +06:00 [INF] Executed DbCommand (264ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [CityInfo];
2023-12-28 16:08:01.982 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:01.982 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:01.982 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:01.982 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfo] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-12-28 16:08:02.107 +06:00 [INF] Executed DbCommand (125ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [CityInfo] SET READ_COMMITTED_SNAPSHOT ON;
END;
2023-12-28 16:08:02.108 +06:00 [DBG] Closing connection to database 'master' on server 'DPM23153'.
2023-12-28 16:08:02.112 +06:00 [DBG] Closed connection to database 'master' on server 'DPM23153' (2ms).
2023-12-28 16:08:02.114 +06:00 [DBG] Disposing connection to database 'master' on server 'DPM23153'.
2023-12-28 16:08:02.114 +06:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-12-28 16:08:02.114 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.117 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.118 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.118 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.118 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.118 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-12-28 16:08:02.121 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-12-28 16:08:02.121 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.121 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:02.149 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.149 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.149 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.149 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.149 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.150 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-12-28 16:08:02.168 +06:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-12-28 16:08:02.169 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.169 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:02.169 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.169 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.169 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.169 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.169 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.169 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-12-28 16:08:02.170 +06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-12-28 16:08:02.170 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.170 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:02.171 +06:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-12-28 16:08:02.171 +06:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-12-28 16:08:02.171 +06:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2023-12-28 16:08:02.171 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.171 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.172 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-12-28 16:08:02.179 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-12-28 16:08:02.179 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.179 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:02.180 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.180 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.180 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:08:02.180 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-12-28 16:08:02.399 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (218ms).
2023-12-28 16:08:02.399 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-12-28 16:08:02.408 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-12-28 16:08:02.409 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.410 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 0ms reading results.
2023-12-28 16:08:02.410 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.410 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:02.418 +06:00 [INF] Applying migration '20231218064936_CityInfoDBInitialMigration'.
2023-12-28 16:08:02.430 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.430 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:02.431 +06:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-12-28 16:08:02.436 +06:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-12-28 16:08:02.436 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.436 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.437 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.437 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] INTEGER NOT NULL,
    [Name] TEXT NOT NULL,
    [Description] TEXT NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2023-12-28 16:08:02.440 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Cities] (
    [Id] INTEGER NOT NULL,
    [Name] TEXT NOT NULL,
    [Description] TEXT NULL,
    CONSTRAINT [PK_Cities] PRIMARY KEY ([Id])
);
2023-12-28 16:08:02.440 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.440 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.440 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.440 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] INTEGER NOT NULL,
    [Name] TEXT NOT NULL,
    [CityId] INTEGER NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2023-12-28 16:08:02.444 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PointsOfInterest] (
    [Id] INTEGER NOT NULL,
    [Name] TEXT NOT NULL,
    [CityId] INTEGER NOT NULL,
    CONSTRAINT [PK_PointsOfInterest] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PointsOfInterest_Cities_CityId] FOREIGN KEY ([CityId]) REFERENCES [Cities] ([Id]) ON DELETE CASCADE
);
2023-12-28 16:08:02.444 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.444 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.444 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.444 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2023-12-28 16:08:02.450 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PointsOfInterest_CityId] ON [PointsOfInterest] ([CityId]);
2023-12-28 16:08:02.450 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:02.450 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.450 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:02.450 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231218064936_CityInfoDBInitialMigration', N'8.0.0');
2023-12-28 16:08:02.458 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231218064936_CityInfoDBInitialMigration', N'8.0.0');
2023-12-28 16:08:04.365 +06:00 [DBG] Committing transaction.
2023-12-28 16:08:04.368 +06:00 [DBG] Committed transaction.
2023-12-28 16:08:04.368 +06:00 [DBG] Disposing transaction.
2023-12-28 16:08:04.368 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:04.368 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:04.368 +06:00 [INF] Applying migration '20231218070236_CituInfoDBAddPointOfInterestDescription'.
2023-12-28 16:08:04.372 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:04.372 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:04.372 +06:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-12-28 16:08:04.372 +06:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-12-28 16:08:04.373 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:04.373 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.373 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.373 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PointsOfInterest] ADD [Description] TEXT NOT NULL DEFAULT '';
2023-12-28 16:08:04.390 +06:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [PointsOfInterest] ADD [Description] TEXT NOT NULL DEFAULT '';
2023-12-28 16:08:04.390 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:04.390 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.390 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.390 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231218070236_CituInfoDBAddPointOfInterestDescription', N'8.0.0');
2023-12-28 16:08:04.400 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231218070236_CituInfoDBAddPointOfInterestDescription', N'8.0.0');
2023-12-28 16:08:04.400 +06:00 [DBG] Committing transaction.
2023-12-28 16:08:04.401 +06:00 [DBG] Committed transaction.
2023-12-28 16:08:04.401 +06:00 [DBG] Disposing transaction.
2023-12-28 16:08:04.401 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:04.401 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:04.401 +06:00 [INF] Applying migration '20231218084947_DataSeed'.
2023-12-28 16:08:04.412 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:04.413 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:04.413 +06:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-12-28 16:08:04.413 +06:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-12-28 16:08:04.413 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:04.413 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.413 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.413 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, 'The one with that big park.', 'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2023-12-28 16:08:04.480 +06:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (1, 'The one with that big park.', 'New York City');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2023-12-28 16:08:04.480 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:04.480 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.480 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:04.480 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, 'The one with the unfinished cathedral.', 'Antwrep');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2023-12-28 16:08:06.612 +06:00 [INF] Executed DbCommand (2,132ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (2, 'The one with the unfinished cathedral.', 'Antwrep');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2023-12-28 16:08:06.612 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:06.613 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:06.613 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:06.613 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, 'The one with that big tower.', 'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2023-12-28 16:08:06.636 +06:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] ON;
INSERT INTO [Cities] ([Id], [Description], [Name])
VALUES (3, 'The one with that big tower.', 'Paris');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[Cities]'))
    SET IDENTITY_INSERT [Cities] OFF;
2023-12-28 16:08:06.636 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:06.636 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:06.636 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:06.636 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, 'The most visited urban park in the United States', 'Central Park');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:06.662 +06:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (1, 1, 'The most visited urban park in the United States', 'Central Park');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:06.662 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:06.662 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:08.376 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1714ms).
2023-12-28 16:08:08.377 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (2, 1, 'A 102-story skycraper located in Midtown Manhattan', 'Empire State Building');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:08.414 +06:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (2, 1, 'A 102-story skycraper located in Midtown Manhattan', 'Empire State Building');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:08.414 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:08.414 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:08.414 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:08.414 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (3, 2, 'The one that is incomplete', 'Cathedral');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:08.439 +06:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (3, 2, 'The one that is incomplete', 'Cathedral');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:08.439 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:08.439 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:08.439 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:08.439 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (4, 2, 'The the finest example of railway architecture in Belgium.', 'Antwerp Central Station');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:08.461 +06:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (4, 2, 'The the finest example of railway architecture in Belgium.', 'Antwerp Central Station');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:09.925 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:09.925 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:09.925 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:09.925 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (5, 3, 'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', 'Eiffel Tower');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:09.954 +06:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (5, 3, 'A wrought iron lattice tower on the Champ de Mars, named after engineer Gustave Eiffel.', 'Eiffel Tower');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:09.955 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:09.955 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:09.955 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:09.955 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (6, 3, 'The world''s largest museum.', 'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:09.975 +06:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (6, 3, 'The world''s largest museum.', 'The Louvre');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:09.975 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:09.975 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:09.975 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:09.975 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231218084947_DataSeed', N'8.0.0');
2023-12-28 16:08:09.978 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231218084947_DataSeed', N'8.0.0');
2023-12-28 16:08:11.374 +06:00 [DBG] Committing transaction.
2023-12-28 16:08:11.379 +06:00 [DBG] Committed transaction.
2023-12-28 16:08:11.379 +06:00 [DBG] Disposing transaction.
2023-12-28 16:08:11.379 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:11.380 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:11.380 +06:00 [INF] Applying migration '20231219061020_testmigration'.
2023-12-28 16:08:11.383 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:11.384 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:11.384 +06:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-12-28 16:08:11.384 +06:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-12-28 16:08:11.384 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:11.384 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:11.384 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:11.384 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [PointsOfInterest]
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-12-28 16:08:11.395 +06:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [PointsOfInterest]
WHERE [Id] = 2;
SELECT @@ROWCOUNT;
2023-12-28 16:08:11.395 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:11.395 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:11.395 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:11.395 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231219061020_testmigration', N'8.0.0');
2023-12-28 16:08:11.396 +06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231219061020_testmigration', N'8.0.0');
2023-12-28 16:08:11.396 +06:00 [DBG] Committing transaction.
2023-12-28 16:08:11.396 +06:00 [DBG] Committed transaction.
2023-12-28 16:08:11.396 +06:00 [DBG] Disposing transaction.
2023-12-28 16:08:11.396 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:11.396 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:11.396 +06:00 [INF] Applying migration '20231219061241_testundo'.
2023-12-28 16:08:11.398 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:11.398 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:11.398 +06:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-12-28 16:08:11.398 +06:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-12-28 16:08:11.398 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:11.398 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:11.398 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2023-12-28 16:08:11.399 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (2, 1, 'A 102-story skycraper located in Midtown Manhattan', 'Empire State Building');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:11.419 +06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] ON;
INSERT INTO [PointsOfInterest] ([Id], [CityId], [Description], [Name])
VALUES (2, 1, 'A 102-story skycraper located in Midtown Manhattan', 'Empire State Building');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CityId', N'Description', N'Name') AND [object_id] = OBJECT_ID(N'[PointsOfInterest]'))
    SET IDENTITY_INSERT [PointsOfInterest] OFF;
2023-12-28 16:08:11.420 +06:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-12-28 16:08:12.815 +06:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (1395ms).
2023-12-28 16:08:12.815 +06:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (1395ms).
2023-12-28 16:08:12.815 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231219061241_testundo', N'8.0.0');
2023-12-28 16:08:12.816 +06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20231219061241_testundo', N'8.0.0');
2023-12-28 16:08:12.816 +06:00 [DBG] Committing transaction.
2023-12-28 16:08:12.821 +06:00 [DBG] Committed transaction.
2023-12-28 16:08:12.821 +06:00 [DBG] Disposing transaction.
2023-12-28 16:08:12.821 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:12.821 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2023-12-28 16:08:12.821 +06:00 [INF] Applying migration '20231228100725_initial-migration'.
2023-12-28 16:08:12.829 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:08:12.830 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:08:12.830 +06:00 [DBG] Disposed connection to database '' on server '' (0ms).
2023-12-28 16:10:33.208 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-12-28 16:10:33.297 +06:00 [DBG] Hosting starting
2023-12-28 16:10:33.457 +06:00 [INF] Now listening on: https://localhost:7156
2023-12-28 16:10:33.458 +06:00 [INF] Now listening on: http://localhost:5062
2023-12-28 16:10:33.459 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-12-28 16:10:33.460 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-12-28 16:10:33.461 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-12-28 16:10:33.462 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2023-12-28 16:10:33.464 +06:00 [INF] Hosting environment: Development
2023-12-28 16:10:33.465 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2023-12-28 16:10:33.466 +06:00 [DBG] Hosting started
2023-12-28 16:10:42.974 +06:00 [DBG] Connection id "0HN07HL047S84" accepted.
2023-12-28 16:10:42.978 +06:00 [DBG] Connection id "0HN07HL047S84" started.
2023-12-28 16:10:43.012 +06:00 [DBG] Connection 0HN07HL047S84 established using the following protocol: "Tls13"
2023-12-28 16:10:43.038 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2023-12-28 16:10:43.106 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-12-28 16:10:43.149 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-12-28 16:10:43.169 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-12-28 16:10:43.172 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 136.1206ms
2023-12-28 16:10:43.178 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2023-12-28 16:10:43.178 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2023-12-28 16:10:43.200 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 21.7438ms
2023-12-28 16:10:43.219 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.7453ms
2023-12-28 16:10:43.322 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2023-12-28 16:10:43.413 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 91.5292ms
2023-12-28 16:10:53.883 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/1?includePointsOfInterest=false - null null
2023-12-28 16:10:53.890 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:10:53.903 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-12-28 16:10:53.907 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-12-28 16:10:53.910 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:10:53.913 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:10:53.927 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:10:53.930 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:10:53.932 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:10:53.936 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:10:53.938 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:10:53.940 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:10:53.942 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:10:54.007 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:10:54.087 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:10:54.092 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-12-28 16:10:54.094 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-12-28 16:10:54.096 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:10:54.098 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:10:54.100 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-12-28 16:10:54.104 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-12-28 16:10:54.106 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:10:54.108 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name 'includePointsOfInterest' in request data ...
2023-12-28 16:10:54.110 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:10:54.112 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:10:54.114 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:10:54.116 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:10:54.441 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:10:54.479 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-12-28 16:10:54.583 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:10:54.606 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:10:54.618 +06:00 [DBG] Created DbConnection. (9ms).
2023-12-28 16:10:54.621 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:10:54.802 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:10:54.806 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:10:54.811 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:10:54.816 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2023-12-28 16:10:54.823 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:10:54.907 +06:00 [INF] Executed DbCommand (86ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:10:54.942 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:10:54.957 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:10:54.963 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 50ms reading results.
2023-12-28 16:10:54.967 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:10:54.972 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2023-12-28 16:10:54.981 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:10:54.987 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:10:54.989 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 16:10:54.990 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 16:10:54.991 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 16:10:54.992 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-12-28 16:10:55.039 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 1094.6414ms
2023-12-28 16:10:55.042 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:10:55.045 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:10:55.050 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:10:55.053 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2023-12-28 16:10:55.056 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/1?includePointsOfInterest=false - 200 75 application/json; charset=utf-8 1173.7767ms
2023-12-28 16:11:11.034 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities?pageNumber=1&pageSize=10 - null null
2023-12-28 16:11:11.037 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:11:11.040 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:11:11.042 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:11:11.044 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:11:11.046 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:11:11.050 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:11:11.052 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:11:11.054 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:11:11.056 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:11:11.058 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:11:11.060 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:11:11.062 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:11:11.064 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:11:11.066 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:11:11.068 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:11:11.070 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:11:11.072 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:11:11.073 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:11:11.075 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:11:11.077 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:11:11.079 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:11:11.081 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:11:11.082 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:11.084 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:11.086 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:11.087 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:11:11.088 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:11.094 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:11:11.095 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-12-28 16:11:11.096 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:11:11.097 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:11:11.098 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:11:11.101 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:11:11.103 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:11:11.105 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-12-28 16:11:11.108 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:11:11.110 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:11:11.111 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:11:11.113 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:11:11.123 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:11:11.126 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-12-28 16:11:11.147 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:11:11.153 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:11:11.156 +06:00 [DBG] Created DbConnection. (2ms).
2023-12-28 16:11:11.157 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.159 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.161 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:11:11.162 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:11:11.163 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:11:11.165 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:11:11.171 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:11:11.177 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.178 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2023-12-28 16:11:11.180 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.181 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:11:11.186 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-12-28 16:11:11.191 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-12-28 16:11:11.194 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.195 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.197 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:11:11.198 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-12-28 16:11:11.200 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:11:11.203 +06:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:11:11.214 +06:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:11:11.217 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.219 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2023-12-28 16:11:11.238 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:306,State:2,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:306,State:2,Class:16
2023-12-28 16:11:11.314 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 252.3572ms
2023-12-28 16:11:11.316 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:11:11.319 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method46(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:306,State:2,Class:16
2023-12-28 16:11:11.344 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:11:11.345 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:11.347 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:11:11.349 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities?pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 315.6199ms
2023-12-28 16:11:47.970 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities?name=New%20York%20City&pageNumber=1&pageSize=10 - null null
2023-12-28 16:11:47.976 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:11:47.978 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:11:47.980 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:11:47.982 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:11:47.983 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:11:47.985 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:11:47.988 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:11:47.989 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:11:47.991 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:11:47.993 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:11:47.994 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:11:47.996 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:11:47.999 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:11:48.002 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:11:48.004 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2023-12-28 16:11:48.005 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:11:48.006 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:11:48.008 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:11:48.009 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:11:48.011 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:11:48.012 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:11:48.014 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:48.015 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:48.019 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:48.020 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:11:48.021 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:11:48.022 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:11:48.023 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name 'pageNumber' in request data ...
2023-12-28 16:11:48.025 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:11:48.027 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:11:48.028 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:11:48.030 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:11:48.031 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:11:48.032 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name 'pageSize' in request data ...
2023-12-28 16:11:48.035 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:11:48.037 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:11:48.038 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:11:48.039 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:11:48.077 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:11:48.080 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Name == __name_0)
    .Count()'
2023-12-28 16:11:48.084 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c
            WHERE c.Name == @__name_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:11:48.086 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:11:48.087 +06:00 [DBG] Created DbConnection. (0ms).
2023-12-28 16:11:48.088 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:48.090 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:48.091 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:11:48.092 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:11:48.094 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:11:48.095 +06:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
WHERE [c].[Name] = @__name_0
2023-12-28 16:11:48.104 +06:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
WHERE [c].[Name] = @__name_0
2023-12-28 16:11:48.106 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:48.108 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:11:48.110 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The data types text and nvarchar are incompatible in the equal to operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:402,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The data types text and nvarchar are incompatible in the equal to operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:402,State:1,Class:16
2023-12-28 16:11:48.166 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 169.7591ms
2023-12-28 16:11:48.169 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:11:48.170 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The data types text and nvarchar are incompatible in the equal to operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 39
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method46(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:402,State:1,Class:16
2023-12-28 16:11:48.181 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:11:48.184 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:11:48.185 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:11:48.188 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities?name=New%20York%20City&pageNumber=1&pageSize=10 - 500 null text/plain; charset=utf-8 217.5912ms
2023-12-28 16:12:14.474 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/{cityID}/pointsofinterest - null null
2023-12-28 16:12:14.479 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:12:14.480 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2023-12-28 16:12:14.481 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2023-12-28 16:12:14.483 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-12-28 16:12:14.485 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-12-28 16:12:14.488 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:12:14.490 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:12:14.492 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:12:14.494 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:12:14.496 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:12:14.498 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:12:14.500 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:12:14.503 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:12:14.504 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:12:14.505 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:12:14.514 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:12:14.516 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:12:14.517 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:12:14.519 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:12:14.521 +06:00 [DBG] The request has model state errors, returning an error response.
2023-12-28 16:12:14.522 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-12-28 16:12:14.524 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:12:14.528 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-12-28 16:12:14.531 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-12-28 16:12:14.533 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2023-12-28 16:12:14.537 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 36.3647ms
2023-12-28 16:12:14.538 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-12-28 16:12:14.540 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 66.4574ms
2023-12-28 16:12:57.708 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/{cityID}/pointsofinterest/1 - null null
2023-12-28 16:12:57.715 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:12:57.717 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest/1'
2023-12-28 16:12:57.718 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/{cityID}/pointsofinterest/1'
2023-12-28 16:12:57.720 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:12:57.722 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:12:57.726 +06:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:12:57.729 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:12:57.731 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:12:57.733 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:12:57.737 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:12:57.740 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:12:57.742 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:12:57.744 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:12:57.746 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:12:57.747 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:12:57.749 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:12:57.750 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:12:57.753 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:12:57.754 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:12:57.755 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:12:57.756 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' using the name 'pointofinterestid' in request data ...
2023-12-28 16:12:57.758 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:12:57.759 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:12:57.760 +06:00 [DBG] Attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:12:57.761 +06:00 [DBG] Done attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:12:57.762 +06:00 [DBG] The request has model state errors, returning an error response.
2023-12-28 16:12:57.763 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-12-28 16:12:57.764 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:12:57.767 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-12-28 16:12:57.771 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-12-28 16:12:57.773 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2023-12-28 16:12:57.775 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 33.6301ms
2023-12-28 16:12:57.777 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:12:57.778 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/{cityID}/pointsofinterest/1 - 406 0 null 70.7641ms
2023-12-28 16:13:46.170 +06:00 [DBG] Connection id "0HN07HL047S85" accepted.
2023-12-28 16:13:46.172 +06:00 [DBG] Connection id "0HN07HL047S85" received FIN.
2023-12-28 16:13:46.175 +06:00 [DBG] Connection id "0HN07HL047S85" started.
2023-12-28 16:13:46.179 +06:00 [DBG] Connection id "0HN07HL047S87" accepted.
2023-12-28 16:13:46.184 +06:00 [DBG] Connection id "0HN07HL047S87" started.
2023-12-28 16:13:46.184 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-12-28 16:13:46.188 +06:00 [DBG] Connection 0HN07HL047S87 established using the following protocol: "Tls13"
2023-12-28 16:13:46.191 +06:00 [DBG] Connection id "0HN07HL047S85" stopped.
2023-12-28 16:13:46.192 +06:00 [DBG] Connection id "0HN07HL047S85" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 16:13:46.193 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/3/pointsofinterest/7 - null null
2023-12-28 16:13:46.196 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:13:46.197 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/3/pointsofinterest/7'
2023-12-28 16:13:46.198 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/3/pointsofinterest/7'
2023-12-28 16:13:46.199 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:13:46.200 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:13:46.201 +06:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:13:46.203 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:13:46.204 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:13:46.205 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:13:46.207 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:13:46.209 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:13:46.211 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:13:46.212 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:13:46.214 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:13:46.215 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:13:46.217 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:13:46.218 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:13:46.219 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:13:46.220 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:13:46.222 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:13:46.225 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' using the name 'pointofinterestid' in request data ...
2023-12-28 16:13:46.227 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:13:46.229 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:13:46.230 +06:00 [DBG] Attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:13:46.231 +06:00 [DBG] Done attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:13:46.234 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:13:46.237 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2023-12-28 16:13:46.243 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:13:46.250 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:13:46.251 +06:00 [DBG] Created DbConnection. (1ms).
2023-12-28 16:13:46.252 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.253 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.255 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:13:46.257 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:13:46.258 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:13:46.260 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:13:46.266 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:13:46.269 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.270 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2023-12-28 16:13:46.272 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.274 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2023-12-28 16:13:46.277 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2023-12-28 16:13:46.281 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:13:46.284 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.286 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.287 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:13:46.290 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:13:46.291 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:13:46.292 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2023-12-28 16:13:46.300 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2023-12-28 16:13:46.303 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.306 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2023-12-28 16:13:46.309 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.310 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:13:46.313 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:13:46.315 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:13:46.317 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-12-28 16:13:46.319 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-12-28 16:13:46.321 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-12-28 16:13:46.330 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 119.8163ms
2023-12-28 16:13:46.334 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:13:46.336 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:13:46.337 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:13:46.339 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:46.340 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:13:46.342 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/3/pointsofinterest/7 - 404 162 application/problem+json; charset=utf-8 148.9219ms
2023-12-28 16:13:58.724 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/1/pointsofinterest/1 - null null
2023-12-28 16:13:58.729 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:13:58.731 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/1'
2023-12-28 16:13:58.732 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/1/pointsofinterest/1'
2023-12-28 16:13:58.734 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:13:58.736 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:13:58.738 +06:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:13:58.739 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:13:58.741 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:13:58.742 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:13:58.745 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:13:58.747 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:13:58.749 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:13:58.751 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:13:58.752 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:13:58.753 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:13:58.754 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:13:58.755 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:13:58.756 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:13:58.758 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:13:58.763 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:13:58.765 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' using the name 'pointofinterestid' in request data ...
2023-12-28 16:13:58.766 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:13:58.768 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:13:58.769 +06:00 [DBG] Attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:13:58.770 +06:00 [DBG] Done attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:13:58.771 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:13:58.776 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:13:58.777 +06:00 [DBG] Created DbConnection. (0ms).
2023-12-28 16:13:58.779 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.781 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.782 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:13:58.783 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-12-28 16:13:58.785 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:13:58.786 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:13:58.789 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:13:58.792 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.793 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2023-12-28 16:13:58.795 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.796 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:13:58.798 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.799 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.800 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:13:58.802 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:13:58.803 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:13:58.804 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2023-12-28 16:13:58.807 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2023-12-28 16:13:58.811 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:13:58.816 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.818 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 9ms reading results.
2023-12-28 16:13:58.820 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.822 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:13:58.824 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:13:58.827 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:13:58.829 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 16:13:58.830 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 16:13:58.832 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 16:13:58.833 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2023-12-28 16:13:58.835 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 86.5423ms
2023-12-28 16:13:58.838 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:13:58.840 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:13:58.842 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:13:58.843 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:13:58.846 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-12-28 16:13:58.847 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/1/pointsofinterest/1 - 200 95 application/json; charset=utf-8 123.118ms
2023-12-28 16:14:16.631 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities - null null
2023-12-28 16:14:16.635 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:14:16.636 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:14:16.638 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:14:16.639 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:14:16.641 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:14:16.643 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:14:16.645 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:14:16.647 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:14:16.649 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:14:16.650 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:14:16.652 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:14:16.654 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:14:16.655 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:14:16.657 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:14:16.658 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:14:16.660 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:14:16.662 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:14:16.664 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:14:16.665 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:14:16.666 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:14:16.668 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:14:16.669 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:14:16.671 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:14:16.672 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:14:16.674 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:14:16.675 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:14:16.676 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:14:16.679 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:14:16.680 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:14:16.682 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:14:16.684 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:14:16.685 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:14:16.687 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:14:16.688 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:14:16.691 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:14:16.693 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:14:16.695 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:14:16.697 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:14:16.697 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:14:16.698 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:14:16.700 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:14:16.702 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:14:16.704 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:14:16.704 +06:00 [DBG] Created DbConnection. (0ms).
2023-12-28 16:14:16.705 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.707 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.709 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:14:16.710 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:14:16.712 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:14:16.714 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:14:16.717 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:14:16.719 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.720 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2023-12-28 16:14:16.722 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.724 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:14:16.726 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.728 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.730 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:14:16.731 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:14:16.732 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:14:16.733 +06:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:14:16.737 +06:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:14:16.739 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.740 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:14:16.743 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:306,State:2,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:306,State:2,Class:16
2023-12-28 16:14:16.798 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 144.4608ms
2023-12-28 16:14:16.800 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:14:16.801 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method46(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:306,State:2,Class:16
2023-12-28 16:14:16.812 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:14:16.813 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:14:16.815 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:16.817 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:14:16.818 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 187.0612ms
2023-12-28 16:14:34.584 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/1 - null null
2023-12-28 16:14:34.588 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:14:34.589 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-12-28 16:14:34.591 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-12-28 16:14:34.593 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:14:34.594 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:14:34.595 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:14:34.597 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:14:34.599 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:14:34.600 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:14:34.602 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:14:34.603 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:14:34.605 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:14:34.606 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:14:34.608 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-12-28 16:14:34.609 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-12-28 16:14:34.611 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:14:34.612 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:14:34.614 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-12-28 16:14:34.615 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-12-28 16:14:34.617 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:14:34.618 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-12-28 16:14:34.619 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:14:34.620 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:14:34.622 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:14:34.623 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:14:34.624 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:14:34.626 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:14:34.629 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:14:34.630 +06:00 [DBG] Created DbConnection. (0ms).
2023-12-28 16:14:34.631 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:34.632 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:34.633 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:14:34.635 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:14:34.636 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:14:34.637 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:14:34.641 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:14:34.644 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:14:34.645 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:34.647 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2023-12-28 16:14:34.648 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:34.650 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:14:34.652 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:14:34.654 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:14:34.655 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 16:14:34.655 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 16:14:34.656 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 16:14:34.657 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-12-28 16:14:34.659 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 54.2968ms
2023-12-28 16:14:34.660 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:14:34.661 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:14:34.663 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:14:34.664 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:34.665 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:14:34.666 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/1 - 200 75 application/json; charset=utf-8 82.412ms
2023-12-28 16:14:47.544 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/5/pointsofinterest/1 - null null
2023-12-28 16:14:47.546 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:14:47.549 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/5/pointsofinterest/1'
2023-12-28 16:14:47.551 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/5/pointsofinterest/1'
2023-12-28 16:14:47.552 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:14:47.553 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:14:47.554 +06:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:14:47.556 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:14:47.558 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:14:47.559 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:14:47.561 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:14:47.562 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:14:47.563 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:14:47.565 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:14:47.567 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:14:47.569 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:14:47.571 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:14:47.572 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:14:47.573 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:14:47.574 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:14:47.575 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:14:47.577 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' using the name 'pointofinterestid' in request data ...
2023-12-28 16:14:47.579 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:14:47.580 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:14:47.582 +06:00 [DBG] Attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32' ...
2023-12-28 16:14:47.584 +06:00 [DBG] Done attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32'.
2023-12-28 16:14:47.587 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:14:47.589 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:14:47.590 +06:00 [DBG] Created DbConnection. (0ms).
2023-12-28 16:14:47.591 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:47.593 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:47.595 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:14:47.596 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:14:47.598 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:14:47.599 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:14:47.605 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:14:47.608 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:47.609 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2023-12-28 16:14:47.611 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:47.612 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:14:47.613 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:14:47.618 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:14:47.619 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-12-28 16:14:47.622 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-12-28 16:14:47.623 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2023-12-28 16:14:47.624 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 60.6758ms
2023-12-28 16:14:47.626 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2023-12-28 16:14:47.627 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:14:47.628 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:14:47.628 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:47.629 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:14:47.631 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/5/pointsofinterest/1 - 404 162 application/problem+json; charset=utf-8 86.7689ms
2023-12-28 16:14:58.661 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/1/pointsofinterest/ - null null
2023-12-28 16:14:58.663 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:14:58.665 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1/pointsofinterest/'
2023-12-28 16:14:58.666 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/1/pointsofinterest/'
2023-12-28 16:14:58.668 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-12-28 16:14:58.670 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-12-28 16:14:58.671 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:14:58.674 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:14:58.677 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:14:58.678 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:14:58.681 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:14:58.683 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:14:58.684 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:14:58.686 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:14:58.688 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:14:58.690 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:14:58.692 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:14:58.694 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:14:58.695 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:14:58.697 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:14:58.701 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:14:58.704 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:14:58.706 +06:00 [DBG] Created DbConnection. (1ms).
2023-12-28 16:14:58.707 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.709 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.711 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:14:58.712 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:14:58.714 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:14:58.715 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:14:58.719 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-12-28 16:14:58.722 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.724 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2023-12-28 16:14:58.726 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.728 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:14:58.735 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2023-12-28 16:14:58.738 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3] }
        SELECT p.Id, p.CityId, p.Description, p.Name
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-12-28 16:14:58.742 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.743 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.745 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:14:58.746 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-12-28 16:14:58.747 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:14:58.748 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2023-12-28 16:14:58.753 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2023-12-28 16:14:58.757 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:14:58.759 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:14:58.761 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.763 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 6ms reading results.
2023-12-28 16:14:58.765 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.767 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:14:58.774 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:14:58.779 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:14:58.780 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 16:14:58.781 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 16:14:58.781 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 16:14:58.783 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-12-28 16:14:58.789 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 104.8226ms
2023-12-28 16:14:58.792 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2023-12-28 16:14:58.793 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:14:58.795 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:14:58.796 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:14:58.797 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:14:58.798 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/1/pointsofinterest/ - 200 204 application/json; charset=utf-8 137.0347ms
2023-12-28 16:15:21.191 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities?name=Antwerp - null null
2023-12-28 16:15:21.197 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:15:21.198 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:15:21.199 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:15:21.202 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:15:21.203 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:15:21.204 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:15:21.206 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:15:21.208 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:15:21.209 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:15:21.211 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:15:21.212 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:15:21.214 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:15:21.215 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:15:21.216 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:15:21.219 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name 'name' in request data ...
2023-12-28 16:15:21.221 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:15:21.223 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:15:21.224 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:15:21.225 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:15:21.226 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:15:21.228 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:15:21.229 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:15:21.231 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:15:21.232 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:15:21.233 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:15:21.234 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:15:21.236 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:15:21.237 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:15:21.239 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:15:21.241 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:15:21.242 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:15:21.244 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:15:21.245 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:15:21.246 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:15:21.248 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:15:21.250 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:15:21.251 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:15:21.253 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:15:21.254 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:15:21.256 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:15:21.258 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:15:21.260 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:15:21.261 +06:00 [DBG] Created DbConnection. (1ms).
2023-12-28 16:15:21.263 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:15:21.264 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:15:21.266 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:15:21.269 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:15:21.270 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-12-28 16:15:21.272 +06:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
WHERE [c].[Name] = @__name_0
2023-12-28 16:15:21.275 +06:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
WHERE [c].[Name] = @__name_0
2023-12-28 16:15:21.278 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:15:21.279 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:15:21.281 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The data types text and nvarchar are incompatible in the equal to operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:402,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The data types text and nvarchar are incompatible in the equal to operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:402,State:1,Class:16
2023-12-28 16:15:21.327 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 113.0784ms
2023-12-28 16:15:21.329 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:15:21.330 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The data types text and nvarchar are incompatible in the equal to operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 39
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method46(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:402,State:1,Class:16
2023-12-28 16:15:21.341 +06:00 [DBG] Connection id "0HN07HL047S87" completed keep alive response.
2023-12-28 16:15:21.343 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:15:21.344 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:15:21.347 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-12-28 16:15:21.348 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities?name=Antwerp - 500 null text/plain; charset=utf-8 157.2249ms
2023-12-28 16:18:07.046 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - application/json-patch+json 81
2023-12-28 16:18:07.052 +06:00 [DBG] POST requests are not supported
2023-12-28 16:18:07.054 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2023-12-28 16:18:07.056 +06:00 [INF] CORS policy execution successful.
2023-12-28 16:18:07.058 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/{cityID}/pointsofinterest'
2023-12-28 16:18:07.059 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/{cityID}/pointsofinterest'
2023-12-28 16:18:07.060 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-12-28 16:18:07.061 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-12-28 16:18:07.064 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2023-12-28 16:18:07.066 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:18:07.067 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:18:07.069 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:18:07.071 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:18:07.074 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:18:07.075 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:18:07.077 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2023-12-28 16:18:07.078 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:18:07.079 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2023-12-28 16:18:07.081 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:18:07.083 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:18:07.084 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2023-12-28 16:18:07.086 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2023-12-28 16:18:07.089 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-12-28 16:18:07.092 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2023-12-28 16:18:07.094 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-12-28 16:18:07.096 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-12-28 16:18:07.100 +06:00 [DBG] Connection id "0HN07HL047S84", Request id "0HN07HL047S84:00000013": started reading request body.
2023-12-28 16:18:07.101 +06:00 [DBG] Connection id "0HN07HL047S84", Request id "0HN07HL047S84:00000013": done reading request body.
2023-12-28 16:18:07.120 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-12-28 16:18:07.123 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-12-28 16:18:07.125 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2023-12-28 16:18:07.130 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2023-12-28 16:18:07.131 +06:00 [DBG] The request has model state errors, returning an error response.
2023-12-28 16:18:07.132 +06:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-12-28 16:18:07.133 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:18:07.136 +06:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-12-28 16:18:07.141 +06:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-12-28 16:18:07.142 +06:00 [WRN] No output formatter was found for content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]' to write the response.
2023-12-28 16:18:07.144 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 68.8563ms
2023-12-28 16:18:07.146 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2023-12-28 16:18:07.147 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/{cityID}/pointsofinterest - 406 0 null 101.7003ms
2023-12-28 16:18:47.913 +06:00 [DBG] Connection id "0HN07HL047S84" received FIN.
2023-12-28 16:18:47.917 +06:00 [DBG] Connection id "0HN07HL047S84" is closed. The last processed stream ID was 19.
2023-12-28 16:31:55.582 +06:00 [DBG] Connection id "0HN07HL047S84" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 16:31:55.585 +06:00 [DBG] The connection queue processing loop for 0HN07HL047S84 completed.
2023-12-28 16:31:55.592 +06:00 [DBG] Connection id "0HN07HL047S84" stopped.
2023-12-28 16:32:42.505 +06:00 [DBG] Connection id "0HN07HL047S88" accepted.
2023-12-28 16:32:42.511 +06:00 [DBG] Connection id "0HN07HL047S88" started.
2023-12-28 16:32:42.515 +06:00 [DBG] Connection 0HN07HL047S88 established using the following protocol: "Tls13"
2023-12-28 16:32:42.520 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json-patch+json 74
2023-12-28 16:32:42.523 +06:00 [DBG] POST requests are not supported
2023-12-28 16:32:42.524 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2023-12-28 16:32:42.526 +06:00 [INF] CORS policy execution successful.
2023-12-28 16:32:42.527 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:32:42.528 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:32:42.530 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2023-12-28 16:32:42.532 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2023-12-28 16:32:42.536 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:32:42.538 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:32:42.540 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:32:42.542 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:32:42.544 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:32:42.546 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:32:42.548 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:32:42.549 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:32:42.551 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2023-12-28 16:32:42.553 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2023-12-28 16:32:42.555 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-12-28 16:32:42.557 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-12-28 16:32:42.559 +06:00 [DBG] Connection id "0HN07HL047S88", Request id "0HN07HL047S88:00000001": started reading request body.
2023-12-28 16:32:42.561 +06:00 [DBG] Connection id "0HN07HL047S88", Request id "0HN07HL047S88:00000001": done reading request body.
2023-12-28 16:32:42.564 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2023-12-28 16:32:42.565 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2023-12-28 16:32:42.566 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2023-12-28 16:32:42.568 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2023-12-28 16:32:42.573 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:32:42.592 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:32:42.602 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:32:42.607 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-12-28 16:32:42.613 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-12-28 16:32:42.620 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-12-28 16:32:42.676 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:32:42.678 +06:00 [DBG] Created DbConnection. (2ms).
2023-12-28 16:32:42.680 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:32:42.682 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:32:42.686 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:32:42.687 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:32:42.689 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:32:42.691 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-12-28 16:32:42.706 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-12-28 16:32:42.715 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:32:42.717 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 8ms reading results.
2023-12-28 16:32:42.720 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:32:42.722 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:32:42.729 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'CityInfo.dbo.Cities'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'CityInfo.dbo.Cities'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-12-28 16:32:42.810 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 262.5029ms
2023-12-28 16:32:42.813 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2023-12-28 16:32:42.815 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'CityInfo.dbo.Cities'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cfc7d36c-3f55-4d04-ad0a-26c2bf195050
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.AddCityAsync(City city) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 94
   at CityInfo.API.Controllers.CitiesController.CreateCity(CityForCreationDto request) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 72
   at lambda_method121(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-12-28 16:32:42.832 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:32:42.837 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:32:42.838 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:32:42.841 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 320.386ms
2023-12-28 16:35:45.474 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-12-28 16:35:45.555 +06:00 [DBG] Hosting starting
2023-12-28 16:35:45.746 +06:00 [INF] Now listening on: https://localhost:7156
2023-12-28 16:35:45.747 +06:00 [INF] Now listening on: http://localhost:5062
2023-12-28 16:35:45.748 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-12-28 16:35:45.749 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-12-28 16:35:45.749 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-12-28 16:35:45.750 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2023-12-28 16:35:45.751 +06:00 [INF] Hosting environment: Development
2023-12-28 16:35:45.753 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2023-12-28 16:35:45.755 +06:00 [DBG] Hosting started
2023-12-28 16:35:51.855 +06:00 [DBG] Connection id "0HN07I31Q1O3Q" received FIN.
2023-12-28 16:35:51.860 +06:00 [DBG] Connection id "0HN07I31Q1O3Q" accepted.
2023-12-28 16:35:51.862 +06:00 [DBG] Connection id "0HN07I31Q1O3Q" started.
2023-12-28 16:35:51.863 +06:00 [DBG] Connection id "0HN07I31Q1O3R" accepted.
2023-12-28 16:35:51.867 +06:00 [DBG] Connection id "0HN07I31Q1O3R" started.
2023-12-28 16:35:51.881 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-12-28 16:35:51.917 +06:00 [DBG] Connection id "0HN07I31Q1O3Q" stopped.
2023-12-28 16:35:51.924 +06:00 [DBG] Connection id "0HN07I31Q1O3Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 16:35:51.930 +06:00 [DBG] Connection 0HN07I31Q1O3R established using the following protocol: "Tls13"
2023-12-28 16:35:51.964 +06:00 [INF] Request starting HTTP/1.1 POST https://localhost:7156/api/cities/ - application/json 99
2023-12-28 16:35:51.976 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-12-28 16:35:51.997 +06:00 [DBG] POST requests are not supported
2023-12-28 16:35:52.025 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/'
2023-12-28 16:35:52.032 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities/'
2023-12-28 16:35:52.036 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2023-12-28 16:35:52.041 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2023-12-28 16:35:52.072 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:35:52.079 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:35:52.082 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:35:52.084 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:35:52.087 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:35:52.090 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:35:52.093 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:35:52.228 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:35:52.453 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:35:52.461 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2023-12-28 16:35:52.465 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2023-12-28 16:35:52.468 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2023-12-28 16:35:52.470 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2023-12-28 16:35:52.479 +06:00 [DBG] Connection id "0HN07I31Q1O3R", Request id "0HN07I31Q1O3R:00000001": started reading request body.
2023-12-28 16:35:52.480 +06:00 [DBG] Connection id "0HN07I31Q1O3R", Request id "0HN07I31Q1O3R:00000001": done reading request body.
2023-12-28 16:35:52.593 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2023-12-28 16:35:52.594 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2023-12-28 16:35:52.596 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2023-12-28 16:35:52.604 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2023-12-28 16:35:53.366 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:35:53.416 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:35:53.491 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:35:53.497 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2023-12-28 16:35:53.504 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2023-12-28 16:35:53.518 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2023-12-28 16:35:53.620 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:35:53.656 +06:00 [DBG] Created DbConnection. (33ms).
2023-12-28 16:35:53.663 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:35:53.949 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:35:53.963 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:35:53.972 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2023-12-28 16:35:53.984 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2023-12-28 16:35:53.996 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-12-28 16:35:54.085 +06:00 [INF] Executed DbCommand (90ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-12-28 16:35:54.114 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:35:54.127 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 29ms reading results.
2023-12-28 16:35:54.135 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:35:54.144 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (9ms).
2023-12-28 16:35:54.159 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'CityInfo.dbo.Cities'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cc97367f-6dff-4291-88ea-179802fdb54c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'CityInfo.dbo.Cities'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cc97367f-6dff-4291-88ea-179802fdb54c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-12-28 16:35:54.245 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 2149.9189ms
2023-12-28 16:35:54.250 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2023-12-28 16:35:54.256 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Id', table 'CityInfo.dbo.Cities'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cc97367f-6dff-4291-88ea-179802fdb54c
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.AddCityAsync(City city) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 94
   at CityInfo.API.Controllers.CitiesController.CreateCity(CityForCreationDto request) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 72
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-12-28 16:35:54.293 +06:00 [DBG] Connection id "0HN07I31Q1O3R" completed keep alive response.
2023-12-28 16:35:54.297 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:35:54.303 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:35:54.306 +06:00 [DBG] Disposed connection to database '' on server '' (4ms).
2023-12-28 16:35:54.311 +06:00 [INF] Request finished HTTP/1.1 POST https://localhost:7156/api/cities/ - 500 null text/plain; charset=utf-8 2351.4684ms
2023-12-28 16:39:03.061 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-12-28 16:39:03.204 +06:00 [DBG] Hosting starting
2023-12-28 16:39:03.380 +06:00 [INF] Now listening on: https://localhost:7156
2023-12-28 16:39:03.381 +06:00 [INF] Now listening on: http://localhost:5062
2023-12-28 16:39:03.382 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-12-28 16:39:03.383 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-12-28 16:39:03.384 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-12-28 16:39:03.385 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2023-12-28 16:39:03.386 +06:00 [INF] Hosting environment: Development
2023-12-28 16:39:03.388 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2023-12-28 16:39:03.389 +06:00 [DBG] Hosting started
2023-12-28 16:39:08.041 +06:00 [DBG] Connection id "0HN07I4S90QVE" received FIN.
2023-12-28 16:39:08.045 +06:00 [DBG] Connection id "0HN07I4S90QVE" accepted.
2023-12-28 16:39:08.047 +06:00 [DBG] Connection id "0HN07I4S90QVE" started.
2023-12-28 16:39:08.049 +06:00 [DBG] Connection id "0HN07I4S90QVF" accepted.
2023-12-28 16:39:08.050 +06:00 [DBG] Connection id "0HN07I4S90QVF" started.
2023-12-28 16:39:08.058 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-12-28 16:39:08.087 +06:00 [DBG] Connection id "0HN07I4S90QVE" stopped.
2023-12-28 16:39:08.091 +06:00 [DBG] Connection id "0HN07I4S90QVE" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 16:39:08.093 +06:00 [DBG] Connection 0HN07I4S90QVF established using the following protocol: "Tls13"
2023-12-28 16:39:08.112 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities - null null
2023-12-28 16:39:08.119 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-12-28 16:39:08.128 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:39:08.141 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:39:08.145 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:39:08.149 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:39:08.152 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:39:08.168 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:39:08.171 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:39:08.174 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:39:08.176 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:39:08.179 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:39:08.180 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:39:08.183 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:39:08.262 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:39:08.349 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:39:08.353 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:39:08.355 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:39:08.358 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:39:08.360 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:39:08.362 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:39:08.364 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:39:08.367 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:39:08.370 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:39:08.371 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:39:08.373 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:39:08.375 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:39:08.377 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:39:08.379 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:39:08.381 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:39:08.382 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:39:08.383 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:39:08.385 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:39:08.387 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:39:08.389 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:39:08.391 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:39:08.392 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:39:08.394 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:39:08.396 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:39:08.398 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:39:08.400 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:39:08.401 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:39:08.403 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:39:08.405 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:39:08.752 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:39:08.789 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-12-28 16:39:08.887 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:39:08.907 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:39:08.923 +06:00 [DBG] Created DbConnection. (14ms).
2023-12-28 16:39:08.930 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.115 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.119 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:39:09.125 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:39:09.127 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2023-12-28 16:39:09.133 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:39:09.169 +06:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:39:09.181 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.186 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 12ms reading results.
2023-12-28 16:39:09.190 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.197 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (7ms).
2023-12-28 16:39:09.203 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-12-28 16:39:09.235 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-12-28 16:39:09.240 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.242 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.245 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:39:09.246 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:39:09.249 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-12-28 16:39:09.252 +06:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:39:09.273 +06:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:39:09.276 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.278 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:39:09.286 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:46cf29ea-c20f-4d60-b9c9-b17d68db43c8
Error Number:306,State:2,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:46cf29ea-c20f-4d60-b9c9-b17d68db43c8
Error Number:306,State:2,Class:16
2023-12-28 16:39:09.353 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1169.3802ms
2023-12-28 16:39:09.357 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:39:09.360 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:46cf29ea-c20f-4d60-b9c9-b17d68db43c8
Error Number:306,State:2,Class:16
2023-12-28 16:39:09.415 +06:00 [DBG] Connection id "0HN07I4S90QVF" completed keep alive response.
2023-12-28 16:39:09.421 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:39:09.429 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:39:09.435 +06:00 [DBG] Disposed connection to database '' on server '' (5ms).
2023-12-28 16:39:09.438 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 1328.0805ms
2023-12-28 16:40:12.773 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/1 - null null
2023-12-28 16:40:12.782 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:40:12.789 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-12-28 16:40:12.791 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-12-28 16:40:12.793 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:40:12.794 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:40:12.801 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:40:12.804 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:40:12.806 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:40:12.808 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:40:12.811 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:40:12.813 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:40:12.816 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:40:12.820 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:40:12.826 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-12-28 16:40:12.829 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-12-28 16:40:12.832 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:40:12.834 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:40:12.837 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-12-28 16:40:12.840 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-12-28 16:40:12.843 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:40:12.846 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-12-28 16:40:12.849 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:40:12.853 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:40:12.856 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:40:12.859 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:40:12.862 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:40:12.895 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:40:12.905 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-12-28 16:40:12.934 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:40:12.948 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:40:12.952 +06:00 [DBG] Created DbConnection. (4ms).
2023-12-28 16:40:12.954 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:40:12.956 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:40:12.959 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:40:12.962 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:40:12.965 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2023-12-28 16:40:12.967 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:40:12.975 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:40:13.020 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:40:13.042 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:40:13.046 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 65ms reading results.
2023-12-28 16:40:13.049 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:40:13.053 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2023-12-28 16:40:13.068 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:40:13.078 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:40:13.079 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 16:40:13.081 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 16:40:13.084 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 16:40:13.087 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-12-28 16:40:13.183 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 367.5892ms
2023-12-28 16:40:13.186 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:40:13.188 +06:00 [DBG] Connection id "0HN07I4S90QVF" completed keep alive response.
2023-12-28 16:40:13.189 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:40:13.191 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:40:13.194 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-12-28 16:40:13.195 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/1 - 200 75 application/json; charset=utf-8 422.2665ms
2023-12-28 16:41:42.054 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities - null null
2023-12-28 16:41:42.060 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:41:42.062 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:41:42.064 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:41:42.066 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:41:42.068 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:41:42.069 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:41:42.071 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:41:42.073 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:41:42.076 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:41:42.079 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:41:42.082 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:41:42.084 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:41:42.088 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:41:42.091 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:41:42.093 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:41:42.095 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:41:42.097 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:41:42.099 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:41:42.101 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:41:42.103 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:41:42.104 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:41:42.106 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:41:42.108 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:41:42.111 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:41:42.113 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:41:42.115 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:41:42.117 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:41:42.118 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:41:42.120 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:41:42.121 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:41:42.123 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:41:42.125 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:41:42.126 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:41:42.128 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:41:42.130 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:41:42.132 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:41:42.134 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:41:42.137 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:41:42.139 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:41:42.140 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:41:42.142 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:41:42.229 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:41:42.236 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:41:42.237 +06:00 [DBG] Created DbConnection. (1ms).
2023-12-28 16:41:42.239 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.241 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.243 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:41:42.245 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:41:42.247 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:41:42.249 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:41:42.253 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:41:42.256 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.257 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2023-12-28 16:41:42.258 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.260 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:41:42.266 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.268 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.270 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:41:42.271 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:41:42.272 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:41:42.274 +06:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:41:42.279 +06:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:41:42.283 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.285 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2023-12-28 16:41:42.289 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:46cf29ea-c20f-4d60-b9c9-b17d68db43c8
Error Number:306,State:2,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:46cf29ea-c20f-4d60-b9c9-b17d68db43c8
Error Number:306,State:2,Class:16
2023-12-28 16:41:42.354 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 270.288ms
2023-12-28 16:41:42.356 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:41:42.359 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:46cf29ea-c20f-4d60-b9c9-b17d68db43c8
Error Number:306,State:2,Class:16
2023-12-28 16:41:42.378 +06:00 [DBG] Connection id "0HN07I4S90QVF" completed keep alive response.
2023-12-28 16:41:42.380 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:41:42.381 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:41:42.383 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:41:42.385 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 353.2279ms
2023-12-28 16:57:34.858 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-12-28 16:57:34.985 +06:00 [DBG] Hosting starting
2023-12-28 16:57:35.193 +06:00 [INF] Now listening on: https://localhost:7156
2023-12-28 16:57:35.195 +06:00 [INF] Now listening on: http://localhost:5062
2023-12-28 16:57:35.196 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-12-28 16:57:35.197 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-12-28 16:57:35.198 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-12-28 16:57:35.200 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2023-12-28 16:57:35.201 +06:00 [INF] Hosting environment: Development
2023-12-28 16:57:35.202 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2023-12-28 16:57:35.203 +06:00 [DBG] Hosting started
2023-12-28 16:57:44.004 +06:00 [DBG] Connection id "0HN07IF8RLOAK" received FIN.
2023-12-28 16:57:44.009 +06:00 [DBG] Connection id "0HN07IF8RLOAK" accepted.
2023-12-28 16:57:44.011 +06:00 [DBG] Connection id "0HN07IF8RLOAK" started.
2023-12-28 16:57:44.012 +06:00 [DBG] Connection id "0HN07IF8RLOAL" accepted.
2023-12-28 16:57:44.020 +06:00 [DBG] Connection id "0HN07IF8RLOAL" started.
2023-12-28 16:57:44.025 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-12-28 16:57:44.049 +06:00 [DBG] Connection id "0HN07IF8RLOAK" stopped.
2023-12-28 16:57:44.053 +06:00 [DBG] Connection id "0HN07IF8RLOAK" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 16:57:44.053 +06:00 [DBG] Connection 0HN07IF8RLOAL established using the following protocol: "Tls13"
2023-12-28 16:57:44.067 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities - null null
2023-12-28 16:57:44.074 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-12-28 16:57:44.088 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:57:44.100 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:57:44.106 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:57:44.108 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:57:44.111 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:57:44.127 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:57:44.130 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:57:44.132 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:57:44.134 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:57:44.138 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:57:44.140 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:57:44.143 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:57:44.211 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 16:57:44.288 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:57:44.292 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:57:44.295 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:57:44.298 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:57:44.301 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:57:44.303 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:57:44.306 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:57:44.310 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:57:44.313 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:57:44.315 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:57:44.316 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:57:44.319 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:57:44.320 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:57:44.322 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:57:44.324 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:57:44.325 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:57:44.327 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:57:44.328 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:57:44.331 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:57:44.332 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:57:44.334 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:57:44.336 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:57:44.338 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:57:44.340 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:57:44.342 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:57:44.343 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:57:44.345 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:57:44.347 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:57:44.348 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:57:44.704 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:57:44.744 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-12-28 16:57:44.839 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:57:44.863 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:57:44.876 +06:00 [DBG] Created DbConnection. (11ms).
2023-12-28 16:57:44.879 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.073 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.077 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:57:45.081 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:57:45.084 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2023-12-28 16:57:45.091 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:57:45.119 +06:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:57:45.131 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.136 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 10ms reading results.
2023-12-28 16:57:45.140 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.144 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2023-12-28 16:57:45.150 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)
    .Skip(__p_0)
    .Take(__p_1)'
2023-12-28 16:57:45.186 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c
        ORDER BY c.Name ASC
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-12-28 16:57:45.193 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.195 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.197 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:57:45.198 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:57:45.203 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2023-12-28 16:57:45.207 +06:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:57:45.229 +06:00 [ERR] Failed executing DbCommand (24ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:57:45.233 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.234 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:57:45.242 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8f315ba9-7a66-4f0f-ae0f-ef1f912be77d
Error Number:306,State:2,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8f315ba9-7a66-4f0f-ae0f-ef1f912be77d
Error Number:306,State:2,Class:16
2023-12-28 16:57:45.304 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1160.9892ms
2023-12-28 16:57:45.307 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:57:45.311 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:8f315ba9-7a66-4f0f-ae0f-ef1f912be77d
Error Number:306,State:2,Class:16
2023-12-28 16:57:45.337 +06:00 [DBG] Connection id "0HN07IF8RLOAL" completed keep alive response.
2023-12-28 16:57:45.340 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:57:45.345 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:45.347 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-12-28 16:57:45.350 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 1285.1514ms
2023-12-28 16:57:55.095 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities/1 - null null
2023-12-28 16:57:55.099 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:57:55.103 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/1'
2023-12-28 16:57:55.105 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/1'
2023-12-28 16:57:55.108 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:57:55.110 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:57:55.115 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:57:55.117 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:57:55.119 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:57:55.121 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:57:55.123 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:57:55.126 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:57:55.128 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:57:55.130 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:57:55.132 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-12-28 16:57:55.133 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-12-28 16:57:55.135 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:57:55.137 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-12-28 16:57:55.139 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-12-28 16:57:55.140 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-12-28 16:57:55.145 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:57:55.147 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2023-12-28 16:57:55.149 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:57:55.150 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:57:55.152 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:57:55.153 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2023-12-28 16:57:55.155 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2023-12-28 16:57:55.165 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:57:55.170 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2023-12-28 16:57:55.181 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
            SELECT TOP(1) c.Id, c.Description, c.Name
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 16:57:55.187 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:57:55.188 +06:00 [DBG] Created DbConnection. (1ms).
2023-12-28 16:57:55.189 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:55.191 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:55.194 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:57:55.196 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:57:55.198 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2023-12-28 16:57:55.199 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:57:55.203 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2023-12-28 16:57:55.222 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 16:57:55.236 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:55.239 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 33ms reading results.
2023-12-28 16:57:55.242 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:55.244 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:57:55.254 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 16:57:55.259 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 16:57:55.260 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 16:57:55.262 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 16:57:55.264 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 16:57:55.266 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2023-12-28 16:57:55.314 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 186.8793ms
2023-12-28 16:57:55.316 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2023-12-28 16:57:55.318 +06:00 [DBG] Connection id "0HN07IF8RLOAL" completed keep alive response.
2023-12-28 16:57:55.319 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:57:55.320 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:57:55.322 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:57:55.323 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities/1 - 200 75 application/json; charset=utf-8 228.6251ms
2023-12-28 16:58:14.669 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities - null null
2023-12-28 16:58:14.673 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 16:58:14.675 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 16:58:14.677 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 16:58:14.679 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:58:14.680 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:58:14.681 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 16:58:14.683 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 16:58:14.685 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 16:58:14.686 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 16:58:14.688 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 16:58:14.690 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 16:58:14.693 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:58:14.696 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 16:58:14.697 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 16:58:14.698 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 16:58:14.700 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 16:58:14.702 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:58:14.704 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 16:58:14.705 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 16:58:14.708 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 16:58:14.709 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:58:14.711 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 16:58:14.716 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:58:14.719 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:58:14.721 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:58:14.722 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 16:58:14.725 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 16:58:14.726 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:58:14.728 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:58:14.729 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:58:14.731 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:58:14.733 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:58:14.734 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 16:58:14.736 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 16:58:14.737 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:58:14.739 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 16:58:14.742 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:58:14.744 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:58:14.745 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:58:14.747 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 16:58:14.749 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 16:59:28.517 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 16:59:28.520 +06:00 [DBG] Creating DbConnection.
2023-12-28 16:59:28.523 +06:00 [DBG] Created DbConnection. (2ms).
2023-12-28 16:59:28.524 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.525 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.528 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:59:28.529 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:59:28.530 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:59:28.532 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:59:28.536 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 16:59:28.539 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.541 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2023-12-28 16:59:28.542 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.544 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:59:28.547 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.548 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.550 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 16:59:28.551 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-12-28 16:59:28.553 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-12-28 16:59:28.555 +06:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:59:28.560 +06:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2023-12-28 16:59:28.562 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.563 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2023-12-28 16:59:28.566 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8f315ba9-7a66-4f0f-ae0f-ef1f912be77d
Error Number:306,State:2,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8f315ba9-7a66-4f0f-ae0f-ef1f912be77d
Error Number:306,State:2,Class:16
2023-12-28 16:59:28.616 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 73923.5812ms
2023-12-28 16:59:28.618 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 16:59:28.620 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): The text, ntext, and image data types cannot be compared or sorted, except when using IS NULL or LIKE operator.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetCitiesAsync(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.CitiesController.GetCities(String name, String searchQuery, Int32 pageNumber, Int32 pageSize) in C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API\Controllers\CitiesController.cs:line 35
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:8f315ba9-7a66-4f0f-ae0f-ef1f912be77d
Error Number:306,State:2,Class:16
2023-12-28 16:59:28.632 +06:00 [DBG] Connection id "0HN07IF8RLOAL" completed keep alive response.
2023-12-28 16:59:28.633 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 16:59:28.635 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 16:59:28.637 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2023-12-28 16:59:28.638 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 73969.1543ms
2023-12-28 17:01:08.796 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-12-28 17:01:08.857 +06:00 [DBG] Hosting starting
2023-12-28 17:01:08.988 +06:00 [INF] Now listening on: https://localhost:7156
2023-12-28 17:01:08.989 +06:00 [INF] Now listening on: http://localhost:5062
2023-12-28 17:01:08.990 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2023-12-28 17:01:08.991 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-12-28 17:01:08.992 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-12-28 17:01:08.993 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2023-12-28 17:01:08.994 +06:00 [INF] Hosting environment: Development
2023-12-28 17:01:08.996 +06:00 [INF] Content root path: C:\Users\smriad\Desktop\ASP\cityinfo.API\CityInfo.API
2023-12-28 17:01:08.997 +06:00 [DBG] Hosting started
2023-12-28 17:01:16.778 +06:00 [DBG] Connection id "0HN07IH88R1G4" received FIN.
2023-12-28 17:01:16.786 +06:00 [DBG] Connection id "0HN07IH88R1G4" accepted.
2023-12-28 17:01:16.790 +06:00 [DBG] Connection id "0HN07IH88R1G4" started.
2023-12-28 17:01:16.793 +06:00 [DBG] Connection id "0HN07IH88R1G5" accepted.
2023-12-28 17:01:16.795 +06:00 [DBG] Connection id "0HN07IH88R1G5" started.
2023-12-28 17:01:16.811 +06:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-12-28 17:01:16.844 +06:00 [DBG] Connection id "0HN07IH88R1G4" stopped.
2023-12-28 17:01:16.850 +06:00 [DBG] Connection id "0HN07IH88R1G4" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-12-28 17:01:16.854 +06:00 [DBG] Connection 0HN07IH88R1G5 established using the following protocol: "Tls13"
2023-12-28 17:01:16.887 +06:00 [INF] Request starting HTTP/1.1 GET https://localhost:7156/api/cities - null null
2023-12-28 17:01:16.899 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-12-28 17:01:16.921 +06:00 [DBG] The request path  does not match the path filter
2023-12-28 17:01:16.959 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2023-12-28 17:01:16.963 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2023-12-28 17:01:16.966 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 17:01:16.972 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 17:01:17.013 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities(System.String, System.String, Int32, Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2023-12-28 17:01:17.020 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-12-28 17:01:17.024 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-12-28 17:01:17.027 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-12-28 17:01:17.029 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-12-28 17:01:17.031 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-12-28 17:01:17.037 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 17:01:17.192 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-12-28 17:01:17.413 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2023-12-28 17:01:17.421 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' ...
2023-12-28 17:01:17.425 +06:00 [DBG] Attempting to bind parameter 'name' of type 'System.String' using the name '' in request data ...
2023-12-28 17:01:17.427 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'name' of type 'System.String'.
2023-12-28 17:01:17.430 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 17:01:17.432 +06:00 [DBG] Done attempting to bind parameter 'name' of type 'System.String'.
2023-12-28 17:01:17.434 +06:00 [DBG] Attempting to validate the bound parameter 'name' of type 'System.String' ...
2023-12-28 17:01:17.440 +06:00 [DBG] Done attempting to validate the bound parameter 'name' of type 'System.String'.
2023-12-28 17:01:17.443 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' ...
2023-12-28 17:01:17.444 +06:00 [DBG] Attempting to bind parameter 'searchQuery' of type 'System.String' using the name '' in request data ...
2023-12-28 17:01:17.446 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchQuery' of type 'System.String'.
2023-12-28 17:01:17.449 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 17:01:17.451 +06:00 [DBG] Done attempting to bind parameter 'searchQuery' of type 'System.String'.
2023-12-28 17:01:17.453 +06:00 [DBG] Attempting to validate the bound parameter 'searchQuery' of type 'System.String' ...
2023-12-28 17:01:17.456 +06:00 [DBG] Done attempting to validate the bound parameter 'searchQuery' of type 'System.String'.
2023-12-28 17:01:17.458 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 17:01:17.460 +06:00 [DBG] Attempting to bind parameter 'pageNumber' of type 'System.Int32' using the name '' in request data ...
2023-12-28 17:01:17.462 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 17:01:17.465 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 17:01:17.467 +06:00 [DBG] Done attempting to bind parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 17:01:17.470 +06:00 [DBG] Attempting to validate the bound parameter 'pageNumber' of type 'System.Int32' ...
2023-12-28 17:01:17.473 +06:00 [DBG] Done attempting to validate the bound parameter 'pageNumber' of type 'System.Int32'.
2023-12-28 17:01:17.475 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 17:01:17.477 +06:00 [DBG] Attempting to bind parameter 'pageSize' of type 'System.Int32' using the name '' in request data ...
2023-12-28 17:01:17.479 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'pageSize' of type 'System.Int32'.
2023-12-28 17:01:17.482 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 17:01:17.484 +06:00 [DBG] Done attempting to bind parameter 'pageSize' of type 'System.Int32'.
2023-12-28 17:01:17.486 +06:00 [DBG] Attempting to validate the bound parameter 'pageSize' of type 'System.Int32' ...
2023-12-28 17:01:17.488 +06:00 [DBG] Done attempting to validate the bound parameter 'pageSize' of type 'System.Int32'.
2023-12-28 17:01:32.797 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2023-12-28 17:01:32.872 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Count()'
2023-12-28 17:01:33.124 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM Cities AS c), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-12-28 17:01:33.177 +06:00 [DBG] Creating DbConnection.
2023-12-28 17:01:33.204 +06:00 [DBG] Created DbConnection. (24ms).
2023-12-28 17:01:33.208 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.539 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.547 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 17:01:33.558 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2023-12-28 17:01:33.563 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2023-12-28 17:01:33.574 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 17:01:33.644 +06:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Cities] AS [c]
2023-12-28 17:01:33.675 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.689 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 32ms reading results.
2023-12-28 17:01:33.699 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.710 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (10ms).
2023-12-28 17:01:33.719 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()'
2023-12-28 17:01:33.785 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2] }
        SELECT c.Id, c.Description, c.Name
        FROM Cities AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2023-12-28 17:01:33.793 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.797 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.800 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-12-28 17:01:33.802 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2023-12-28 17:01:33.804 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2023-12-28 17:01:33.807 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
2023-12-28 17:01:33.814 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name]
FROM [Cities] AS [c]
2023-12-28 17:01:33.858 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 17:01:33.881 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 17:01:33.886 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-12-28 17:01:33.889 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.892 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 72ms reading results.
2023-12-28 17:01:33.896 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:33.898 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2023-12-28 17:01:46.162 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-12-28 17:01:46.169 +06:00 [DBG] No information found on request to perform content negotiation.
2023-12-28 17:01:46.170 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-12-28 17:01:46.172 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-12-28 17:01:46.175 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-12-28 17:01:46.178 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-12-28 17:01:46.299 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 29261.4667ms
2023-12-28 17:01:46.303 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2023-12-28 17:01:46.308 +06:00 [DBG] Connection id "0HN07IH88R1G5" completed keep alive response.
2023-12-28 17:01:46.311 +06:00 [DBG] 'CityInfoContext' disposed.
2023-12-28 17:01:46.315 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2023-12-28 17:01:46.318 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2023-12-28 17:01:46.320 +06:00 [INF] Request finished HTTP/1.1 GET https://localhost:7156/api/cities - 200 227 application/json; charset=utf-8 29437.7608ms
