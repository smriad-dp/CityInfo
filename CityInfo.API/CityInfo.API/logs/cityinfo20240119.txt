2024-01-19 11:52:15.733 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 11:52:15.834 +06:00 [DBG] Hosting starting
2024-01-19 11:52:16.036 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 11:52:16.041 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 11:52:16.050 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 11:52:16.052 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 11:52:16.059 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 11:52:16.060 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 11:52:16.060 +06:00 [INF] Hosting environment: Development
2024-01-19 11:52:16.061 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 11:52:16.061 +06:00 [DBG] Hosting started
2024-01-19 11:52:52.326 +06:00 [DBG] Connection id "0HN0OMBG216F6" accepted.
2024-01-19 11:52:52.329 +06:00 [DBG] Connection id "0HN0OMBG216F6" started.
2024-01-19 11:52:52.447 +06:00 [DBG] Connection 0HN0OMBG216F6 established using the following protocol: "Tls13"
2024-01-19 11:52:52.514 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - null null
2024-01-19 11:52:52.514 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 11:52:52.529 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 11:52:52.529 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 11:52:52.555 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 11:52:52.555 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 11:52:52.559 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 11:52:52.560 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 11:52:52.562 +06:00 [INF] CORS policy execution successful.
2024-01-19 11:52:52.563 +06:00 [INF] CORS policy execution successful.
2024-01-19 11:52:52.605 +06:00 [DBG] 2 candidate(s) found for the request path '/api/cities/pointsofinterest'
2024-01-19 11:52:52.605 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 11:52:52.610 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/pointsofinterest' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 11:52:52.611 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 11:52:52.613 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 11:52:52.621 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 11:52:52.624 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 11:52:52.633 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 11:52:52.633 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 11:52:52.679 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 11:52:52.679 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointsOfInterestReturnDto]]] GetPointsOfInterest() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 11:52:52.687 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 11:52:52.687 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 11:52:52.689 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 11:52:52.691 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 11:52:52.693 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 11:52:52.695 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 11:52:52.698 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 11:52:52.704 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 11:52:52.700 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 11:52:52.708 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 11:52:52.709 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 11:52:52.710 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 11:52:52.959 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 11:52:52.959 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 11:52:53.316 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 11:52:53.316 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 11:52:54.577 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 11:52:54.577 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 11:52:54.723 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(c => c.Name)'
2024-01-19 11:52:54.723 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-01-19 11:52:55.144 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3], [Property: PointOfInterest.userId (int) Required FK Index, 4] }
        SELECT p.Id, p.CityId, p.Description, p.Name, p.userId
        FROM PointsOfInterest AS p
        ORDER BY p.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 11:52:55.144 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
        SELECT c.Id, c.Description, c.Name, c.userId
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 11:52:55.236 +06:00 [DBG] Creating DbConnection.
2024-01-19 11:52:55.257 +06:00 [DBG] Creating DbConnection.
2024-01-19 11:52:55.286 +06:00 [DBG] Created DbConnection. (49ms).
2024-01-19 11:52:55.297 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:55.297 +06:00 [DBG] Created DbConnection. (62ms).
2024-01-19 11:52:55.302 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:55.837 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:55.847 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:52:55.838 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:55.865 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:52:55.867 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 11:52:55.921 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (54ms).
2024-01-19 11:52:55.861 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2024-01-19 11:52:55.934 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (88ms).
2024-01-19 11:52:55.947 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 11:52:55.944 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 11:52:56.039 +06:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 11:52:56.040 +06:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 11:52:56.075 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:56.121 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 50ms reading results.
2024-01-19 11:52:56.130 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:56.076 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:56.140 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 96ms reading results.
2024-01-19 11:52:56.142 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:56.153 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (9ms).
2024-01-19 11:52:56.153 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (24ms).
2024-01-19 11:52:56.173 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 11:52:56.186 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 11:52:56.189 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 11:52:56.197 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 11:52:56.202 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 11:52:56.167 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 11:52:56.228 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 11:52:56.229 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 11:52:56.422 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API) in 3698.0109ms
2024-01-19 11:52:56.429 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 11:52:56.441 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 11:52:56.451 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:56.458 +06:00 [DBG] Disposed connection to database '' on server '' (6ms).
2024-01-19 11:52:56.425 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 11:52:56.470 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 11:52:56.476 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 3769.9556ms
2024-01-19 11:52:56.472 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - 404 162 application/problem+json; charset=utf-8 3963.1923ms
2024-01-19 11:52:56.479 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 11:52:56.490 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 11:52:56.493 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:52:56.497 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 11:52:56.501 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 404 162 application/problem+json; charset=utf-8 3992.8067ms
2024-01-19 11:54:40.422 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/register - null null
2024-01-19 11:54:40.433 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 11:54:40.437 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 11:54:40.441 +06:00 [INF] CORS policy execution successful.
2024-01-19 11:54:40.444 +06:00 [DBG] The request is a preflight request.
2024-01-19 11:54:40.449 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/register - 204 null null 27.4281ms
2024-01-19 11:54:40.464 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/register - application/json 114
2024-01-19 11:54:40.483 +06:00 [DBG] POST requests are not supported
2024-01-19 11:54:40.486 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 11:54:40.489 +06:00 [INF] CORS policy execution successful.
2024-01-19 11:54:40.493 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/register'
2024-01-19 11:54:40.498 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.RegisterUser (CityInfo.API)' with route pattern 'api/users/register' is valid for the request path '/api/users/register'
2024-01-19 11:54:40.503 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.RegisterUser (CityInfo.API)'
2024-01-19 11:54:40.507 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.RegisterUser (CityInfo.API)'
2024-01-19 11:54:40.526 +06:00 [INF] Route matched with {action = "RegisterUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUser(CityInfo.API.Models.UserForCreationDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 11:54:40.530 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 11:54:40.533 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 11:54:40.541 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 11:54:40.549 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 11:54:40.555 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 11:54:40.558 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 11:54:40.567 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 11:54:40.578 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForCreationDto' ...
2024-01-19 11:54:40.590 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForCreationDto' using the name '' in request data ...
2024-01-19 11:54:40.599 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 11:54:40.606 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 11:54:40.619 +06:00 [DBG] Connection id "0HN0OMBG216F6", Request id "0HN0OMBG216F6:00000007": started reading request body.
2024-01-19 11:54:40.627 +06:00 [DBG] Connection id "0HN0OMBG216F6", Request id "0HN0OMBG216F6:00000007": done reading request body.
2024-01-19 11:54:40.676 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForCreationDto'.
2024-01-19 11:54:40.679 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForCreationDto'.
2024-01-19 11:54:40.682 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForCreationDto' ...
2024-01-19 11:54:40.694 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForCreationDto'.
2024-01-19 11:54:40.812 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 11:54:40.824 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 11:54:40.870 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 11:54:40.893 +06:00 [DBG] Creating DbConnection.
2024-01-19 11:54:40.894 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 11:54:40.895 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:40.896 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:40.899 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:54:40.901 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 11:54:40.908 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-01-19 11:54:40.913 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 11:54:40.956 +06:00 [INF] Executed DbCommand (46ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 11:54:40.972 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:40.974 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 14ms reading results.
2024-01-19 11:54:40.977 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:40.979 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 11:54:40.983 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.email == __email_0)'
2024-01-19 11:54:40.991 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.email == @__email_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 11:54:40.994 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:40.996 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:40.998 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:54:41.000 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 11:54:41.003 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-19 11:54:41.005 +06:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 11:54:41.012 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 11:54:41.016 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.018 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 11:54:41.020 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.022 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 11:54:41.092 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 11:54:41.158 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 11:54:41.166 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 11:54:41.171 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 11:54:41.187 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 11:54:41.297 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.299 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.302 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:54:41.302 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 11:54:41.303 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-01-19 11:54:41.309 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 50), @p4='?' (Size = 4000), @p5='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([email], [firstName], [lastName], [password], [token], [userName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-01-19 11:54:41.316 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 50), @p1='?' (Size = 50), @p2='?' (Size = 4000), @p3='?' (Size = 50), @p4='?' (Size = 4000), @p5='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([email], [firstName], [lastName], [password], [token], [userName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-01-19 11:54:41.338 +06:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 11:54:41.348 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.350 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 30ms reading results.
2024-01-19 11:54:41.353 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.354 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 11:54:41.373 +06:00 [DBG] An entity of type 'User' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 11:54:41.381 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 11:54:41.383 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 11:54:41.387 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 11:54:41.388 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 11:54:41.388 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 11:54:41.389 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 11:54:41.390 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Entities.User'.
2024-01-19 11:54:41.424 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.RegisterUser (CityInfo.API) in 866.6339ms
2024-01-19 11:54:41.426 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.RegisterUser (CityInfo.API)'
2024-01-19 11:54:41.429 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 11:54:41.431 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:41.433 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 11:54:41.435 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/register - 200 204 application/json; charset=utf-8 970.6685ms
2024-01-19 11:54:56.137 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 11:54:56.150 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 11:54:56.154 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 11:54:56.156 +06:00 [INF] CORS policy execution successful.
2024-01-19 11:54:56.158 +06:00 [DBG] The request is a preflight request.
2024-01-19 11:54:56.160 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 23.9371ms
2024-01-19 11:54:56.164 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 11:54:56.172 +06:00 [DBG] POST requests are not supported
2024-01-19 11:54:56.177 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 11:54:56.179 +06:00 [INF] CORS policy execution successful.
2024-01-19 11:54:56.181 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 11:54:56.184 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 11:54:56.187 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 11:54:56.189 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 11:54:56.198 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 11:54:56.204 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 11:54:56.207 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 11:54:56.210 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 11:54:56.213 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 11:54:56.215 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 11:54:56.218 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 11:54:56.223 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 11:54:56.227 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 11:54:56.230 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 11:54:56.232 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 11:54:56.235 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 11:54:56.241 +06:00 [DBG] Connection id "0HN0OMBG216F6", Request id "0HN0OMBG216F6:0000000B": started reading request body.
2024-01-19 11:54:56.243 +06:00 [DBG] Connection id "0HN0OMBG216F6", Request id "0HN0OMBG216F6:0000000B": done reading request body.
2024-01-19 11:54:56.248 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 11:54:56.254 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 11:54:56.258 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 11:54:56.261 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 11:54:56.270 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 11:54:56.281 +06:00 [DBG] Creating DbConnection.
2024-01-19 11:54:56.284 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-19 11:54:56.286 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.293 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.295 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:54:56.298 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 11:54:56.301 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-19 11:54:56.303 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 11:54:56.311 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 11:54:56.314 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.315 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 11:54:56.317 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.319 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 11:54:56.328 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.password == __password_0)
    .FirstOrDefault()'
2024-01-19 11:54:56.340 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.password == @__password_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 11:54:56.349 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.352 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.353 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 11:54:56.355 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 11:54:56.358 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 11:54:56.362 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[password] = @__password_0
2024-01-19 11:54:56.373 +06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[password] = @__password_0
2024-01-19 11:54:56.378 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.380 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 11:54:56.383 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:54:56.386 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 11:55:53.433 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 57212.4018ms
2024-01-19 11:55:53.441 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 11:55:53.449 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 38
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 11:55:53.511 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 11:55:53.512 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 11:55:53.520 +06:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-01-19 11:55:53.521 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 57354.5709ms
2024-01-19 12:00:54.359 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:00:54.433 +06:00 [DBG] Hosting starting
2024-01-19 12:00:54.645 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:00:54.655 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:00:54.655 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:00:54.656 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:00:54.657 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:00:54.658 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:00:54.659 +06:00 [INF] Hosting environment: Development
2024-01-19 12:00:54.661 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:00:54.662 +06:00 [DBG] Hosting started
2024-01-19 12:00:58.122 +06:00 [DBG] Connection id "0HN0OMG0QUOID" accepted.
2024-01-19 12:00:58.129 +06:00 [DBG] Connection id "0HN0OMG0QUOID" started.
2024-01-19 12:00:58.196 +06:00 [DBG] Connection 0HN0OMG0QUOID established using the following protocol: "Tls13"
2024-01-19 12:00:58.236 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:00:58.254 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:00:58.270 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:00:58.276 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:00:58.282 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:00:58.285 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:00:58.292 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 59.9846ms
2024-01-19 12:00:58.297 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:00:58.315 +06:00 [DBG] POST requests are not supported
2024-01-19 12:00:58.321 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:00:58.326 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:00:58.344 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:00:58.349 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:00:58.361 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:00:58.367 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:00:58.387 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:00:58.394 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:00:58.399 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:00:58.405 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:00:58.407 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:00:58.408 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:00:58.411 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:00:58.501 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:00:58.604 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:00:58.607 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:00:58.613 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:00:58.615 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:00:58.616 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:00:58.621 +06:00 [DBG] Connection id "0HN0OMG0QUOID", Request id "0HN0OMG0QUOID:00000003": started reading request body.
2024-01-19 12:00:58.622 +06:00 [DBG] Connection id "0HN0OMG0QUOID", Request id "0HN0OMG0QUOID:00000003": done reading request body.
2024-01-19 12:00:58.703 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:00:58.705 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:00:58.706 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:00:58.711 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:00:59.630 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:00:59.731 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:00:59.985 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:01:00.087 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:01:00.118 +06:00 [DBG] Created DbConnection. (27ms).
2024-01-19 12:01:00.125 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.511 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.519 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:01:00.530 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-01-19 12:01:00.544 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (25ms).
2024-01-19 12:01:00.562 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:01:00.689 +06:00 [INF] Executed DbCommand (129ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:01:00.718 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.732 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 31ms reading results.
2024-01-19 12:01:00.739 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.749 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (10ms).
2024-01-19 12:01:00.756 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 12:01:00.817 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:01:00.828 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.833 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.834 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:01:00.838 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:01:00.844 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-01-19 12:01:00.857 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:01:00.879 +06:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:01:00.943 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:01:00.950 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.953 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 69ms reading results.
2024-01-19 12:01:00.955 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:00.955 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2024-01-19 12:01:01.048 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 2633.307ms
2024-01-19 12:01:01.050 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:01:01.057 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.PasswordValidAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 131
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:01:01.100 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:01:01.105 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:01.108 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 12:01:01.114 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 2817.2309ms
2024-01-19 12:01:31.652 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:01:31.673 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:01:31.679 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:01:31.683 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:01:31.685 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:01:31.689 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 38.5192ms
2024-01-19 12:01:31.693 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:01:31.710 +06:00 [DBG] POST requests are not supported
2024-01-19 12:01:31.712 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:01:31.716 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:01:31.720 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:01:31.733 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:01:31.738 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:01:31.746 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:01:31.751 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:01:31.761 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:01:31.766 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:01:31.772 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:01:31.785 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:01:31.791 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:01:31.801 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:01:31.809 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:01:31.821 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:01:31.831 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:01:31.842 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:01:31.854 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:01:31.860 +06:00 [DBG] Connection id "0HN0OMG0QUOID", Request id "0HN0OMG0QUOID:00000007": started reading request body.
2024-01-19 12:01:31.866 +06:00 [DBG] Connection id "0HN0OMG0QUOID", Request id "0HN0OMG0QUOID:00000007": done reading request body.
2024-01-19 12:01:31.869 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:01:31.871 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:01:31.875 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:01:31.879 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:01:40.903 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:01:40.921 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:01:40.927 +06:00 [DBG] Created DbConnection. (5ms).
2024-01-19 12:01:40.931 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:40.934 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:40.938 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:01:40.940 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 12:01:40.945 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-01-19 12:01:40.953 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:01:40.961 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:01:40.966 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:40.970 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 12:01:40.978 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:40.980 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 12:01:47.849 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:47.882 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:47.883 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:01:47.883 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 12:01:47.885 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 12:01:47.886 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:01:47.888 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:01:47.890 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:01:47.900 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:47.902 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 12ms reading results.
2024-01-19 12:01:47.905 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:47.907 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 12:01:47.955 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 16154.1604ms
2024-01-19 12:01:47.958 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:01:47.963 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.PasswordValidAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 131
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:01:47.982 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:01:47.983 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:01:47.984 +06:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-01-19 12:01:47.985 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 16292.8362ms
2024-01-19 12:02:55.208 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:02:55.223 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:02:55.225 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:02:55.229 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:02:55.231 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:02:55.234 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 26.0865ms
2024-01-19 12:02:55.253 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:02:55.264 +06:00 [DBG] POST requests are not supported
2024-01-19 12:02:55.266 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:02:55.267 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:02:55.269 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:02:55.271 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:02:55.276 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:02:55.279 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:02:55.281 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:02:55.284 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:02:55.286 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:02:55.296 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:02:55.322 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:02:55.325 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:02:55.335 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:02:55.344 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:02:55.406 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:02:55.413 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:02:55.416 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:02:55.419 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:02:55.424 +06:00 [DBG] Connection id "0HN0OMG0QUOID", Request id "0HN0OMG0QUOID:0000000B": started reading request body.
2024-01-19 12:02:55.425 +06:00 [DBG] Connection id "0HN0OMG0QUOID", Request id "0HN0OMG0QUOID:0000000B": done reading request body.
2024-01-19 12:02:55.427 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:02:55.429 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:02:55.430 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:02:55.431 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:02:59.706 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:02:59.712 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:02:59.714 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 12:02:59.716 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:02:59.722 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:02:59.723 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:02:59.730 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-01-19 12:02:59.733 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-01-19 12:02:59.736 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:02:59.768 +06:00 [INF] Executed DbCommand (32ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:02:59.778 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:02:59.782 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 12:02:59.784 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:02:59.786 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 12:03:02.271 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:03:02.273 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:03:02.276 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:03:02.279 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:03:02.284 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-01-19 12:03:02.288 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:03:02.323 +06:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:03:02.329 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:03:02.337 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:03:02.340 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 12ms reading results.
2024-01-19 12:03:02.353 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:03:02.356 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 12:03:02.405 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 7069.4821ms
2024-01-19 12:03:02.407 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:03:02.410 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.PasswordValidAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 131
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:03:02.425 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:03:02.427 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:03:02.429 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 12:03:02.431 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 7178.7602ms
2024-01-19 12:11:59.582 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:11:59.643 +06:00 [DBG] Hosting starting
2024-01-19 12:11:59.785 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:11:59.787 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:11:59.788 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:11:59.789 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:11:59.790 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:11:59.791 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:11:59.792 +06:00 [INF] Hosting environment: Development
2024-01-19 12:11:59.793 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:11:59.794 +06:00 [DBG] Hosting started
2024-01-19 12:12:00.047 +06:00 [DBG] Connection id "0HN0OMM63IFFU" accepted.
2024-01-19 12:12:00.052 +06:00 [DBG] Connection id "0HN0OMM63IFFU" started.
2024-01-19 12:12:00.097 +06:00 [DBG] Connection 0HN0OMM63IFFU established using the following protocol: "Tls13"
2024-01-19 12:12:00.133 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:12:00.142 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:12:00.149 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:12:00.150 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:12:00.152 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:12:00.156 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:12:00.159 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 28.2969ms
2024-01-19 12:12:00.162 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:12:00.168 +06:00 [DBG] POST requests are not supported
2024-01-19 12:12:00.170 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:12:00.172 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:12:00.185 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:12:00.190 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:12:00.192 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:12:00.195 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:12:00.209 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:12:00.213 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:12:00.215 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:12:00.218 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:12:00.220 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:12:00.223 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:12:00.226 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:12:00.333 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:12:00.480 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:12:00.489 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:12:00.492 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:12:00.495 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:12:00.498 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:12:00.504 +06:00 [DBG] Connection id "0HN0OMM63IFFU", Request id "0HN0OMM63IFFU:00000003": started reading request body.
2024-01-19 12:12:00.505 +06:00 [DBG] Connection id "0HN0OMM63IFFU", Request id "0HN0OMM63IFFU:00000003": done reading request body.
2024-01-19 12:12:00.571 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:12:00.575 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:12:00.577 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:12:00.582 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:12:06.957 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:12:07.052 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:12:07.308 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:12:07.375 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:12:07.407 +06:00 [DBG] Created DbConnection. (28ms).
2024-01-19 12:12:07.416 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:07.779 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:07.787 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:12:07.800 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2024-01-19 12:12:07.815 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (29ms).
2024-01-19 12:12:07.831 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:12:07.933 +06:00 [INF] Executed DbCommand (106ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:12:07.966 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:07.982 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 36ms reading results.
2024-01-19 12:12:07.991 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:08.004 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (12ms).
2024-01-19 12:12:21.567 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(c => c.userName == __userName_0)'
2024-01-19 12:12:21.629 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:12:21.643 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:21.648 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:21.651 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:12:21.653 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 12:12:21.656 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-19 12:12:21.659 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:12:21.668 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:12:21.727 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:12:21.737 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:21.739 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 67ms reading results.
2024-01-19 12:12:21.741 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:21.743 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 12:12:21.798 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 21568.2924ms
2024-01-19 12:12:21.804 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:12:21.810 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.PasswordValidAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 131
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:12:21.857 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:12:21.869 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:12:21.873 +06:00 [DBG] Disposed connection to database '' on server '' (5ms).
2024-01-19 12:12:21.874 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 21711.0288ms
2024-01-19 12:17:34.591 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:17:34.652 +06:00 [DBG] Hosting starting
2024-01-19 12:17:34.825 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:17:34.828 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:17:34.829 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:17:34.830 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:17:34.831 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:17:34.832 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:17:34.833 +06:00 [INF] Hosting environment: Development
2024-01-19 12:17:34.834 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:17:34.836 +06:00 [DBG] Hosting started
2024-01-19 12:17:36.292 +06:00 [DBG] Connection id "0HN0OMPAA865Q" accepted.
2024-01-19 12:17:36.295 +06:00 [DBG] Connection id "0HN0OMPAA865Q" started.
2024-01-19 12:17:36.326 +06:00 [DBG] Connection 0HN0OMPAA865Q established using the following protocol: "Tls13"
2024-01-19 12:17:36.355 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:17:36.363 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:17:36.370 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:17:36.371 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:17:36.373 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:17:36.374 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:17:36.379 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 26.6136ms
2024-01-19 12:17:36.382 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:17:36.387 +06:00 [DBG] POST requests are not supported
2024-01-19 12:17:36.388 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:17:36.390 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:17:36.404 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:17:36.407 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:17:36.410 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:17:36.414 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:17:36.434 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:17:36.439 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:17:36.442 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:17:36.445 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:17:36.448 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:17:36.450 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:17:36.452 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:17:36.519 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:17:36.590 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:17:36.593 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:17:36.598 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:17:36.600 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:17:36.602 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:17:36.606 +06:00 [DBG] Connection id "0HN0OMPAA865Q", Request id "0HN0OMPAA865Q:00000003": started reading request body.
2024-01-19 12:17:36.608 +06:00 [DBG] Connection id "0HN0OMPAA865Q", Request id "0HN0OMPAA865Q:00000003": done reading request body.
2024-01-19 12:17:36.654 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:17:36.656 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:17:36.658 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:17:36.664 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:17:36.992 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:17:37.033 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:17:37.120 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:17:37.143 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:17:37.188 +06:00 [DBG] Created DbConnection. (44ms).
2024-01-19 12:17:37.194 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:37.383 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:37.387 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:17:37.391 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:17:37.397 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-19 12:17:37.402 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:17:37.456 +06:00 [INF] Executed DbCommand (53ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:17:37.468 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:37.474 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 12ms reading results.
2024-01-19 12:17:37.478 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:37.482 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-19 12:17:42.418 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 12:17:42.473 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:17:42.484 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:42.488 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:42.490 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:17:42.492 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 12:17:42.495 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 12:17:42.497 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:17:42.516 +06:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:17:42.565 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:17:42.571 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:42.575 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 55ms reading results.
2024-01-19 12:17:42.577 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:42.579 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 12:17:42.629 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 6173.7033ms
2024-01-19 12:17:42.634 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:17:42.643 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 49
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:17:42.682 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:17:42.691 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:17:42.694 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 12:17:42.698 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 6315.7721ms
2024-01-19 12:19:05.299 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:19:05.317 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:19:05.318 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:19:05.320 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:19:05.321 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:19:05.322 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 22.8125ms
2024-01-19 12:19:05.324 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:19:05.330 +06:00 [DBG] POST requests are not supported
2024-01-19 12:19:05.331 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:19:05.333 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:19:05.335 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:19:05.337 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:19:05.339 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:19:05.341 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:19:05.343 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:19:05.346 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:19:05.348 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:19:05.350 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:19:05.352 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:19:05.354 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:19:05.356 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:19:05.359 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:19:05.361 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:19:05.363 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:19:05.365 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:19:05.367 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:19:05.370 +06:00 [DBG] Connection id "0HN0OMPAA865Q", Request id "0HN0OMPAA865Q:00000007": started reading request body.
2024-01-19 12:19:05.371 +06:00 [DBG] Connection id "0HN0OMPAA865Q", Request id "0HN0OMPAA865Q:00000007": done reading request body.
2024-01-19 12:19:05.374 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:19:05.376 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:19:05.377 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:19:05.379 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:19:18.957 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:19:18.969 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:19:18.972 +06:00 [DBG] Created DbConnection. (3ms).
2024-01-19 12:19:18.974 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:18.977 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:18.981 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:19:18.984 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:19:18.987 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-19 12:19:18.989 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:19:19.011 +06:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:19:19.016 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:19.019 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 12:19:19.022 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:19.025 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 12:19:53.345 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:53.352 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:53.353 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:19:53.355 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 12:19:53.357 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:19:53.359 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:19:53.374 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:19:53.380 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:19:53.386 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:53.388 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 9ms reading results.
2024-01-19 12:19:53.392 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:53.394 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 12:19:53.432 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 48075.3515ms
2024-01-19 12:19:53.435 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:19:53.438 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 49
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:19:53.453 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:19:53.460 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:19:53.462 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 12:19:53.463 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 48139.6454ms
2024-01-19 12:34:25.485 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:34:25.549 +06:00 [DBG] Hosting starting
2024-01-19 12:34:25.883 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:34:25.885 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:34:25.886 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:34:25.887 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:34:25.888 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:34:25.889 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:34:25.890 +06:00 [INF] Hosting environment: Development
2024-01-19 12:34:25.891 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:34:25.892 +06:00 [DBG] Hosting started
2024-01-19 12:34:55.803 +06:00 [DBG] Connection id "0HN0ON303PK3Q" accepted.
2024-01-19 12:34:55.805 +06:00 [DBG] Connection id "0HN0ON303PK3Q" started.
2024-01-19 12:34:55.853 +06:00 [DBG] Connection 0HN0ON303PK3Q established using the following protocol: "Tls13"
2024-01-19 12:34:55.883 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:34:55.892 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:34:55.902 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:34:55.905 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:34:55.907 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:34:55.908 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:34:55.911 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 30.1384ms
2024-01-19 12:34:55.915 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:34:55.920 +06:00 [DBG] POST requests are not supported
2024-01-19 12:34:55.922 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:34:55.923 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:34:55.941 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:34:55.944 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:34:55.946 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:34:55.949 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:34:55.963 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:34:55.969 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:34:55.972 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:34:55.974 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:34:55.977 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:34:55.979 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:34:55.982 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:34:56.065 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:34:56.164 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:34:56.166 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:34:56.171 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:34:56.175 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:34:56.178 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:34:56.183 +06:00 [DBG] Connection id "0HN0ON303PK3Q", Request id "0HN0ON303PK3Q:00000003": started reading request body.
2024-01-19 12:34:56.186 +06:00 [DBG] Connection id "0HN0ON303PK3Q", Request id "0HN0ON303PK3Q:00000003": done reading request body.
2024-01-19 12:34:56.240 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:34:56.243 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:34:56.245 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:34:56.254 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:35:02.035 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:35:02.087 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:35:02.216 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:35:02.239 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:35:02.252 +06:00 [DBG] Created DbConnection. (12ms).
2024-01-19 12:35:02.258 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:02.460 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:02.464 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:35:02.469 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:35:02.474 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-19 12:35:02.480 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:35:02.527 +06:00 [INF] Executed DbCommand (45ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:35:02.540 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:02.546 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 12ms reading results.
2024-01-19 12:35:02.549 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:02.555 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-19 12:35:14.848 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.password == __password_0)'
2024-01-19 12:35:14.855 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.password == @__password_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:35:14.856 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:14.857 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:14.860 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:35:14.861 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 12:35:14.864 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 12:35:14.866 +06:00 [DBG] Executing DbCommand [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:35:14.889 +06:00 [INF] Executed DbCommand (22ms) [Parameters=[@__password_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[password] = @__password_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:35:14.893 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:14.895 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 12:35:14.897 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:14.900 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 12:35:14.906 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 12:35:14.910 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 12:35:14.912 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 12:35:14.913 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 12:35:14.915 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 12:35:14.917 +06:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 12:35:14.943 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 18958.503ms
2024-01-19 12:35:14.945 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:35:14.949 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:35:14.955 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:35:14.958 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 12:35:14.960 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 404 28 application/json; charset=utf-8 19044.7919ms
2024-01-19 12:44:48.145 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:44:48.208 +06:00 [DBG] Hosting starting
2024-01-19 12:44:48.317 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:44:48.318 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:44:48.319 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:44:48.320 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:44:48.321 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:44:48.322 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:44:48.323 +06:00 [INF] Hosting environment: Development
2024-01-19 12:44:48.324 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:44:48.325 +06:00 [DBG] Hosting started
2024-01-19 12:44:49.646 +06:00 [DBG] Connection id "0HN0ON8H346FK" accepted.
2024-01-19 12:44:49.651 +06:00 [DBG] Connection id "0HN0ON8H346FK" started.
2024-01-19 12:44:49.684 +06:00 [DBG] Connection 0HN0ON8H346FK established using the following protocol: "Tls13"
2024-01-19 12:44:49.712 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:44:49.719 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:44:49.727 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:44:49.730 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:44:49.732 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:44:49.733 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:44:49.737 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 27.0003ms
2024-01-19 12:44:49.742 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:44:49.746 +06:00 [DBG] POST requests are not supported
2024-01-19 12:44:49.747 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:44:49.748 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:44:49.761 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:44:49.763 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:44:49.765 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:44:49.768 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:44:49.782 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:44:49.788 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:44:49.791 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:44:49.793 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:44:49.796 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:44:49.798 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:44:49.800 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:44:49.864 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:44:49.943 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:44:49.949 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:44:49.956 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:44:49.960 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:44:49.962 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:44:49.966 +06:00 [DBG] Connection id "0HN0ON8H346FK", Request id "0HN0ON8H346FK:00000003": started reading request body.
2024-01-19 12:44:49.967 +06:00 [DBG] Connection id "0HN0ON8H346FK", Request id "0HN0ON8H346FK:00000003": done reading request body.
2024-01-19 12:44:50.007 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:44:50.026 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:44:50.036 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:44:50.049 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:44:50.375 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:44:50.419 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:44:50.496 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:44:50.517 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:44:50.529 +06:00 [DBG] Created DbConnection. (10ms).
2024-01-19 12:44:50.532 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:50.701 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:50.704 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:44:50.708 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:44:50.714 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-19 12:44:50.720 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:44:50.762 +06:00 [INF] Executed DbCommand (43ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:44:50.773 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:50.778 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 10ms reading results.
2024-01-19 12:44:50.782 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:50.786 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-19 12:44:55.138 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 12:44:55.165 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:44:55.173 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:55.177 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:55.179 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:44:55.180 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 12:44:55.182 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:44:55.184 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:44:55.190 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:44:55.226 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:44:55.233 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:55.235 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 42ms reading results.
2024-01-19 12:44:55.237 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:55.238 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 12:44:55.283 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 5480.8121ms
2024-01-19 12:44:55.286 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:44:55.291 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:44:55.315 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:44:55.320 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:44:55.322 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 12:44:55.325 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 5583.2177ms
2024-01-19 12:48:41.726 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:48:41.809 +06:00 [DBG] Hosting starting
2024-01-19 12:48:41.937 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:48:41.938 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:48:41.939 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:48:41.940 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:48:41.941 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:48:41.942 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:48:41.943 +06:00 [INF] Hosting environment: Development
2024-01-19 12:48:41.945 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:48:41.946 +06:00 [DBG] Hosting started
2024-01-19 12:48:47.724 +06:00 [DBG] Connection id "0HN0ONAO1JR6P" accepted.
2024-01-19 12:48:47.729 +06:00 [DBG] Connection id "0HN0ONAO1JR6P" started.
2024-01-19 12:48:47.785 +06:00 [DBG] Connection 0HN0ONAO1JR6P established using the following protocol: "Tls13"
2024-01-19 12:48:47.820 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:48:47.830 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:48:47.840 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:48:47.842 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:48:47.844 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:48:47.845 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:48:47.848 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 30.7725ms
2024-01-19 12:48:47.853 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:48:47.859 +06:00 [DBG] POST requests are not supported
2024-01-19 12:48:47.919 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:48:47.921 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:48:47.935 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:48:47.940 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:48:47.943 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:48:47.946 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:48:47.961 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:48:47.965 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:48:47.967 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:48:47.973 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:48:47.983 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:48:47.985 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:48:47.988 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:48:48.068 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:48:48.206 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:48:48.213 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:48:48.217 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:48:48.221 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:48:48.223 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:48:48.227 +06:00 [DBG] Connection id "0HN0ONAO1JR6P", Request id "0HN0ONAO1JR6P:00000003": started reading request body.
2024-01-19 12:48:48.229 +06:00 [DBG] Connection id "0HN0ONAO1JR6P", Request id "0HN0ONAO1JR6P:00000003": done reading request body.
2024-01-19 12:48:48.287 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:48:48.291 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:48:48.294 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:48:48.301 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:48:48.677 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:48:48.725 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:48:48.824 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:48:48.850 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:48:48.876 +06:00 [DBG] Created DbConnection. (23ms).
2024-01-19 12:48:48.880 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:49.085 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:49.091 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:48:49.098 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-01-19 12:48:49.107 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2024-01-19 12:48:49.113 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:48:49.181 +06:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:48:49.192 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:49.199 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 10ms reading results.
2024-01-19 12:48:49.203 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:49.207 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-19 12:48:51.497 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.userName == __userName_0)'
2024-01-19 12:48:51.520 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:48:51.528 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:51.531 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:51.533 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:48:51.534 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 12:48:51.536 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:48:51.537 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:48:51.542 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:48:51.571 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:48:51.577 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:51.578 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 34ms reading results.
2024-01-19 12:48:51.581 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:51.582 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 12:48:51.621 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 3632.566ms
2024-01-19 12:48:51.624 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:48:51.628 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:48:51.662 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:48:51.667 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:48:51.670 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 12:48:51.672 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 3819.4375ms
2024-01-19 12:50:58.560 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 12:50:58.623 +06:00 [DBG] Hosting starting
2024-01-19 12:50:58.756 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 12:50:58.757 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 12:50:58.759 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 12:50:58.760 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 12:50:58.762 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 12:50:58.764 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 12:50:58.766 +06:00 [INF] Hosting environment: Development
2024-01-19 12:50:58.767 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 12:50:58.768 +06:00 [DBG] Hosting started
2024-01-19 12:51:04.270 +06:00 [DBG] Connection id "0HN0ONC0NQE4P" accepted.
2024-01-19 12:51:04.273 +06:00 [DBG] Connection id "0HN0ONC0NQE4P" started.
2024-01-19 12:51:04.327 +06:00 [DBG] Connection 0HN0ONC0NQE4P established using the following protocol: "Tls13"
2024-01-19 12:51:04.371 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 12:51:04.381 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 12:51:04.389 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 12:51:04.391 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:51:04.393 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:51:04.395 +06:00 [DBG] The request is a preflight request.
2024-01-19 12:51:04.400 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 32.5968ms
2024-01-19 12:51:04.405 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 12:51:04.410 +06:00 [DBG] POST requests are not supported
2024-01-19 12:51:04.412 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 12:51:04.413 +06:00 [INF] CORS policy execution successful.
2024-01-19 12:51:04.430 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 12:51:04.434 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 12:51:04.437 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:51:04.440 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:51:04.458 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 12:51:04.464 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 12:51:04.466 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 12:51:04.468 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 12:51:04.471 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 12:51:04.474 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 12:51:04.478 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:51:04.564 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 12:51:04.654 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 12:51:04.659 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:51:04.663 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 12:51:04.665 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 12:51:04.667 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 12:51:04.672 +06:00 [DBG] Connection id "0HN0ONC0NQE4P", Request id "0HN0ONC0NQE4P:00000003": started reading request body.
2024-01-19 12:51:04.674 +06:00 [DBG] Connection id "0HN0ONC0NQE4P", Request id "0HN0ONC0NQE4P:00000003": done reading request body.
2024-01-19 12:51:04.722 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:51:04.725 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:51:04.727 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 12:51:04.735 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 12:51:05.193 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 12:51:05.250 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 12:51:05.342 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:51:05.373 +06:00 [DBG] Creating DbConnection.
2024-01-19 12:51:05.388 +06:00 [DBG] Created DbConnection. (14ms).
2024-01-19 12:51:05.394 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:05.600 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:05.604 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:51:05.609 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:51:05.617 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2024-01-19 12:51:05.625 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:51:05.686 +06:00 [INF] Executed DbCommand (63ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 12:51:05.701 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:05.709 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 13ms reading results.
2024-01-19 12:51:05.714 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:05.720 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-19 12:51:08.999 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(c => c.userName == __userName_0)'
2024-01-19 12:51:09.021 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 12:51:09.030 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:09.033 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:09.035 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 12:51:09.036 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 12:51:09.038 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 12:51:09.041 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:51:09.046 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 12:51:09.079 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 12:51:09.085 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:09.086 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 37ms reading results.
2024-01-19 12:51:09.088 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:09.090 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 12:51:09.133 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 4655.3411ms
2024-01-19 12:51:09.137 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 12:51:09.141 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 12:51:09.166 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 12:51:09.172 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 12:51:09.177 +06:00 [DBG] Disposed connection to database '' on server '' (5ms).
2024-01-19 12:51:09.180 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 4775.4798ms
2024-01-19 14:52:45.252 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 14:52:45.350 +06:00 [DBG] Hosting starting
2024-01-19 14:52:45.477 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 14:52:45.478 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 14:52:45.480 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 14:52:45.481 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 14:52:45.483 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 14:52:45.485 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 14:52:45.488 +06:00 [INF] Hosting environment: Development
2024-01-19 14:52:45.489 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 14:52:45.492 +06:00 [DBG] Hosting started
2024-01-19 14:53:14.252 +06:00 [DBG] Connection id "0HN0OPG97VDAF" accepted.
2024-01-19 14:53:14.255 +06:00 [DBG] Connection id "0HN0OPG97VDAF" started.
2024-01-19 14:53:14.296 +06:00 [DBG] Connection 0HN0OPG97VDAF established using the following protocol: "Tls13"
2024-01-19 14:53:14.337 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/ - null null
2024-01-19 14:53:14.511 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 14:53:14.521 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 14:53:14.531 +06:00 [DBG] No candidates found for the request path '/'
2024-01-19 14:53:14.533 +06:00 [DBG] Request did not match any endpoints
2024-01-19 14:53:14.539 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/ - 404 0 null 206.7879ms
2024-01-19 14:53:14.546 +06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7156/, Response status code: 404
2024-01-19 14:53:23.924 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger - null null
2024-01-19 14:53:23.937 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger - 301 0 null 13.6367ms
2024-01-19 14:53:23.941 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-19 14:53:24.003 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-19 14:53:24.025 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/swagger-ui.css - null null
2024-01-19 14:53:24.043 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-19 14:53:24.026 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/swagger-ui-standalone-preset.js - null null
2024-01-19 14:53:24.026 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/swagger-ui-bundle.js - null null
2024-01-19 14:53:24.051 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-19 14:53:24.043 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-19 14:53:24.088 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 147.1137ms
2024-01-19 14:53:24.091 +06:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-01-19 14:53:24.097 +06:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-01-19 14:53:24.105 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/swagger-ui.css - 200 144929 text/css 73.48ms
2024-01-19 14:53:24.113 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/swagger-ui-standalone-preset.js - 200 312163 text/javascript 86.5574ms
2024-01-19 14:53:24.079 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 36.3637ms
2024-01-19 14:53:24.139 +06:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-01-19 14:53:24.141 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/swagger-ui-bundle.js - 200 1061536 text/javascript 116.1162ms
2024-01-19 14:53:24.180 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 136.9148ms
2024-01-19 14:53:24.266 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-19 14:53:24.279 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/favicon-32x32.png - null null
2024-01-19 14:53:24.284 +06:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-01-19 14:53:24.287 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/favicon-32x32.png - 200 628 image/png 8.3742ms
2024-01-19 14:53:24.383 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.2565ms
2024-01-19 14:53:52.763 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/users/13 - null null
2024-01-19 14:53:52.776 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 14:53:52.788 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/13'
2024-01-19 14:53:52.791 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)' with route pattern 'api/users/{id}' is valid for the request path '/api/users/13'
2024-01-19 14:53:52.793 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)'
2024-01-19 14:53:52.796 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)'
2024-01-19 14:53:52.813 +06:00 [INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(Int32) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 14:53:52.818 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 14:53:52.821 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 14:53:52.822 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 14:53:52.825 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 14:53:52.827 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 14:53:52.831 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 14:53:52.917 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 14:53:53.005 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 14:53:53.009 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-01-19 14:53:53.012 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-01-19 14:53:53.014 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 14:53:53.017 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 14:53:53.018 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-01-19 14:53:53.021 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-01-19 14:53:53.389 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 14:53:53.444 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Id == __userId_0)
    .FirstOrDefault()'
2024-01-19 14:53:53.547 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.Id == @__userId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 14:53:53.570 +06:00 [DBG] Creating DbConnection.
2024-01-19 14:53:53.588 +06:00 [DBG] Created DbConnection. (17ms).
2024-01-19 14:53:53.592 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 14:53:53.810 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 14:53:53.814 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 14:53:53.820 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-01-19 14:53:53.826 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-01-19 14:53:53.833 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 14:53:53.892 +06:00 [INF] Executed DbCommand (61ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 14:53:53.930 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method14(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method14(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 14:53:53.938 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 14:53:53.944 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 47ms reading results.
2024-01-19 14:53:53.947 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 14:53:53.953 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-19 14:53:54.009 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API) in 1176.5988ms
2024-01-19 14:53:54.011 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)'
2024-01-19 14:53:54.014 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method14(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(Int32 userId) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 43
   at CityInfo.API.Controllers.UsersController.GetUser(Int32 id) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 14:53:54.034 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 14:53:54.038 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 14:53:54.040 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 14:53:54.043 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/users/13 - 500 null text/plain; charset=utf-8 1279.9691ms
2024-01-19 14:56:05.042 +06:00 [DBG] Connection id "0HN0OPG97VDAF" received FIN.
2024-01-19 14:56:05.050 +06:00 [DBG] Connection id "0HN0OPG97VDAF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-19 14:56:05.051 +06:00 [DBG] Connection id "0HN0OPG97VDAF" is closed. The last processed stream ID was 21.
2024-01-19 14:56:05.054 +06:00 [DBG] The connection queue processing loop for 0HN0OPG97VDAF completed.
2024-01-19 14:56:05.058 +06:00 [DBG] Connection id "0HN0OPG97VDAF" stopped.
2024-01-19 15:03:47.641 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 15:03:47.706 +06:00 [DBG] Hosting starting
2024-01-19 15:03:47.819 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 15:03:47.821 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 15:03:47.822 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 15:03:47.823 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 15:03:47.824 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 15:03:47.825 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 15:03:47.827 +06:00 [INF] Hosting environment: Development
2024-01-19 15:03:47.828 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 15:03:47.829 +06:00 [DBG] Hosting started
2024-01-19 15:04:05.435 +06:00 [DBG] Connection id "0HN0OPMBA4F9K" accepted.
2024-01-19 15:04:05.439 +06:00 [DBG] Connection id "0HN0OPMBA4F9K" started.
2024-01-19 15:04:05.485 +06:00 [DBG] Connection 0HN0OPMBA4F9K established using the following protocol: "Tls13"
2024-01-19 15:04:05.513 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 15:04:05.521 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 15:04:05.529 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:04:05.530 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:04:05.532 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:04:05.535 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:04:05.537 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 26.2773ms
2024-01-19 15:04:05.541 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 15:04:05.547 +06:00 [DBG] POST requests are not supported
2024-01-19 15:04:05.549 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:04:05.551 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:04:05.563 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 15:04:05.567 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 15:04:05.569 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:05.574 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:05.587 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:04:05.591 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:04:05.593 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:04:05.595 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:04:05.598 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:04:05.600 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:04:05.605 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:04:05.683 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 15:04:05.759 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:04:05.765 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:04:05.768 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 15:04:05.771 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:04:05.773 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:04:05.780 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:00000003": started reading request body.
2024-01-19 15:04:05.781 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:00000003": done reading request body.
2024-01-19 15:04:05.829 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:05.830 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:05.832 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:04:05.840 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:06.215 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:04:06.257 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 15:04:06.347 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:04:06.375 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:04:06.389 +06:00 [DBG] Created DbConnection. (12ms).
2024-01-19 15:04:06.392 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.571 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.575 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:04:06.579 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:04:06.585 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-19 15:04:06.591 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:04:06.634 +06:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:04:06.646 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.650 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 10ms reading results.
2024-01-19 15:04:06.653 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.657 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 15:04:06.661 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .SingleOrDefault()'
2024-01-19 15:04:06.685 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(2) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:04:06.689 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.694 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.696 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:04:06.699 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:04:06.701 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-19 15:04:06.704 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:04:06.712 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:04:06.743 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 15:04:06.748 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.750 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 36ms reading results.
2024-01-19 15:04:06.752 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.754 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 15:04:06.805 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 1198.8435ms
2024-01-19 15:04:06.807 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:06.810 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 15:04:06.830 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:04:06.838 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:06.841 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 15:04:06.843 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 1301.295ms
2024-01-19 15:04:22.326 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 15:04:22.334 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:04:22.338 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:04:22.340 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:04:22.341 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:04:22.343 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 17.6367ms
2024-01-19 15:04:22.345 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 15:04:22.350 +06:00 [DBG] POST requests are not supported
2024-01-19 15:04:22.351 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:04:22.352 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:04:22.354 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 15:04:22.356 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 15:04:22.358 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:22.360 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:22.362 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:04:22.364 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:04:22.366 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:04:22.368 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:04:22.370 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:04:22.372 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:04:22.374 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:04:22.376 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:04:22.378 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:04:22.380 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 15:04:22.382 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:04:22.383 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:04:22.385 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:00000007": started reading request body.
2024-01-19 15:04:22.387 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:00000007": done reading request body.
2024-01-19 15:04:22.389 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:22.390 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:22.392 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:04:22.393 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:22.411 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:04:22.422 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:04:22.424 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 15:04:22.426 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:22.429 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:22.431 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:04:22.433 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:04:22.436 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2024-01-19 15:04:22.439 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:04:22.443 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:04:22.446 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:22.448 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 15:04:22.449 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:22.451 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:04:24.734 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:24.736 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:24.737 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:04:24.738 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 15:04:24.739 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:04:24.741 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:04:24.743 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:04:24.746 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 15:04:24.751 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:24.752 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 6ms reading results.
2024-01-19 15:04:24.753 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:24.755 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:04:24.788 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 2414.4511ms
2024-01-19 15:04:24.791 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:24.792 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 15:04:24.801 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:04:24.803 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:24.804 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:04:24.808 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 2463.6636ms
2024-01-19 15:04:48.184 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 15:04:48.187 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:04:48.188 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:04:48.189 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:04:48.190 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:04:48.191 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 7.7866ms
2024-01-19 15:04:48.193 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 46
2024-01-19 15:04:48.198 +06:00 [DBG] POST requests are not supported
2024-01-19 15:04:48.199 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:04:48.201 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:04:48.202 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 15:04:48.203 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 15:04:48.205 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:48.207 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:48.208 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:04:48.211 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:04:48.213 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:04:48.215 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:04:48.218 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:04:48.219 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:04:48.222 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:04:48.226 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:04:48.228 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:04:48.230 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 15:04:48.232 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:04:48.233 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:04:48.235 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:0000000B": started reading request body.
2024-01-19 15:04:48.236 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:0000000B": done reading request body.
2024-01-19 15:04:48.238 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:48.240 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:48.241 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:04:48.243 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:04:48.290 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:04:48.295 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:04:48.296 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 15:04:48.298 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:48.300 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:48.302 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:04:48.303 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:04:48.305 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:04:48.307 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:04:48.324 +06:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:04:48.327 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:48.329 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 15:04:48.331 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:48.333 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:04:48.337 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 15:04:48.342 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 15:04:48.343 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 15:04:48.344 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 15:04:48.346 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 15:04:48.348 +06:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 15:04:48.377 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 155.8398ms
2024-01-19 15:04:48.381 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:04:48.382 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:04:48.383 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:04:48.385 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 15:04:48.387 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 404 28 application/json; charset=utf-8 194.3034ms
2024-01-19 15:05:10.646 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 15:05:10.653 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:05:10.655 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:05:10.656 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:05:10.658 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:05:10.659 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 14.2704ms
2024-01-19 15:05:10.661 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 15:05:10.667 +06:00 [DBG] POST requests are not supported
2024-01-19 15:05:10.668 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:05:10.669 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:05:10.670 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 15:05:10.671 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 15:05:10.673 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:05:10.675 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:05:10.676 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:05:10.678 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:05:10.680 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:05:10.682 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:05:10.684 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:05:10.686 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:05:10.687 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:05:10.688 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:05:10.689 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:05:10.691 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 15:05:10.693 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:05:10.694 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:05:10.696 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:0000000F": started reading request body.
2024-01-19 15:05:10.698 +06:00 [DBG] Connection id "0HN0OPMBA4F9K", Request id "0HN0OPMBA4F9K:0000000F": done reading request body.
2024-01-19 15:05:10.700 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:05:10.701 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:05:10.703 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:05:10.704 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:05:10.707 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:05:10.710 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:05:10.710 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 15:05:10.712 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:10.714 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:10.715 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:05:10.717 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:05:10.718 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:05:10.720 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:05:10.725 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:05:10.728 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:10.730 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 15:05:10.732 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:10.733 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:05:13.660 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:13.661 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:13.663 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:05:13.664 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:05:13.665 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:05:13.667 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:05:13.671 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:05:13.674 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 15:05:13.677 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:13.679 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 15:05:13.681 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:13.682 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:05:13.716 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 3029.4586ms
2024-01-19 15:05:13.719 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:05:13.722 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 15:05:13.730 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:05:13.732 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:05:13.734 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:05:13.737 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 3076.1618ms
2024-01-19 15:09:41.720 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 15:09:41.817 +06:00 [DBG] Hosting starting
2024-01-19 15:09:41.947 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 15:09:41.949 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 15:09:41.950 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 15:09:41.951 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 15:09:41.952 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 15:09:41.953 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 15:09:41.954 +06:00 [INF] Hosting environment: Development
2024-01-19 15:09:41.955 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 15:09:41.957 +06:00 [DBG] Hosting started
2024-01-19 15:09:54.363 +06:00 [DBG] Connection id "0HN0OPPJ9OT5Q" accepted.
2024-01-19 15:09:54.368 +06:00 [DBG] Connection id "0HN0OPPJ9OT5Q" started.
2024-01-19 15:09:54.421 +06:00 [DBG] Connection 0HN0OPPJ9OT5Q established using the following protocol: "Tls13"
2024-01-19 15:09:54.464 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 15:09:54.474 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 15:09:54.484 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:09:54.487 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:09:54.489 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:09:54.490 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:09:54.493 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 33.2851ms
2024-01-19 15:09:54.497 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 15:09:54.505 +06:00 [DBG] POST requests are not supported
2024-01-19 15:09:54.506 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:09:54.507 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:09:54.525 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 15:09:54.528 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 15:09:54.533 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:09:54.538 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:09:54.566 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:09:54.572 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:09:54.574 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:09:54.576 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:09:54.579 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:09:54.581 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:09:54.585 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:09:54.679 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 15:09:54.787 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:09:54.792 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:09:54.795 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 15:09:54.799 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:09:54.802 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:09:54.806 +06:00 [DBG] Connection id "0HN0OPPJ9OT5Q", Request id "0HN0OPPJ9OT5Q:00000003": started reading request body.
2024-01-19 15:09:54.808 +06:00 [DBG] Connection id "0HN0OPPJ9OT5Q", Request id "0HN0OPPJ9OT5Q:00000003": done reading request body.
2024-01-19 15:09:54.865 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:09:54.868 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:09:54.870 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:09:54.876 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:09:55.412 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:09:55.466 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 15:09:55.579 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:09:55.604 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:09:55.619 +06:00 [DBG] Created DbConnection. (14ms).
2024-01-19 15:09:55.626 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:55.871 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:55.878 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:09:55.888 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2024-01-19 15:09:55.898 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2024-01-19 15:09:55.910 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:09:55.989 +06:00 [INF] Executed DbCommand (81ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:09:56.007 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:56.016 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 18ms reading results.
2024-01-19 15:09:56.021 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:56.027 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (6ms).
2024-01-19 15:09:59.842 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .SingleOrDefault()'
2024-01-19 15:09:59.877 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.token (string) Required, 5], [Property: User.userName (string) Required MaxLength(50), 6] }
            SELECT TOP(2) u.Id, u.email, u.firstName, u.lastName, u.password, u.token, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:09:59.885 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:59.889 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:59.891 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:09:59.893 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:09:59.894 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:09:59.896 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:09:59.901 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[token], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:09:59.939 +06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CityInfo.API.DbContexts.CityInfoContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2024-01-19 15:09:59.945 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:59.947 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 42ms reading results.
2024-01-19 15:09:59.948 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:09:59.950 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:09:59.993 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 5407.2729ms
2024-01-19 15:09:59.996 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:09:59.999 +06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method18(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.GetUserAsync(String userName) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 47
   at CityInfo.API.Controllers.UsersController.Authenticate(UserForLoginDto userObj) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\UsersController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 15:10:00.029 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:10:00.036 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:10:00.039 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 15:10:00.043 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 500 null text/plain; charset=utf-8 5545.7053ms
2024-01-19 15:46:58.963 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 15:46:59.021 +06:00 [DBG] Hosting starting
2024-01-19 15:46:59.131 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 15:46:59.132 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 15:46:59.133 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 15:46:59.134 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 15:46:59.136 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 15:46:59.138 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 15:46:59.139 +06:00 [INF] Hosting environment: Development
2024-01-19 15:46:59.141 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 15:46:59.142 +06:00 [DBG] Hosting started
2024-01-19 15:47:03.338 +06:00 [DBG] Connection id "0HN0OQEBIUA5I" accepted.
2024-01-19 15:47:03.341 +06:00 [DBG] Connection id "0HN0OQEBIUA5I" started.
2024-01-19 15:47:03.379 +06:00 [DBG] Connection 0HN0OQEBIUA5I established using the following protocol: "Tls13"
2024-01-19 15:47:03.408 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-19 15:47:03.489 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 15:47:03.527 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-19 15:47:03.545 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-19 15:47:03.548 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-19 15:47:03.548 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-19 15:47:03.549 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 142.8744ms
2024-01-19 15:47:03.577 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 28.8754ms
2024-01-19 15:47:03.596 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.6362ms
2024-01-19 15:47:03.648 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-19 15:47:03.735 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 86.9413ms
2024-01-19 15:47:12.445 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/users/13 - null null
2024-01-19 15:47:12.449 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 15:47:12.468 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/13'
2024-01-19 15:47:12.473 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)' with route pattern 'api/users/{id}' is valid for the request path '/api/users/13'
2024-01-19 15:47:12.477 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)'
2024-01-19 15:47:12.481 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)'
2024-01-19 15:47:12.498 +06:00 [INF] Route matched with {action = "GetUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser(Int32) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:47:12.505 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:47:12.509 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:47:12.513 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:47:12.515 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:47:12.518 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:47:12.520 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:47:12.613 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 15:47:12.699 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:47:12.703 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-01-19 15:47:12.706 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-01-19 15:47:12.711 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 15:47:12.713 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 15:47:12.715 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-01-19 15:47:12.717 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-01-19 15:47:13.084 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:47:13.123 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Id == __userId_0)
    .FirstOrDefault()'
2024-01-19 15:47:13.227 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.Id == @__userId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:47:13.251 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:47:13.266 +06:00 [DBG] Created DbConnection. (14ms).
2024-01-19 15:47:13.270 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:13.452 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:13.455 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:47:13.460 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2024-01-19 15:47:13.466 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2024-01-19 15:47:13.472 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 15:47:13.539 +06:00 [INF] Executed DbCommand (69ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 15:47:13.580 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:47:13.596 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:13.603 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 54ms reading results.
2024-01-19 15:47:13.608 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:13.613 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-19 15:47:13.621 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 15:47:13.628 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 15:47:13.629 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 15:47:13.631 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 15:47:13.633 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 15:47:13.635 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.UserWithoutCityDto'.
2024-01-19 15:47:13.688 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API) in 1165.8621ms
2024-01-19 15:47:13.692 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.GetUser (CityInfo.API)'
2024-01-19 15:47:13.695 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:47:13.700 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:13.703 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 15:47:13.707 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/users/13 - 200 157 application/json; charset=utf-8 1262.6009ms
2024-01-19 15:47:35.318 +06:00 [DBG] Connection id "0HN0OQEBIUA5J" accepted.
2024-01-19 15:47:35.322 +06:00 [DBG] Connection id "0HN0OQEBIUA5J" started.
2024-01-19 15:47:35.329 +06:00 [DBG] Connection 0HN0OQEBIUA5J established using the following protocol: "Tls13"
2024-01-19 15:47:35.335 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 15:47:35.341 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:47:35.343 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:47:35.345 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:47:35.346 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:47:35.347 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 12.3443ms
2024-01-19 15:47:35.349 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 15:47:35.353 +06:00 [DBG] POST requests are not supported
2024-01-19 15:47:35.355 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:47:35.356 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:47:35.358 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 15:47:35.359 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 15:47:35.361 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:47:35.363 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:47:35.366 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 15:47:35.368 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:47:35.370 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:47:35.372 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:47:35.374 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:47:35.377 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:47:35.379 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:47:35.381 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 15:47:35.383 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:47:35.385 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 15:47:35.388 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:47:35.390 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:47:35.396 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000003": started reading request body.
2024-01-19 15:47:35.398 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000003": done reading request body.
2024-01-19 15:47:35.414 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:47:35.416 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:47:35.418 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 15:47:35.425 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 15:47:35.434 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:47:35.438 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.userName == __userName_0)'
2024-01-19 15:47:35.446 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.userName == @__userName_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:47:35.458 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:47:35.460 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 15:47:35.461 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.463 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.465 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:47:35.466 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:47:35.469 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:47:35.471 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:47:35.478 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 15:47:35.485 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.487 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 15:47:35.489 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.490 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:47:35.493 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 15:47:35.497 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 15:47:35.501 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.502 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.503 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:47:35.505 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:47:35.506 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:47:35.508 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:47:35.513 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 15:47:35.517 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:47:35.518 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.520 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 15:47:35.521 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.523 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:47:35.535 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 15:47:35.539 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 15:47:35.540 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 15:47:35.541 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 15:47:35.542 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 15:47:35.544 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 15:47:35.550 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 171.2436ms
2024-01-19 15:47:35.552 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 15:47:35.554 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:47:35.556 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:35.558 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:47:35.560 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 200 28 application/json; charset=utf-8 210.5179ms
2024-01-19 15:47:46.697 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 15:47:46.702 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 15:47:46.703 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:47:46.705 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:47:46.706 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 15:47:46.709 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 15:47:46.712 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:47:46.714 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:47:46.719 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 15:47:46.722 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:47:46.724 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:47:46.725 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:47:46.728 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:47:46.730 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:47:46.731 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:47:46.737 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:47:46.784 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:47:46.790 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-01-19 15:47:46.798 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
        SELECT c.Id, c.Description, c.Name, c.userId
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 15:47:46.802 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:47:46.803 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 15:47:46.804 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:46.806 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:46.808 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:47:46.811 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:47:46.812 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 15:47:46.814 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 15:47:46.820 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 15:47:46.823 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:46.825 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 15:47:46.828 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:46.829 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:47:46.832 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 15:47:46.835 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 15:47:46.836 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 15:47:46.839 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 15:47:46.841 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 15:47:46.850 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 118.7807ms
2024-01-19 15:47:46.852 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:47:46.854 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:47:46.855 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:47:46.857 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:47:46.858 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 404 162 application/problem+json; charset=utf-8 160.9294ms
2024-01-19 15:59:13.837 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 15:59:13.845 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:59:13.846 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:59:13.847 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:59:13.849 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:59:13.850 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 14.0092ms
2024-01-19 15:59:13.852 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 70
2024-01-19 15:59:13.859 +06:00 [DBG] POST requests are not supported
2024-01-19 15:59:13.861 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:59:13.862 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:59:13.863 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 15:59:13.864 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 15:59:13.866 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 15:59:13.868 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 15:59:13.872 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 15:59:13.874 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:59:13.876 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:59:13.877 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:59:13.879 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:59:13.881 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:59:13.883 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:13.885 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:13.886 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 15:59:13.888 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 15:59:13.890 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:59:13.892 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:59:13.894 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000009": started reading request body.
2024-01-19 15:59:13.895 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000009": done reading request body.
2024-01-19 15:59:13.901 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 15:59:13.903 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 15:59:13.905 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 15:59:13.908 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 15:59:13.914 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:59:13.930 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:13.944 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:13.949 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 15:59:13.952 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 15:59:13.960 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 15:59:14.003 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:59:14.006 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 15:59:14.008 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.021 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.026 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:59:14.027 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:59:14.029 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:59:14.031 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 15:59:14.055 +06:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 15:59:14.068 +06:00 [DBG] The foreign key property 'City.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 15:59:14.073 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.075 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 16ms reading results.
2024-01-19 15:59:14.078 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.080 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 15:59:14.090 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:14.094 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 15:59:14.096 +06:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-01-19 15:59:14.098 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 215.2824ms
2024-01-19 15:59:14.100 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 15:59:14.102 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:59:14.103 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.105 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:59:14.107 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 200 0 null 255.2242ms
2024-01-19 15:59:14.121 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 15:59:14.124 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 15:59:14.125 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:59:14.126 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:59:14.127 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 15:59:14.129 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 15:59:14.130 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:59:14.132 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:59:14.133 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 15:59:14.136 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:59:14.137 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:59:14.139 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:59:14.142 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:59:14.144 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:59:14.146 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:14.149 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:14.151 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:59:14.157 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:59:14.158 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 15:59:14.160 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.161 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.164 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:59:14.166 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:59:14.168 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:59:14.170 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 15:59:14.177 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 15:59:14.182 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:14.185 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.187 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 15:59:14.190 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.192 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:59:14.201 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 15:59:14.204 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 15:59:14.205 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 15:59:14.206 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 15:59:14.207 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 15:59:14.208 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 15:59:14.216 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 70.4718ms
2024-01-19 15:59:14.219 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:59:14.221 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:59:14.222 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:14.224 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:59:14.226 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 68 application/json; charset=utf-8 105.5705ms
2024-01-19 15:59:43.291 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 15:59:43.300 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 15:59:43.302 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:59:43.304 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:59:43.305 +06:00 [DBG] The request is a preflight request.
2024-01-19 15:59:43.306 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 16.5225ms
2024-01-19 15:59:43.308 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 85
2024-01-19 15:59:43.312 +06:00 [DBG] POST requests are not supported
2024-01-19 15:59:43.313 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:59:43.315 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:59:43.316 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 15:59:43.318 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 15:59:43.319 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 15:59:43.321 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 15:59:43.322 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 15:59:43.324 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:59:43.326 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:59:43.327 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:59:43.329 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:59:43.330 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:59:43.332 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:43.333 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:43.335 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 15:59:43.337 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 15:59:43.339 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 15:59:43.340 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 15:59:43.342 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000000F": started reading request body.
2024-01-19 15:59:43.344 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000000F": done reading request body.
2024-01-19 15:59:43.345 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 15:59:43.347 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 15:59:43.348 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 15:59:43.350 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 15:59:43.353 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:59:43.356 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:43.358 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:43.360 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 15:59:43.361 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 15:59:43.363 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 15:59:43.364 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:59:43.365 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 15:59:43.366 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.368 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.370 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:59:43.371 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:59:43.373 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 15:59:43.374 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 15:59:43.378 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 15:59:43.380 +06:00 [DBG] The foreign key property 'City.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 15:59:43.382 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.383 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 15:59:43.385 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.388 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 15:59:43.390 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:43.392 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 15:59:43.394 +06:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-01-19 15:59:43.395 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 62.9258ms
2024-01-19 15:59:43.396 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 15:59:43.398 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:59:43.399 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.401 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:59:43.405 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 200 0 null 97.2287ms
2024-01-19 15:59:43.413 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 15:59:43.416 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 15:59:43.418 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 15:59:43.419 +06:00 [INF] CORS policy execution successful.
2024-01-19 15:59:43.420 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 15:59:43.422 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 15:59:43.424 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:59:43.426 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:59:43.427 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 15:59:43.429 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 15:59:43.431 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 15:59:43.434 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 15:59:43.436 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 15:59:43.438 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 15:59:43.439 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:43.441 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 15:59:43.443 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 15:59:43.445 +06:00 [DBG] Creating DbConnection.
2024-01-19 15:59:43.445 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 15:59:43.446 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.448 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.449 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 15:59:43.450 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 15:59:43.452 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 15:59:43.454 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 15:59:43.458 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 15:59:43.460 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:43.462 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 15:59:43.464 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.470 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 10ms reading results.
2024-01-19 15:59:43.474 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.476 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 15:59:43.479 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 15:59:43.483 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 15:59:43.485 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 15:59:43.486 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 15:59:43.487 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 15:59:43.490 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 15:59:43.493 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 53.2664ms
2024-01-19 15:59:43.495 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 15:59:43.497 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 15:59:43.498 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 15:59:43.500 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 15:59:43.502 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 150 application/json; charset=utf-8 88.6175ms
2024-01-19 16:00:28.228 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 16:00:28.238 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:00:28.239 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:00:28.241 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:00:28.242 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:00:28.243 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 16.491ms
2024-01-19 16:00:28.245 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 113
2024-01-19 16:00:28.251 +06:00 [DBG] POST requests are not supported
2024-01-19 16:00:28.253 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:00:28.254 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:00:28.254 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:00:28.255 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:00:28.257 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 16:00:28.259 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 16:00:28.260 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:00:28.262 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:00:28.264 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:00:28.266 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:00:28.269 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:00:28.271 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:00:28.272 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:00:28.274 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:00:28.275 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 16:00:28.277 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 16:00:28.281 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:00:28.283 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:00:28.285 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000015": started reading request body.
2024-01-19 16:00:28.286 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000015": done reading request body.
2024-01-19 16:00:28.288 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 16:00:28.290 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 16:00:28.292 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 16:00:28.294 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 16:00:28.296 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:00:28.299 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:28.301 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:28.302 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:00:28.303 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:00:28.305 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:00:28.307 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:00:28.308 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:00:28.309 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.311 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.312 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:00:28.313 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:00:28.315 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:00:28.317 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 16:00:28.334 +06:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 16:00:28.337 +06:00 [DBG] The foreign key property 'City.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:00:28.339 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.341 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:00:28.342 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.344 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:00:28.346 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:28.348 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:00:28.350 +06:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-01-19 16:00:28.351 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 78.7975ms
2024-01-19 16:00:28.353 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 16:00:28.354 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:00:28.356 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.357 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:00:28.359 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 200 0 null 113.5724ms
2024-01-19 16:00:28.370 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:00:28.373 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:00:28.375 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:00:28.376 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:00:28.377 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:00:28.380 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:00:28.383 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:00:28.385 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:00:28.386 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:00:28.388 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:00:28.390 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:00:28.391 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:00:28.394 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:00:28.396 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:00:28.398 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:00:28.400 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:00:28.402 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:00:28.405 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:00:28.406 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:00:28.407 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.409 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.412 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:00:28.413 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:00:28.414 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:00:28.416 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:00:28.420 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:00:28.423 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:28.424 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:28.426 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:28.429 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.431 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 8ms reading results.
2024-01-19 16:00:28.433 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.434 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:00:28.436 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:00:28.438 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:00:28.439 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:00:28.440 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:00:28.441 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:00:28.443 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:00:28.444 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 46.4148ms
2024-01-19 16:00:28.446 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:00:28.448 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:00:28.449 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:28.450 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:00:28.452 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 81.6799ms
2024-01-19 16:00:41.630 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:00:41.638 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:00:41.641 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:00:41.645 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:00:41.647 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:00:41.651 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:00:41.655 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:00:41.656 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:00:41.661 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:00:41.662 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:00:41.665 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:00:41.668 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:00:41.670 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:00:41.672 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:00:41.674 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:00:41.676 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:00:41.679 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:00:41.680 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:00:41.683 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:00:41.684 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:00:41.686 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:00:41.688 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:00:41.691 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:00:41.694 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-01-19 16:00:41.699 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 16:00:41.702 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:00:41.703 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:00:41.704 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:41.705 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:41.706 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:00:41.707 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 16:00:41.709 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:00:41.711 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:00:41.719 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:00:41.721 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:41.723 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:00:41.725 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:41.727 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:00:41.730 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:00:41.732 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:00:41.736 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:00:41.737 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:00:41.740 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:00:41.742 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:00:41.744 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 70.4702ms
2024-01-19 16:00:41.746 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:00:41.748 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:00:41.750 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:41.753 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:00:41.755 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 124.8319ms
2024-01-19 16:00:48.891 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:00:48.902 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:00:48.904 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:00:48.905 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:00:48.906 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:00:48.908 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:00:48.910 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:00:48.912 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:00:48.913 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:00:48.916 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:00:48.918 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:00:48.920 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:00:48.922 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:00:48.923 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:00:48.926 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:00:48.927 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:00:48.929 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:00:48.931 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:00:48.932 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:00:48.933 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:48.935 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:48.936 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:00:48.938 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:00:48.939 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:00:48.941 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:00:48.945 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:00:48.948 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:48.950 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:48.951 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:00:48.953 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:48.954 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:00:48.955 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:48.957 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:00:48.960 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:00:48.964 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:00:48.965 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:00:48.965 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:00:48.966 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:00:48.968 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:00:48.969 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 43.7096ms
2024-01-19 16:00:48.972 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:00:48.973 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:00:48.974 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:48.976 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:00:48.979 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 88.2018ms
2024-01-19 16:00:57.515 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:00:57.525 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:00:57.529 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:00:57.531 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:00:57.532 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:00:57.534 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:00:57.536 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:00:57.537 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:00:57.539 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:00:57.540 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:00:57.542 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:00:57.543 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:00:57.545 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:00:57.547 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:00:57.549 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:00:57.552 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:00:57.555 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:00:57.557 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:00:57.559 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:00:57.560 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:00:57.563 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:00:57.565 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:00:57.568 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:00:57.572 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:00:57.573 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:00:57.575 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:57.577 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:57.579 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:00:57.580 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:00:57.582 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:00:57.585 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:00:57.589 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:00:57.592 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:57.593 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:00:57.595 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:57.596 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:00:57.598 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:00:57.600 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:00:57.604 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:00:57.605 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:00:57.608 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:00:57.609 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:00:57.611 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 62.3588ms
2024-01-19 16:00:57.613 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:00:57.614 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:00:57.616 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:00:57.618 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:00:57.620 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 105.6715ms
2024-01-19 16:01:39.384 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/10 - null null
2024-01-19 16:01:39.393 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:01:39.394 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:01:39.396 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:01:39.397 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:01:39.398 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/10 - 204 null null 15.0294ms
2024-01-19 16:01:39.400 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/76/pointsofinterest/10 - application/json 116
2024-01-19 16:01:39.404 +06:00 [DBG] POST requests are not supported
2024-01-19 16:01:39.405 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:01:39.406 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:01:39.407 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest/10'
2024-01-19 16:01:39.409 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{userId}' is valid for the request path '/api/cities/76/pointsofinterest/10'
2024-01-19 16:01:39.411 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:01:39.412 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:01:39.417 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:01:39.419 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:01:39.421 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:01:39.423 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:01:39.425 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:01:39.427 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:01:39.428 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:01:39.431 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:01:39.432 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:01:39.434 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:01:39.436 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:01:39.438 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:01:39.439 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:01:39.441 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:01:39.443 +06:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2024-01-19 16:01:39.444 +06:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2024-01-19 16:01:39.446 +06:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2024-01-19 16:01:39.448 +06:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2024-01-19 16:01:39.449 +06:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2024-01-19 16:01:39.451 +06:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2024-01-19 16:01:39.452 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-19 16:01:39.454 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-19 16:01:39.456 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:01:39.457 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:01:39.459 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000021": started reading request body.
2024-01-19 16:01:39.460 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000021": done reading request body.
2024-01-19 16:01:39.466 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:01:39.468 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:01:39.470 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-19 16:01:39.472 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:01:39.474 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:01:39.476 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:01:39.477 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:01:39.478 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.480 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.481 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:01:39.482 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:01:39.484 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:01:39.485 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:01:39.498 +06:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:01:39.500 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.502 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:01:39.504 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.505 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:01:39.508 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(c => c.Id == __userId_0)'
2024-01-19 16:01:39.511 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u
                WHERE u.Id == @__userId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 16:01:39.513 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.514 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.516 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:01:39.517 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 16:01:39.518 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:01:39.520 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Id] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:01:39.527 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Id] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:01:39.530 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.531 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:01:39.533 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.534 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:01:39.540 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-01-19 16:01:39.544 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
            SELECT TOP(1) c.Id, c.Description, c.Name, c.userId
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 16:01:39.546 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.548 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.549 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:01:39.551 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:01:39.552 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:01:39.554 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:01:39.557 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:01:39.560 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.563 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.564 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 16:01:39.569 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.571 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:01:39.574 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.576 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.577 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:01:39.578 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 16:01:39.580 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:01:39.581 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 16:01:39.585 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 16:01:39.591 +06:00 [DBG] The navigation 'City.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.600 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.602 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.603 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 15ms reading results.
2024-01-19 16:01:39.605 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.607 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:01:39.608 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:01:39.610 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:01:39.615 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.621 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.629 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.632 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.638 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.642 +06:00 [DBG] The foreign key property 'PointOfInterest.userId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:01:39.644 +06:00 [DBG] The navigation 'PointOfInterest.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.647 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:01:39.650 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.652 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.654 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:01:39.656 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:01:39.657 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:01:39.659 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-19 16:01:39.668 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-19 16:01:39.672 +06:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:01:39.673 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.675 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 16:01:39.677 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.678 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:01:39.680 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:01:39.682 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:01:39.684 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:01:39.687 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:01:39.688 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:01:39.689 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:01:39.690 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter' and content type '' to write the response.
2024-01-19 16:01:39.692 +06:00 [INF] Executing CreatedResult, writing value of type 'null'.
2024-01-19 16:01:39.694 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 265.2761ms
2024-01-19 16:01:39.695 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:01:39.696 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:01:39.698 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.699 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:01:39.700 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/76/pointsofinterest/10 - 204 null null 300.4745ms
2024-01-19 16:01:39.711 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:01:39.715 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:01:39.716 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:01:39.718 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:01:39.719 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:01:39.720 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:01:39.722 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:01:39.724 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:01:39.725 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:01:39.727 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:01:39.730 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:01:39.733 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:01:39.735 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:01:39.737 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:01:39.739 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:01:39.741 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:01:39.743 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:01:39.745 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:01:39.749 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:01:39.750 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:01:39.752 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:01:39.753 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:01:39.755 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:01:39.758 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:01:39.759 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:01:39.760 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.762 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.765 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:01:39.767 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:01:39.769 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:01:39.770 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:01:39.773 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:01:39.776 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.778 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:01:39.779 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.781 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:01:39.783 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:01:39.784 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:01:39.787 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:01:39.787 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:01:39.790 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:01:39.791 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:01:39.793 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 53.7345ms
2024-01-19 16:01:39.795 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:01:39.796 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:01:39.797 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:01:39.799 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:01:39.801 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 90.0122ms
2024-01-19 16:02:19.609 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - null null
2024-01-19 16:02:19.622 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:02:19.623 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:02:19.624 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:02:19.627 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:02:19.630 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:02:19.632 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:02:19.634 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:02:19.636 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:02:19.638 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:02:19.640 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:02:19.642 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:02:19.645 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:02:19.647 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:02:19.648 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:02:19.650 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:02:19.651 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:02:19.653 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:02:19.655 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:19.657 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:19.659 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:02:19.661 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:19.663 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:02:19.666 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:02:19.667 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:02:19.669 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.670 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.672 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:19.673 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:19.674 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:19.675 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:19.679 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:19.682 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.684 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:02:19.685 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.687 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:19.691 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0)'
2024-01-19 16:02:19.696 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3], [Property: PointOfInterest.userId (int) Required FK Index, 4] }
        SELECT p.Id, p.CityId, p.Description, p.Name, p.userId
        FROM PointsOfInterest AS p
        WHERE p.CityId == @__cityId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 16:02:19.699 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.701 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.703 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:19.704 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:19.705 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:19.706 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:02:19.717 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:02:19.719 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:19.721 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.722 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:02:19.724 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.725 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:19.731 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:02:19.734 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:02:19.735 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:02:19.736 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:02:19.737 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:02:19.738 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:02:19.742 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 93.721ms
2024-01-19 16:02:19.745 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:02:19.746 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:02:19.748 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:19.750 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:02:19.752 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - 200 128 application/json; charset=utf-8 143.9192ms
2024-01-19 16:02:56.781 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/10 - null null
2024-01-19 16:02:56.788 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:02:56.789 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:02:56.791 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:02:56.792 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:02:56.793 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/10 - 204 null null 11.9272ms
2024-01-19 16:02:56.795 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/76/pointsofinterest/10 - application/json 105
2024-01-19 16:02:56.800 +06:00 [DBG] POST requests are not supported
2024-01-19 16:02:56.801 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:02:56.802 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:02:56.803 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest/10'
2024-01-19 16:02:56.804 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{userId}' is valid for the request path '/api/cities/76/pointsofinterest/10'
2024-01-19 16:02:56.806 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:02:56.808 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:02:56.809 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:02:56.811 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:02:56.813 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:02:56.815 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:02:56.817 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:02:56.819 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:02:56.821 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:02:56.823 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:02:56.825 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:02:56.826 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:02:56.828 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:56.830 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:56.831 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:02:56.833 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:56.834 +06:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2024-01-19 16:02:56.836 +06:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2024-01-19 16:02:56.838 +06:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2024-01-19 16:02:56.839 +06:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2024-01-19 16:02:56.841 +06:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2024-01-19 16:02:56.842 +06:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2024-01-19 16:02:56.843 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-19 16:02:56.845 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-19 16:02:56.847 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:02:56.848 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:02:56.850 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000029": started reading request body.
2024-01-19 16:02:56.852 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000029": done reading request body.
2024-01-19 16:02:56.853 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:02:56.856 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:02:56.857 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-19 16:02:56.859 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:02:56.861 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:02:56.864 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:02:56.865 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:02:56.866 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.868 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.869 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:56.871 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:56.872 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:56.874 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:56.889 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:56.891 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.893 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:02:56.896 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.897 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:56.900 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.901 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.903 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:56.904 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:56.905 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:56.907 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Id] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:56.915 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Id] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:56.918 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.920 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:02:56.921 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.923 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:56.925 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.928 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.930 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:56.931 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:56.933 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:02:56.934 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:02:56.938 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:02:56.941 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.943 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.945 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 16:02:56.947 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.950 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 16:02:56.953 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.958 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.959 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:56.961 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:56.962 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:56.965 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 16:02:56.970 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 16:02:56.974 +06:00 [DBG] The navigation 'City.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.976 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.978 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.979 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:02:56.981 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:56.983 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:56.984 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:02:56.985 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:02:56.987 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.989 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.991 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.992 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.994 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:56.996 +06:00 [DBG] The foreign key property 'PointOfInterest.userId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:02:56.998 +06:00 [DBG] The navigation 'PointOfInterest.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:57.000 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:02:57.002 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.003 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.005 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:57.007 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:57.008 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:57.010 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-19 16:02:57.017 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-19 16:02:57.020 +06:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:02:57.022 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.023 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:02:57.025 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.026 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:57.028 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:02:57.031 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:02:57.032 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:02:57.035 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:02:57.036 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:02:57.037 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:02:57.038 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter' and content type '' to write the response.
2024-01-19 16:02:57.040 +06:00 [INF] Executing CreatedResult, writing value of type 'null'.
2024-01-19 16:02:57.041 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 220.5528ms
2024-01-19 16:02:57.043 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:02:57.045 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:02:57.046 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.047 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:02:57.049 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/76/pointsofinterest/10 - 204 null null 254.8402ms
2024-01-19 16:02:57.058 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:02:57.062 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:02:57.063 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:02:57.064 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:02:57.065 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:02:57.067 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:02:57.069 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:02:57.070 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:02:57.072 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:02:57.074 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:02:57.076 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:02:57.078 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:02:57.080 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:02:57.082 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:02:57.084 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:02:57.085 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:02:57.087 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:02:57.089 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:02:57.090 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:57.092 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:57.093 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:02:57.095 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:02:57.097 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:02:57.100 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:02:57.101 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:02:57.103 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.104 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.106 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:02:57.107 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:02:57.108 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:02:57.110 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:57.113 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:02:57.116 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.117 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:02:57.119 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.121 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:02:57.123 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:02:57.124 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:02:57.127 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:02:57.128 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:02:57.130 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:02:57.132 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:02:57.133 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 49.4323ms
2024-01-19 16:02:57.135 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:02:57.136 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:02:57.137 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:02:57.139 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:02:57.141 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 83.4496ms
2024-01-19 16:03:01.759 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - null null
2024-01-19 16:03:01.771 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:03:01.774 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:01.777 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:01.778 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:03:01.779 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:03:01.781 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:03:01.783 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:03:01.784 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:03:01.786 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:01.788 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:01.790 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:01.793 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:01.795 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:01.797 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:03:01.799 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:03:01.800 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:03:01.802 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:03:01.804 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:01.806 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:01.809 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:03:01.810 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:01.814 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:01.816 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:01.817 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:03:01.819 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.821 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.823 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:01.824 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:01.826 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:03:01.827 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:03:01.832 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:03:01.835 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.836 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:03:01.838 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.840 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:03:01.843 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.844 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.845 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:01.847 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:01.848 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:03:01.850 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:03:01.856 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:03:01.859 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:01.860 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:01.863 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.865 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:03:01.867 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.869 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:01.871 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:03:01.874 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:03:01.874 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:03:01.875 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:03:01.876 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:03:01.878 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:03:01.880 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 83.4377ms
2024-01-19 16:03:01.882 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:03:01.883 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:01.884 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:01.885 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:03:01.887 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - 200 244 application/json; charset=utf-8 128.7762ms
2024-01-19 16:03:13.102 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:03:13.109 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:03:13.110 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:13.111 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:13.112 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:03:13.115 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:03:13.117 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:13.118 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:13.120 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:03:13.122 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:13.125 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:13.127 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:13.130 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:13.132 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:13.134 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:13.136 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:13.138 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:13.141 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:13.142 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:03:13.143 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:13.145 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:13.148 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:13.149 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:13.151 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:03:13.153 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:03:13.157 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:03:13.160 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:13.161 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:13.164 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:13.166 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:13.167 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 7ms reading results.
2024-01-19 16:03:13.169 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:13.170 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:13.171 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:03:13.174 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:03:13.175 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:03:13.176 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:03:13.177 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:03:13.178 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:03:13.180 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 46.4339ms
2024-01-19 16:03:13.183 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:13.185 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:13.186 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:13.187 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:03:13.189 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 87.4346ms
2024-01-19 16:03:14.229 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/78 - null null
2024-01-19 16:03:14.233 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:03:14.235 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:14.237 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:14.238 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/78'
2024-01-19 16:03:14.239 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/78'
2024-01-19 16:03:14.242 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-19 16:03:14.243 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-19 16:03:14.247 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:03:14.249 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:14.251 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:14.253 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:14.256 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:14.258 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:14.260 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:14.262 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:14.264 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-01-19 16:03:14.266 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-01-19 16:03:14.268 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 16:03:14.269 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 16:03:14.271 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-01-19 16:03:14.273 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-01-19 16:03:14.275 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-01-19 16:03:14.277 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2024-01-19 16:03:14.280 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 16:03:14.282 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 16:03:14.283 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 16:03:14.285 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-01-19 16:03:14.287 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 16:03:14.289 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:14.292 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:14.293 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:03:14.295 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:14.296 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:14.298 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:14.300 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:14.301 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:03:14.303 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:03:14.307 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:03:14.309 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:14.311 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:14.313 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:03:14.314 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:14.316 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:14.319 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:03:14.322 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:03:14.323 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:03:14.324 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:03:14.325 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:03:14.327 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2024-01-19 16:03:14.328 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 68.2213ms
2024-01-19 16:03:14.331 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-19 16:03:14.332 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:14.333 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:14.335 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:03:14.337 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/78 - 200 109 application/json; charset=utf-8 107.4827ms
2024-01-19 16:03:31.873 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/78 - null null
2024-01-19 16:03:31.876 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:03:31.877 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:31.879 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:31.880 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:03:31.881 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/78 - 204 null null 8.8065ms
2024-01-19 16:03:31.882 +06:00 [INF] Request starting HTTP/2 PUT https://localhost:7156/api/cities/78 - application/json 118
2024-01-19 16:03:31.889 +06:00 [DBG] PUT requests are not supported
2024-01-19 16:03:31.890 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:31.892 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:31.893 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/78'
2024-01-19 16:03:31.895 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.UpdateCity (CityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/78'
2024-01-19 16:03:31.898 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.UpdateCity (CityInfo.API)'
2024-01-19 16:03:31.899 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.UpdateCity (CityInfo.API)'
2024-01-19 16:03:31.903 +06:00 [INF] Route matched with {action = "UpdateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdateCity(Int32, CityInfo.API.Models.CityDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:03:31.905 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:31.908 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:31.911 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:31.913 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:31.915 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:31.917 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:31.919 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:31.922 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:03:31.923 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:03:31.926 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:31.928 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:31.929 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:03:31.932 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:31.935 +06:00 [DBG] Attempting to bind parameter 'city' of type 'CityInfo.API.Models.CityDto' ...
2024-01-19 16:03:31.938 +06:00 [DBG] Attempting to bind parameter 'city' of type 'CityInfo.API.Models.CityDto' using the name '' in request data ...
2024-01-19 16:03:31.940 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:03:31.942 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:03:31.944 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000035": started reading request body.
2024-01-19 16:03:31.946 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000035": done reading request body.
2024-01-19 16:03:31.950 +06:00 [DBG] Done attempting to bind parameter 'city' of type 'CityInfo.API.Models.CityDto'.
2024-01-19 16:03:31.952 +06:00 [DBG] Done attempting to bind parameter 'city' of type 'CityInfo.API.Models.CityDto'.
2024-01-19 16:03:31.953 +06:00 [DBG] Attempting to validate the bound parameter 'city' of type 'CityInfo.API.Models.CityDto' ...
2024-01-19 16:03:31.958 +06:00 [DBG] Done attempting to validate the bound parameter 'city' of type 'CityInfo.API.Models.CityDto'.
2024-01-19 16:03:31.961 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:31.964 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:31.965 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:03:31.966 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:31.968 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:31.969 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:31.971 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:31.973 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:03:31.974 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:03:31.987 +06:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:03:31.990 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:31.991 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:03:31.993 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:31.994 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:31.998 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.001 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.002 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:32.004 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:32.005 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:03:32.007 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:03:32.015 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:03:32.018 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:32.019 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.021 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 16:03:32.022 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.023 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:32.025 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:03:32.026 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:03:32.029 +06:00 [DBG] The unchanged property 'City.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:03:32.032 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:32.034 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:03:32.038 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.040 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.041 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:32.042 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 16:03:32.043 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:03:32.045 +06:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cities] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-01-19 16:03:32.060 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cities] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-01-19 16:03:32.065 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.066 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 16:03:32.068 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.069 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:32.072 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:32.076 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:03:32.078 +06:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-01-19 16:03:32.080 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.UpdateCity (CityInfo.API) in 163.1656ms
2024-01-19 16:03:32.081 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.UpdateCity (CityInfo.API)'
2024-01-19 16:03:32.083 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:32.084 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.087 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:03:32.088 +06:00 [INF] Request finished HTTP/2 PUT https://localhost:7156/api/cities/78 - 204 null null 206.0541ms
2024-01-19 16:03:32.103 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:03:32.108 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:03:32.109 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:32.111 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:32.112 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:03:32.113 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:03:32.116 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:32.117 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:32.118 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:03:32.120 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:32.122 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:32.124 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:32.125 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:32.127 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:32.129 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:32.131 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:32.134 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:32.136 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:32.137 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:03:32.138 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.140 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.141 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:32.142 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 16:03:32.143 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:32.144 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:03:32.150 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:03:32.153 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:32.154 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:32.156 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:32.157 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.159 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:03:32.160 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.162 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:03:32.165 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:03:32.168 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:03:32.169 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:03:32.170 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:03:32.170 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:03:32.172 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:03:32.174 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 45.7373ms
2024-01-19 16:03:32.176 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:32.178 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:32.180 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:32.182 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:03:32.185 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 269 application/json; charset=utf-8 81.722ms
2024-01-19 16:03:52.074 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/78 - null null
2024-01-19 16:03:52.079 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:03:52.081 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:52.083 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:52.085 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:03:52.087 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/78 - 204 null null 14.501ms
2024-01-19 16:03:52.090 +06:00 [INF] Request starting HTTP/2 DELETE https://localhost:7156/api/cities/78 - null null
2024-01-19 16:03:52.098 +06:00 [DBG] DELETE requests are not supported
2024-01-19 16:03:52.100 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:52.101 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:52.102 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/78'
2024-01-19 16:03:52.104 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.DeleteCity (CityInfo.API)' with route pattern 'api/cities/{cityId}' is valid for the request path '/api/cities/78'
2024-01-19 16:03:52.105 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.DeleteCity (CityInfo.API)'
2024-01-19 16:03:52.106 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.DeleteCity (CityInfo.API)'
2024-01-19 16:03:52.110 +06:00 [INF] Route matched with {action = "DeleteCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeleteCity(Int32) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:03:52.112 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:52.114 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:52.117 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:52.119 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:52.121 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:52.123 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:52.125 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:52.126 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:03:52.127 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:03:52.129 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:52.131 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:52.133 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:03:52.134 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:03:52.136 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:52.139 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:52.140 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:03:52.141 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.142 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.144 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:52.146 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:03:52.148 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 16:03:52.149 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:03:52.163 +06:00 [INF] Executed DbCommand (13ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:03:52.165 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.167 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 16:03:52.169 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.171 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:52.173 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.174 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.176 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:52.178 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:52.180 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:03:52.181 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:03:52.185 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:03:52.188 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:52.189 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.191 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 16:03:52.192 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.194 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:03:52.197 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:52.200 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:03:52.202 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:03:52.203 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:03:52.207 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.209 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.211 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:52.212 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:52.214 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:03:52.215 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Cities]
OUTPUT 1
WHERE [Id] = @p0;
2024-01-19 16:03:52.223 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Cities]
OUTPUT 1
WHERE [Id] = @p0;
2024-01-19 16:03:52.226 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.228 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:03:52.230 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.231 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:52.235 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:52.238 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:03:52.240 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:03:52.243 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:03:52.244 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:03:52.245 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:03:52.246 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:03:52.248 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 16:03:52.250 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.DeleteCity (CityInfo.API) in 126.8426ms
2024-01-19 16:03:52.252 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.DeleteCity (CityInfo.API)'
2024-01-19 16:03:52.253 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:52.255 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.257 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:03:52.259 +06:00 [INF] Request finished HTTP/2 DELETE https://localhost:7156/api/cities/78 - 200 27 application/json; charset=utf-8 169.1748ms
2024-01-19 16:03:52.456 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:03:52.460 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:03:52.462 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:03:52.463 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:03:52.464 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:03:52.465 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:03:52.467 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:52.469 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:52.470 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:03:52.472 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:03:52.474 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:03:52.475 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:03:52.478 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:03:52.480 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:03:52.482 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:52.484 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:03:52.487 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:03:52.490 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:03:52.491 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:03:52.493 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.495 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.496 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:03:52.498 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:03:52.499 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:03:52.501 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:03:52.508 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:03:52.511 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:52.513 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:03:52.515 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.517 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:03:52.518 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.520 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:03:52.522 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:03:52.525 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:03:52.526 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:03:52.527 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:03:52.528 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:03:52.529 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:03:52.531 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 49.1011ms
2024-01-19 16:03:52.532 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:03:52.534 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:03:52.535 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:03:52.536 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:03:52.538 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 150 application/json; charset=utf-8 81.3037ms
2024-01-19 16:04:04.042 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 16:04:04.048 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:04:04.050 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:04.051 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:04.053 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:04:04.054 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 12.2991ms
2024-01-19 16:04:04.055 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 113
2024-01-19 16:04:04.066 +06:00 [DBG] POST requests are not supported
2024-01-19 16:04:04.068 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:04.069 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:04.070 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:04:04.072 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:04:04.074 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 16:04:04.076 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 16:04:04.077 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:04:04.080 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:04.081 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:04.084 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:04.086 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:04.087 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:04.089 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:04:04.091 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:04:04.093 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 16:04:04.094 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 16:04:04.096 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:04:04.098 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:04:04.099 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000041": started reading request body.
2024-01-19 16:04:04.101 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:00000041": done reading request body.
2024-01-19 16:04:04.103 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 16:04:04.104 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 16:04:04.106 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 16:04:04.107 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 16:04:04.109 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:04.112 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:04.114 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:04.115 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:04:04.116 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:04:04.119 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:04:04.121 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:04.122 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:04:04.123 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.124 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.126 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:04.127 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:04.129 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:04:04.130 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 16:04:04.139 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 16:04:04.142 +06:00 [DBG] The foreign key property 'City.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:04:04.144 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.145 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:04:04.147 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.148 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:04.151 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:04.154 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:04:04.155 +06:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-01-19 16:04:04.156 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 66.7266ms
2024-01-19 16:04:04.158 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 16:04:04.159 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:04.161 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.163 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:04.165 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 200 0 null 109.9361ms
2024-01-19 16:04:04.179 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:04:04.192 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:04:04.196 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:04.198 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:04.200 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:04:04.202 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:04:04.204 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:04:04.205 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:04:04.206 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:04:04.208 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:04.210 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:04.211 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:04.215 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:04.216 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:04.218 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:04:04.220 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:04:04.221 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:04.223 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:04.224 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:04:04.225 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.226 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.228 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:04.229 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:04.230 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:04:04.232 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:04:04.236 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:04:04.238 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:04.239 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:04.241 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:04.242 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.244 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:04:04.245 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.247 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:04.248 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:04:04.251 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:04:04.252 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:04:04.253 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:04:04.254 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:04:04.255 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:04:04.256 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 38.2997ms
2024-01-19 16:04:04.259 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:04:04.260 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:04.262 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:04.263 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:04.265 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 86.8861ms
2024-01-19 16:04:11.327 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:04:11.332 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:04:11.335 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:11.337 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:11.338 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:04:11.339 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:04:11.341 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:11.342 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:11.344 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:04:11.348 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:11.353 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:11.354 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:11.357 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:11.358 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:11.360 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:11.363 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:11.364 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:11.366 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:04:11.368 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:11.369 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:11.371 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:11.372 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:11.374 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:11.376 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:11.377 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:04:11.379 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:11.381 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:11.382 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:11.384 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:11.385 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:04:11.388 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:11.391 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:11.394 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:11.396 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:11.398 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:11.400 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:11.402 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:04:11.403 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:04:11.406 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:04:11.408 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:04:11.411 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:04:11.413 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:04:11.415 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 55.0064ms
2024-01-19 16:04:11.417 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:11.418 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:11.420 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:11.421 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:11.423 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 95.7905ms
2024-01-19 16:04:15.802 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - null null
2024-01-19 16:04:15.808 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:04:15.811 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:15.812 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:15.814 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:04:15.816 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:04:15.819 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:15.821 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:15.823 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:04:15.827 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:15.829 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:15.832 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:15.835 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:15.837 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:15.838 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:15.841 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:15.843 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:15.845 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:04:15.847 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:15.848 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:15.850 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:15.852 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:15.853 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:15.856 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:15.858 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:04:15.859 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.861 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.863 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:15.864 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:15.865 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:04:15.866 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:15.869 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:15.871 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.873 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:15.875 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.877 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:15.879 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.881 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.882 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:15.883 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:15.885 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:04:15.886 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:04:15.892 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:04:15.894 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:15.896 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:15.897 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.898 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 16:04:15.900 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.901 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:15.903 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:04:15.906 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:04:15.907 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:04:15.908 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:04:15.909 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:04:15.910 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:04:15.912 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 73.3079ms
2024-01-19 16:04:15.914 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:15.915 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:15.916 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:15.917 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:15.920 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - 200 244 application/json; charset=utf-8 117.9308ms
2024-01-19 16:04:45.061 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest/32 - null null
2024-01-19 16:04:45.071 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:04:45.072 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:45.073 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:45.074 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest/32'
2024-01-19 16:04:45.076 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/76/pointsofinterest/32'
2024-01-19 16:04:45.079 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-01-19 16:04:45.081 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-01-19 16:04:45.089 +06:00 [INF] Route matched with {action = "GetPointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] GetPointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:04:45.092 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:45.094 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:45.095 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:45.098 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:45.100 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:45.102 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:45.104 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:45.106 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:45.108 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:04:45.110 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:45.112 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:45.115 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:45.117 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:45.119 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' ...
2024-01-19 16:04:45.121 +06:00 [DBG] Attempting to bind parameter 'pointofinterestid' of type 'System.Int32' using the name 'pointofinterestid' in request data ...
2024-01-19 16:04:45.122 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2024-01-19 16:04:45.124 +06:00 [DBG] Done attempting to bind parameter 'pointofinterestid' of type 'System.Int32'.
2024-01-19 16:04:45.126 +06:00 [DBG] Attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32' ...
2024-01-19 16:04:45.128 +06:00 [DBG] Done attempting to validate the bound parameter 'pointofinterestid' of type 'System.Int32'.
2024-01-19 16:04:45.131 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:45.134 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:45.134 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:04:45.136 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.137 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.139 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:45.140 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:45.143 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:04:45.144 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:45.159 +06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:45.162 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.164 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:45.166 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.168 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:45.172 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .Where(p => p.CityId == __cityId_0 && p.Id == __pointOfInterestId_1)
    .FirstOrDefault()'
2024-01-19 16:04:45.177 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<PointOfInterest>(
    asyncEnumerable: new SingleQueryingEnumerable<PointOfInterest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3], [Property: PointOfInterest.userId (int) Required FK Index, 4] }
            SELECT TOP(1) p.Id, p.CityId, p.Description, p.Name, p.userId
            FROM PointsOfInterest AS p
            WHERE (p.CityId == @__cityId_0) && (p.Id == @__pointOfInterestId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 16:04:45.181 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.183 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.185 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:45.186 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:45.188 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:04:45.190 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2024-01-19 16:04:45.197 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2024-01-19 16:04:45.200 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:45.201 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.203 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:04:45.205 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.207 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:45.210 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:04:45.213 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:04:45.215 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:04:45.216 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:04:45.217 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:04:45.219 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.PointOfInterestDto'.
2024-01-19 16:04:45.221 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API) in 118.4972ms
2024-01-19 16:04:45.222 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointOfInterest (CityInfo.API)'
2024-01-19 16:04:45.224 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:45.225 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:45.226 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:45.228 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest/32 - 200 126 application/json; charset=utf-8 167.9149ms
2024-01-19 16:04:50.067 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/32 - null null
2024-01-19 16:04:50.070 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:04:50.071 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:50.072 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:50.073 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:04:50.074 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/32 - 204 null null 8.2192ms
2024-01-19 16:04:50.077 +06:00 [INF] Request starting HTTP/2 PUT https://localhost:7156/api/cities/76/pointsofinterest/32 - application/json 129
2024-01-19 16:04:50.083 +06:00 [DBG] PUT requests are not supported
2024-01-19 16:04:50.084 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:50.085 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:50.086 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest/32'
2024-01-19 16:04:50.088 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointofinterestid}' is valid for the request path '/api/cities/76/pointsofinterest/32'
2024-01-19 16:04:50.090 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2024-01-19 16:04:50.092 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2024-01-19 16:04:50.097 +06:00 [INF] Route matched with {action = "UpdatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] UpdatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForUpdateDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:04:50.099 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:50.101 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:50.102 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:50.105 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:50.107 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:50.108 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:50.110 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:50.112 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:50.113 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:04:50.115 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:50.117 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:50.118 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:50.120 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:50.121 +06:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-01-19 16:04:50.123 +06:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-01-19 16:04:50.125 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-01-19 16:04:50.126 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-01-19 16:04:50.128 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-01-19 16:04:50.130 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-01-19 16:04:50.131 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2024-01-19 16:04:50.133 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' using the name '' in request data ...
2024-01-19 16:04:50.135 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:04:50.136 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:04:50.139 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000004D": started reading request body.
2024-01-19 16:04:50.140 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000004D": done reading request body.
2024-01-19 16:04:50.144 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2024-01-19 16:04:50.146 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2024-01-19 16:04:50.148 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto' ...
2024-01-19 16:04:50.151 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForUpdateDto'.
2024-01-19 16:04:50.154 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:50.158 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:50.159 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:04:50.161 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.163 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.165 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:50.166 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:50.169 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 16:04:50.170 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:50.174 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:50.177 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.179 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:50.181 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.183 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:50.185 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.187 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.189 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:50.191 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:50.193 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:04:50.195 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2024-01-19 16:04:50.198 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2024-01-19 16:04:50.201 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:50.203 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.204 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:04:50.207 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.208 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:50.212 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:04:50.213 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:04:50.214 +06:00 [DBG] The unchanged property 'PointOfInterest.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:04:50.216 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:50.218 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:04:50.220 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.221 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.223 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:50.224 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:50.226 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:04:50.228 +06:00 [DBG] Executing DbCommand [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [PointsOfInterest] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-01-19 16:04:50.236 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [PointsOfInterest] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-01-19 16:04:50.238 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.240 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:50.243 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.244 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:50.246 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:50.249 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:04:50.251 +06:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-01-19 16:04:50.252 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API) in 143.6306ms
2024-01-19 16:04:50.253 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.UpdatePointOfInterest (CityInfo.API)'
2024-01-19 16:04:50.255 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:50.256 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.264 +06:00 [DBG] Disposed connection to database '' on server '' (7ms).
2024-01-19 16:04:50.266 +06:00 [INF] Request finished HTTP/2 PUT https://localhost:7156/api/cities/76/pointsofinterest/32 - 204 null null 189.3714ms
2024-01-19 16:04:50.268 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:04:50.272 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:04:50.274 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:50.275 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:50.277 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:04:50.279 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:04:50.281 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:50.283 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:50.284 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:04:50.286 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:50.288 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:50.290 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:50.293 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:50.294 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:50.296 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:50.297 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:50.299 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:50.301 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:04:50.303 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:50.305 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:50.306 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:50.308 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:50.312 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:50.314 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:50.315 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:04:50.317 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.318 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.320 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:50.321 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:50.323 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:04:50.325 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:50.330 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:50.333 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.335 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:50.337 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.338 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:50.340 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:04:50.341 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:04:50.345 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:04:50.346 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:04:50.349 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:04:50.350 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:04:50.352 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 56.2832ms
2024-01-19 16:04:50.354 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:50.356 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:50.358 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:50.360 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:50.362 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 93.6648ms
2024-01-19 16:04:54.399 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - null null
2024-01-19 16:04:54.409 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:04:54.411 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:04:54.413 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:04:54.414 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:04:54.416 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:04:54.418 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:54.419 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:54.422 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:04:54.426 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:04:54.428 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:04:54.430 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:04:54.433 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:04:54.436 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:04:54.438 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:54.439 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:04:54.441 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:54.444 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:04:54.446 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:54.448 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:54.450 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:04:54.452 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:04:54.454 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:04:54.457 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:04:54.458 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:04:54.459 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.461 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.463 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:54.464 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:54.465 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:04:54.467 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:54.471 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:04:54.474 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.475 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:04:54.477 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.479 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:54.481 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.483 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.484 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:04:54.485 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:04:54.487 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:04:54.488 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:04:54.494 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:04:54.496 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:54.498 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:04:54.500 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.502 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:04:54.504 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.506 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:04:54.509 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:04:54.512 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:04:54.513 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:04:54.514 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:04:54.515 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:04:54.516 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:04:54.518 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 80.7951ms
2024-01-19 16:04:54.520 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:04:54.521 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:04:54.523 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:04:54.525 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:04:54.527 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - 200 247 application/json; charset=utf-8 127.5698ms
2024-01-19 16:05:02.011 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/32 - null null
2024-01-19 16:05:02.016 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:05:02.018 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:02.019 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:02.021 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:05:02.022 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/32 - 204 null null 11.2274ms
2024-01-19 16:05:02.024 +06:00 [INF] Request starting HTTP/2 DELETE https://localhost:7156/api/cities/76/pointsofinterest/32 - null null
2024-01-19 16:05:02.032 +06:00 [DBG] DELETE requests are not supported
2024-01-19 16:05:02.033 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:02.035 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:02.036 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest/32'
2024-01-19 16:05:02.038 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{pointOfInterestId}' is valid for the request path '/api/cities/76/pointsofinterest/32'
2024-01-19 16:05:02.040 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-01-19 16:05:02.041 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-01-19 16:05:02.046 +06:00 [INF] Route matched with {action = "DeletePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] DeletePointOfInterest(Int32, Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:02.049 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:02.052 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:02.054 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:02.055 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:02.057 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:02.059 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:02.061 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:02.062 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:02.063 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:02.065 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:02.068 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:02.069 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:02.071 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:02.072 +06:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-01-19 16:05:02.074 +06:00 [DBG] Attempting to bind parameter 'pointOfInterestId' of type 'System.Int32' using the name 'pointOfInterestId' in request data ...
2024-01-19 16:05:02.076 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-01-19 16:05:02.078 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterestId' of type 'System.Int32'.
2024-01-19 16:05:02.079 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32' ...
2024-01-19 16:05:02.081 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterestId' of type 'System.Int32'.
2024-01-19 16:05:02.084 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:02.087 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:02.088 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:05:02.089 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.091 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.093 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:02.094 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:02.096 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:02.097 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:02.101 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:02.104 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.106 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:02.107 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.109 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:02.111 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.113 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.115 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:02.116 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:02.118 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:05:02.119 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2024-01-19 16:05:02.123 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32), @__pointOfInterestId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0 AND [p].[Id] = @__pointOfInterestId_1
2024-01-19 16:05:02.126 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:02.127 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.129 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:05:02.131 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.132 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:02.134 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:02.137 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:05:02.138 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:05:02.139 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:05:02.141 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.143 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.144 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:02.145 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:02.147 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:02.149 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [PointsOfInterest]
OUTPUT 1
WHERE [Id] = @p0;
2024-01-19 16:05:02.160 +06:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [PointsOfInterest]
OUTPUT 1
WHERE [Id] = @p0;
2024-01-19 16:05:02.163 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.165 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:02.167 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.169 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:02.172 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:02.174 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:05:02.176 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:02.179 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:02.180 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:05:02.181 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:05:02.183 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:05:02.185 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 16:05:02.187 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API) in 127.7959ms
2024-01-19 16:05:02.188 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.DeletePointOfInterest (CityInfo.API)'
2024-01-19 16:05:02.189 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:02.191 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.192 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:05:02.194 +06:00 [INF] Request finished HTTP/2 DELETE https://localhost:7156/api/cities/76/pointsofinterest/32 - 200 28 application/json; charset=utf-8 170.0441ms
2024-01-19 16:05:02.343 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:05:02.348 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:05:02.355 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:02.356 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:02.358 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:05:02.361 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:05:02.375 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:02.377 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:02.379 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:02.381 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:02.384 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:02.385 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:02.388 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:02.390 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:02.392 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:02.395 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:02.396 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:02.398 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:02.400 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:02.402 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:02.404 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:02.407 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:02.410 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:02.412 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:02.413 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:05:02.414 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.416 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.417 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:02.419 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:02.420 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:02.421 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:02.424 +06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:02.427 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.428 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:02.429 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.430 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (0ms).
2024-01-19 16:05:02.432 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:05:02.433 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:02.436 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:02.437 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:05:02.439 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:05:02.441 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:05:02.443 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 50.4189ms
2024-01-19 16:05:02.444 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:02.445 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:02.446 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:02.447 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:05:02.450 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 106.2925ms
2024-01-19 16:05:07.140 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - null null
2024-01-19 16:05:07.146 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:05:07.148 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:07.150 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:07.151 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:05:07.153 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:05:07.156 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:07.157 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:07.159 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:07.161 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:07.164 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:07.166 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:07.168 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:07.170 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:07.172 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:07.174 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:07.176 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:07.178 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:07.180 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:07.181 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:07.183 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:07.185 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:07.187 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:07.189 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:07.189 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:05:07.190 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.192 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.194 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:07.195 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:07.197 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:05:07.199 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:07.202 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:07.205 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.207 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:07.209 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.211 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:07.213 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.214 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.216 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:07.217 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:07.219 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:07.220 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:05:07.223 +06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:05:07.226 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:07.228 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.230 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:05:07.231 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.233 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:07.235 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:07.239 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:07.240 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:05:07.241 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:05:07.242 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:05:07.244 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:05:07.246 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 73.4367ms
2024-01-19 16:05:07.248 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:07.249 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:07.250 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:07.252 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:05:07.254 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - 200 117 application/json; charset=utf-8 114.6877ms
2024-01-19 16:05:27.164 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/10 - null null
2024-01-19 16:05:27.169 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:05:27.170 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:27.172 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:27.173 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:05:27.175 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities/76/pointsofinterest/10 - 204 null null 11.1111ms
2024-01-19 16:05:27.177 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities/76/pointsofinterest/10 - application/json 116
2024-01-19 16:05:27.186 +06:00 [DBG] POST requests are not supported
2024-01-19 16:05:27.187 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:27.189 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:27.191 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest/10'
2024-01-19 16:05:27.192 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest/{userId}' is valid for the request path '/api/cities/76/pointsofinterest/10'
2024-01-19 16:05:27.194 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:05:27.195 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:05:27.197 +06:00 [INF] Route matched with {action = "CreatePointOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.PointOfInterestDto]] CreatePointOfInterest(Int32, Int32, CityInfo.API.Models.PointOfInterestForCreationDto) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:27.199 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:27.201 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:27.203 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:27.206 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:27.207 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:27.209 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:27.211 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:27.213 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:27.214 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:27.216 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:27.218 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:27.219 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:27.221 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:27.223 +06:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2024-01-19 16:05:27.224 +06:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2024-01-19 16:05:27.227 +06:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2024-01-19 16:05:27.229 +06:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2024-01-19 16:05:27.230 +06:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2024-01-19 16:05:27.232 +06:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2024-01-19 16:05:27.233 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-19 16:05:27.235 +06:00 [DBG] Attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' using the name '' in request data ...
2024-01-19 16:05:27.237 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:05:27.238 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:05:27.240 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000005D": started reading request body.
2024-01-19 16:05:27.241 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000005D": done reading request body.
2024-01-19 16:05:27.244 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:05:27.247 +06:00 [DBG] Done attempting to bind parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:05:27.248 +06:00 [DBG] Attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto' ...
2024-01-19 16:05:27.250 +06:00 [DBG] Done attempting to validate the bound parameter 'pointOfInterest' of type 'CityInfo.API.Models.PointOfInterestForCreationDto'.
2024-01-19 16:05:27.252 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:27.254 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:27.255 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:05:27.256 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.257 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.259 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:27.261 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:27.263 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:05:27.265 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:27.269 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:27.271 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.273 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:27.275 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.276 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:27.278 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.280 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.282 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:27.283 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:27.285 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:27.286 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Id] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:27.295 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Id] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:27.297 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.299 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 16:05:27.301 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.302 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:27.304 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.306 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.308 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:27.309 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:27.311 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:05:27.313 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:05:27.317 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 16:05:27.320 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.322 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.323 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:05:27.325 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.327 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:27.329 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.331 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.332 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:27.333 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:27.335 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:27.336 +06:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 16:05:27.341 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-01-19 16:05:27.344 +06:00 [DBG] The navigation 'City.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.345 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.347 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.349 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:05:27.351 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.352 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:27.354 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 16:05:27.355 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 16:05:27.356 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'City.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.358 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'PointOfInterest.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.361 +06:00 [DBG] The navigation 'PointOfInterest.City' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.364 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.365 +06:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.PointsOfInterest'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.367 +06:00 [DBG] The foreign key property 'PointOfInterest.userId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:05:27.369 +06:00 [DBG] The navigation 'PointOfInterest.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.370 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 16:05:27.371 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.373 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.374 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:27.376 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:27.378 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:05:27.380 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-19 16:05:27.387 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 200), @p2='?' (Size = 50), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [PointsOfInterest] ([CityId], [Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2024-01-19 16:05:27.389 +06:00 [DBG] The foreign key property 'PointOfInterest.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 16:05:27.390 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.393 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:05:27.394 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.396 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:27.397 +06:00 [DBG] An entity of type 'PointOfInterest' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:27.399 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 16:05:27.400 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:27.402 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:27.403 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:05:27.404 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:05:27.405 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter' and content type '' to write the response.
2024-01-19 16:05:27.406 +06:00 [INF] Executing CreatedResult, writing value of type 'null'.
2024-01-19 16:05:27.407 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API) in 197.5379ms
2024-01-19 16:05:27.409 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.CreatePointOfInterest (CityInfo.API)'
2024-01-19 16:05:27.410 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:27.411 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.412 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:05:27.413 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities/76/pointsofinterest/10 - 204 null null 235.9808ms
2024-01-19 16:05:27.425 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 16:05:27.430 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:05:27.431 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:27.432 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:27.433 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:05:27.434 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 16:05:27.436 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:27.437 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:27.438 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:27.441 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:27.445 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:27.447 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:27.448 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:27.450 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:27.452 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:27.453 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:27.455 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:27.457 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:27.458 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:27.460 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:27.462 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:27.463 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:27.465 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:27.467 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:27.468 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:05:27.470 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.471 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.472 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:27.473 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:27.474 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:27.476 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:27.480 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:27.482 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.484 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:27.485 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.487 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:27.489 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 16:05:27.490 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:27.493 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:27.493 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:05:27.496 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:05:27.497 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:05:27.498 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 46.4693ms
2024-01-19 16:05:27.503 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:27.506 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:27.507 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:27.508 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:05:27.511 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 85.9003ms
2024-01-19 16:05:39.168 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/10/pointsofinterest - null null
2024-01-19 16:05:39.180 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:05:39.182 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:39.187 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:39.189 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/10/pointsofinterest'
2024-01-19 16:05:39.192 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/10/pointsofinterest'
2024-01-19 16:05:39.197 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:39.202 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:39.207 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:39.216 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:39.222 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:39.225 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:39.227 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:39.229 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:39.230 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:39.233 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:39.236 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:39.238 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:39.240 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:39.244 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:39.246 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:39.248 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:39.251 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:39.254 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:39.256 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:05:39.257 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:39.259 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:39.261 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:39.262 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:39.264 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:05:39.266 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:39.274 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:39.277 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:39.278 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:05:39.281 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:39.283 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:39.286 +06:00 [INF] City with id 10 wasn't found when accessing points of interest.
2024-01-19 16:05:39.287 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:39.292 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:39.293 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 16:05:39.297 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 16:05:39.300 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 16:05:39.302 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 71.7768ms
2024-01-19 16:05:39.305 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:39.308 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:39.309 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:39.311 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:05:39.313 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/10/pointsofinterest - 404 162 application/problem+json; charset=utf-8 145.0607ms
2024-01-19 16:05:52.762 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - null null
2024-01-19 16:05:52.766 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:05:52.768 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:05:52.770 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:05:52.771 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:05:52.772 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/76/pointsofinterest'
2024-01-19 16:05:52.775 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:52.776 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:52.778 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 16:05:52.780 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:05:52.782 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:05:52.784 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:05:52.787 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:05:52.789 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:05:52.790 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:52.792 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 16:05:52.794 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:52.796 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 16:05:52.798 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:52.799 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:52.801 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 16:05:52.802 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 16:05:52.804 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:05:52.806 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:05:52.807 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 16:05:52.808 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.810 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.811 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:52.812 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:52.814 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:52.815 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:52.833 +06:00 [INF] Executed DbCommand (18ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:05:52.836 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.838 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 16:05:52.840 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.842 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:52.843 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.845 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.846 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:05:52.847 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:05:52.848 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:05:52.850 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:05:52.855 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
WHERE [p].[CityId] = @__cityId_0
2024-01-19 16:05:52.858 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:52.859 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:05:52.861 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.863 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:05:52.865 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.866 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:05:52.870 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:05:52.874 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:05:52.875 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:05:52.876 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:05:52.877 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:05:52.879 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:05:52.880 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 90.005ms
2024-01-19 16:05:52.883 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:05:52.884 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:05:52.885 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:05:52.886 +06:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-01-19 16:05:52.887 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/76/pointsofinterest - 200 244 application/json; charset=utf-8 124.5633ms
2024-01-19 16:06:13.838 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:06:13.848 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - null null
2024-01-19 16:06:13.860 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:06:13.867 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:06:13.869 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:06:13.871 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:06:13.873 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:06:13.874 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:06:13.875 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:06:13.876 +06:00 [DBG] 2 candidate(s) found for the request path '/api/cities/pointsofinterest'
2024-01-19 16:06:13.877 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:06:13.879 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/pointsofinterest' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 16:06:13.881 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:06:13.883 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 16:06:13.885 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:06:13.889 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:06:13.891 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:06:13.893 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:06:13.895 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:06:13.898 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:06:13.900 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:06:13.900 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointsOfInterestReturnDto]]] GetPointsOfInterest() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:06:13.903 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:06:13.906 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:06:13.907 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:06:13.910 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:06:13.912 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:06:13.914 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:06:13.916 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:06:13.917 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:06:13.919 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:06:13.920 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:06:13.923 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:06:13.924 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:06:13.925 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 16:06:13.928 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:13.927 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:06:13.930 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:13.935 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:06:13.936 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:06:13.940 +06:00 [DBG] Compiling query expression: 
'DbSet<PointOfInterest>()
    .OrderBy(c => c.Name)'
2024-01-19 16:06:13.941 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2024-01-19 16:06:13.944 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2024-01-19 16:06:13.945 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:06:13.945 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<PointOfInterest>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: PointOfInterest.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: PointOfInterest.CityId (int) Required FK Index, 1], [Property: PointOfInterest.Description (string) Required MaxLength(200), 2], [Property: PointOfInterest.Name (string) Required MaxLength(50), 3], [Property: PointOfInterest.userId (int) Required FK Index, 4] }
        SELECT p.Id, p.CityId, p.Description, p.Name, p.userId
        FROM PointsOfInterest AS p
        ORDER BY p.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, PointOfInterest>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 16:06:13.951 +06:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:06:13.957 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:06:13.959 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:13.959 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 16:06:13.961 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:13.962 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:13.963 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:13.971 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:13.972 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 13ms reading results.
2024-01-19 16:06:13.974 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:13.976 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:13.978 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 16:06:13.980 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:06:13.981 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:06:13.982 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:06:13.986 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:06:13.987 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-01-19 16:06:13.988 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:06:13.990 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 16:06:13.990 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:06:13.994 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:06:13.994 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 16:06:13.995 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:06:13.998 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:13.999 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 87.6355ms
2024-01-19 16:06:14.003 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:14.005 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:06:14.006 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:14.007 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:06:14.011 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 13ms reading results.
2024-01-19 16:06:14.012 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:14.014 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:14.015 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 16:06:14.016 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:06:14.019 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 180.9854ms
2024-01-19 16:06:14.026 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:06:14.030 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:06:14.030 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:06:14.032 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:06:14.033 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:06:14.036 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointsOfInterestReturnDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:06:14.041 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API) in 116.2548ms
2024-01-19 16:06:14.043 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:06:14.044 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:06:14.045 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:14.046 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:06:14.048 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - 200 220 application/json; charset=utf-8 200.5233ms
2024-01-19 16:06:41.660 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - null null
2024-01-19 16:06:41.671 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 16:06:41.672 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:06:41.674 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:06:41.675 +06:00 [DBG] The request is a preflight request.
2024-01-19 16:06:41.676 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/users/authenticate - 204 null null 16.1994ms
2024-01-19 16:06:41.677 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/users/authenticate - application/json 47
2024-01-19 16:06:41.683 +06:00 [DBG] POST requests are not supported
2024-01-19 16:06:41.684 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:06:41.686 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:06:41.686 +06:00 [DBG] 1 candidate(s) found for the request path '/api/users/authenticate'
2024-01-19 16:06:41.688 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)' with route pattern 'api/users/authenticate' is valid for the request path '/api/users/authenticate'
2024-01-19 16:06:41.690 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 16:06:41.692 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 16:06:41.694 +06:00 [INF] Route matched with {action = "Authenticate", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Authenticate(CityInfo.API.Models.UserForLoginDto) on controller CityInfo.API.Controllers.UsersController (CityInfo.API).
2024-01-19 16:06:41.697 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:06:41.699 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:06:41.701 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:06:41.703 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:06:41.705 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:06:41.706 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 16:06:41.709 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.UsersController (CityInfo.API)
2024-01-19 16:06:41.711 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 16:06:41.713 +06:00 [DBG] Attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' using the name '' in request data ...
2024-01-19 16:06:41.714 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 16:06:41.715 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 16:06:41.718 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000006B": started reading request body.
2024-01-19 16:06:41.719 +06:00 [DBG] Connection id "0HN0OQEBIUA5J", Request id "0HN0OQEBIUA5J:0000006B": done reading request body.
2024-01-19 16:06:41.721 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 16:06:41.723 +06:00 [DBG] Done attempting to bind parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 16:06:41.724 +06:00 [DBG] Attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto' ...
2024-01-19 16:06:41.727 +06:00 [DBG] Done attempting to validate the bound parameter 'userObj' of type 'CityInfo.API.Models.UserForLoginDto'.
2024-01-19 16:06:41.729 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:06:41.732 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:06:41.733 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:06:41.735 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.736 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.738 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:06:41.739 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:06:41.741 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:06:41.742 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:06:41.749 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[userName] = @__userName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 16:06:41.751 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.753 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 1ms reading results.
2024-01-19 16:06:41.754 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.756 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:06:41.758 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.760 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.762 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:06:41.763 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:06:41.765 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:06:41.766 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 16:06:41.770 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 16:06:41.772 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:41.774 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.776 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 16:06:41.778 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.779 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:06:41.784 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:06:41.787 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:06:41.788 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:06:41.788 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:06:41.789 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:06:41.792 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 16:06:41.794 +06:00 [INF] Executed action CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API) in 87.4334ms
2024-01-19 16:06:41.795 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.UsersController.Authenticate (CityInfo.API)'
2024-01-19 16:06:41.797 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:06:41.798 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:41.800 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:06:41.801 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/users/authenticate - 200 28 application/json; charset=utf-8 123.8532ms
2024-01-19 16:06:43.121 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:06:43.128 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:06:43.131 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:06:43.133 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:06:43.134 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:06:43.136 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:06:43.138 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:06:43.140 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:06:43.141 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:06:43.144 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:06:43.146 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:06:43.147 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:06:43.150 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:06:43.152 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:06:43.153 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:06:43.156 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:06:43.158 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:06:43.161 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:06:43.163 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:06:43.164 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:43.167 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:43.168 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:06:43.169 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:06:43.171 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:06:43.172 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:06:43.176 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:06:43.179 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:43.180 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:43.181 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:06:43.182 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:43.184 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 16:06:43.185 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:43.186 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 16:06:43.189 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:06:43.193 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:06:43.194 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:06:43.195 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:06:43.196 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:06:43.198 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:06:43.200 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 46.2438ms
2024-01-19 16:06:43.201 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:06:43.202 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:06:43.204 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:06:43.205 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:06:43.208 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 87.4213ms
2024-01-19 16:07:00.613 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:07:00.615 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - null null
2024-01-19 16:07:00.631 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:07:00.635 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:07:00.636 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:07:00.638 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:07:00.639 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:07:00.640 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:07:00.642 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:07:00.644 +06:00 [DBG] 2 candidate(s) found for the request path '/api/cities/pointsofinterest'
2024-01-19 16:07:00.646 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:07:00.648 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/pointsofinterest' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 16:07:00.650 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:07:00.653 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 16:07:00.654 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:07:00.656 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:07:00.657 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:07:00.659 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:07:00.662 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:07:00.663 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointsOfInterestReturnDto]]] GetPointsOfInterest() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:07:00.665 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:07:00.668 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:07:00.669 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:07:00.671 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:07:00.674 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:07:00.676 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:07:00.678 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:07:00.680 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:07:00.682 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:07:00.684 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:07:00.687 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:07:00.689 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:07:00.691 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:07:00.693 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:07:00.695 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:07:00.698 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:07:00.698 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 16:07:00.701 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:07:00.702 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.703 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 16:07:00.705 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.707 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.709 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:07:00.711 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.712 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:07:00.714 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:07:00.716 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-01-19 16:07:00.717 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 16:07:00.719 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:07:00.720 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2024-01-19 16:07:00.727 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 16:07:00.735 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 16:07:00.735 +06:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:07:00.738 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:07:00.741 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:07:00.745 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:07:00.747 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:07:00.749 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.752 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:07:00.753 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 15ms reading results.
2024-01-19 16:07:00.755 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.759 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.761 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 19ms reading results.
2024-01-19 16:07:00.763 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 16:07:00.764 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.768 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:07:00.770 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-19 16:07:00.773 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:07:00.776 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:07:00.777 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:07:00.781 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:07:00.782 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:07:00.783 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:07:00.784 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:07:00.785 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:07:00.787 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointsOfInterestReturnDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:07:00.787 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:07:00.789 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API) in 100.5444ms
2024-01-19 16:07:00.792 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:07:00.794 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:07:00.799 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 116.9169ms
2024-01-19 16:07:00.800 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:07:00.801 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:07:00.803 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.804 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:07:00.806 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 16:07:00.808 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:07:00.810 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - 200 220 application/json; charset=utf-8 195.4394ms
2024-01-19 16:07:00.812 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 16:07:00.818 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 204.4622ms
2024-01-19 16:07:26.911 +06:00 [DBG] Connection id "0HN0OQEBIUA5I" received FIN.
2024-01-19 16:07:26.911 +06:00 [DBG] Connection id "0HN0OQEBIUA5J" received FIN.
2024-01-19 16:30:40.443 +06:00 [DBG] Connection id "0HN0OQEBIUA5I" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-19 16:30:40.445 +06:00 [DBG] Connection id "0HN0OQEBIUA5J" is closed. The last processed stream ID was 113.
2024-01-19 16:30:40.447 +06:00 [DBG] The connection queue processing loop for 0HN0OQEBIUA5J completed.
2024-01-19 16:30:40.443 +06:00 [DBG] Connection id "0HN0OQEBIUA5I" is closed. The last processed stream ID was 9.
2024-01-19 16:30:40.456 +06:00 [DBG] Connection id "0HN0OQEBIUA5J" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-01-19 16:30:40.458 +06:00 [DBG] The connection queue processing loop for 0HN0OQEBIUA5I completed.
2024-01-19 16:30:40.464 +06:00 [DBG] Connection id "0HN0OQEBIUA5I" stopped.
2024-01-19 16:30:40.464 +06:00 [DBG] Connection id "0HN0OQEBIUA5J" stopped.
2024-01-19 16:30:41.976 +06:00 [DBG] Connection id "0HN0OQEBIUA5K" accepted.
2024-01-19 16:30:41.978 +06:00 [DBG] Connection id "0HN0OQEBIUA5K" started.
2024-01-19 16:30:41.984 +06:00 [DBG] Connection 0HN0OQEBIUA5K established using the following protocol: "Tls13"
2024-01-19 16:30:41.986 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:30:41.990 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:30:41.986 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - null null
2024-01-19 16:30:41.991 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:30:41.994 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:30:41.995 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:30:41.998 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:30:41.999 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:30:42.000 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:30:42.002 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:30:42.003 +06:00 [DBG] 2 candidate(s) found for the request path '/api/cities/pointsofinterest'
2024-01-19 16:30:42.005 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:30:42.006 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/pointsofinterest' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 16:30:42.007 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:30:42.010 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:30:42.009 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/pointsofinterest'
2024-01-19 16:30:42.013 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:30:42.014 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:30:42.016 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:30:42.020 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:30:42.018 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:30:42.023 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:30:42.024 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointsOfInterestReturnDto]]] GetPointsOfInterest() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:30:42.026 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:30:42.032 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:30:42.034 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:30:42.036 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:30:42.039 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:30:42.040 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:30:42.042 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:30:42.044 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:30:42.046 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:30:42.047 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:30:42.048 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 16:30:42.050 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:30:42.052 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.053 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:30:42.055 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.056 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:30:42.057 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:30:42.059 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:30:42.060 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:30:42.061 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 16:30:42.062 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 16:30:42.063 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.065 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:30:42.066 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.071 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:30:42.072 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 16:30:42.073 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 16:30:42.074 +06:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:30:42.075 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 16:30:42.077 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:30:42.082 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:30:42.082 +06:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CityId], [p].[Description], [p].[Name], [p].[userId]
FROM [PointsOfInterest] AS [p]
ORDER BY [p].[Name]
2024-01-19 16:30:42.084 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:30:42.086 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:30:42.088 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.089 +06:00 [DBG] Context 'CityInfoContext' started tracking 'PointOfInterest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:30:42.090 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 13ms reading results.
2024-01-19 16:30:42.092 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.093 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.095 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 8ms reading results.
2024-01-19 16:30:42.096 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 16:30:42.098 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.100 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:30:42.102 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 16:30:42.104 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:30:42.106 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:30:42.106 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:30:42.109 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:30:42.110 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:30:42.111 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:30:42.111 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:30:42.112 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:30:42.115 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:30:42.116 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:30:42.119 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 84.9672ms
2024-01-19 16:30:42.120 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.PointsOfInterestReturnDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:30:42.121 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:30:42.123 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API) in 72.5588ms
2024-01-19 16:30:42.124 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:30:42.125 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 16:30:42.125 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.126 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:30:42.127 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 16:30:42.128 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:30:42.129 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 142.5014ms
2024-01-19 16:30:42.130 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 16:30:42.133 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/pointsofinterest - 200 220 application/json; charset=utf-8 147.1725ms
2024-01-19 16:36:11.696 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 16:36:11.770 +06:00 [DBG] Hosting starting
2024-01-19 16:36:11.934 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 16:36:11.936 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 16:36:11.937 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 16:36:11.937 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 16:36:11.938 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 16:36:11.940 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 16:36:11.941 +06:00 [INF] Hosting environment: Development
2024-01-19 16:36:11.943 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 16:36:11.944 +06:00 [DBG] Hosting started
2024-01-19 16:36:18.454 +06:00 [DBG] Connection id "0HN0OR9S94203" accepted.
2024-01-19 16:36:18.458 +06:00 [DBG] Connection id "0HN0OR9S94203" started.
2024-01-19 16:36:18.508 +06:00 [DBG] Connection 0HN0OR9S94203 established using the following protocol: "Tls13"
2024-01-19 16:36:18.551 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 16:36:18.560 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 16:36:18.576 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 16:36:18.581 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 16:36:18.582 +06:00 [INF] CORS policy execution successful.
2024-01-19 16:36:18.603 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 16:36:18.608 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 16:36:18.612 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:36:18.617 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:36:18.635 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 16:36:18.642 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 16:36:18.644 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 16:36:18.646 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 16:36:18.649 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 16:36:18.652 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 16:36:18.656 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:36:18.729 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 16:36:18.846 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 16:36:19.215 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 16:36:19.251 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-01-19 16:36:19.345 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
        SELECT c.Id, c.Description, c.Name, c.userId
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 16:36:19.363 +06:00 [DBG] Creating DbConnection.
2024-01-19 16:36:19.377 +06:00 [DBG] Created DbConnection. (11ms).
2024-01-19 16:36:19.383 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:36:19.602 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:36:19.606 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 16:36:19.616 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (7ms).
2024-01-19 16:36:19.620 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2024-01-19 16:36:19.626 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:36:19.673 +06:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 16:36:19.705 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:36:19.718 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:36:19.721 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 16:36:19.726 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 16:36:19.733 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 50ms reading results.
2024-01-19 16:36:19.738 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:36:19.745 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (6ms).
2024-01-19 16:36:19.759 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 16:36:19.764 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 16:36:19.765 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 16:36:19.766 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 16:36:19.768 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 16:36:19.770 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 16:36:19.826 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 1169.7516ms
2024-01-19 16:36:19.830 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 16:36:19.837 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 16:36:19.840 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 16:36:19.845 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 16:36:19.849 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 260 application/json; charset=utf-8 1303.1652ms
2024-01-19 17:59:10.404 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 17:59:10.463 +06:00 [DBG] Hosting starting
2024-01-19 17:59:10.576 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 17:59:10.578 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 17:59:10.579 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 17:59:10.580 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 17:59:10.581 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 17:59:10.582 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 17:59:10.583 +06:00 [INF] Hosting environment: Development
2024-01-19 17:59:10.584 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 17:59:10.585 +06:00 [DBG] Hosting started
2024-01-19 18:00:49.578 +06:00 [DBG] Connection id "0HN0OSP3J48PG" accepted.
2024-01-19 18:00:49.580 +06:00 [DBG] Connection id "0HN0OSP3J48PG" started.
2024-01-19 18:00:49.625 +06:00 [DBG] Connection 0HN0OSP3J48PG established using the following protocol: "Tls13"
2024-01-19 18:00:49.657 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 18:00:49.664 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 18:00:49.673 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 18:00:49.675 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:00:49.676 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:00:49.677 +06:00 [DBG] The request is a preflight request.
2024-01-19 18:00:49.679 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 24.7878ms
2024-01-19 18:00:49.682 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 86
2024-01-19 18:00:49.689 +06:00 [DBG] POST requests are not supported
2024-01-19 18:00:49.690 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:00:49.692 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:00:49.703 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:00:49.706 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:00:49.709 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:00:49.713 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:00:49.730 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:00:49.736 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:00:49.738 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:00:49.740 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:00:49.742 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:00:49.744 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:00:49.747 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:00:49.813 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 18:00:49.891 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:00:49.897 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:00:49.901 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 18:00:49.905 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 18:00:49.908 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 18:00:49.915 +06:00 [DBG] Connection id "0HN0OSP3J48PG", Request id "0HN0OSP3J48PG:00000003": started reading request body.
2024-01-19 18:00:49.917 +06:00 [DBG] Connection id "0HN0OSP3J48PG", Request id "0HN0OSP3J48PG:00000003": done reading request body.
2024-01-19 18:00:49.975 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:00:49.978 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:00:49.980 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:00:49.985 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:00:50.306 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:00:50.356 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 18:00:50.450 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 18:00:50.469 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:00:50.481 +06:00 [DBG] Created DbConnection. (11ms).
2024-01-19 18:00:50.484 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.666 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.669 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:00:50.674 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 18:00:50.679 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-01-19 18:00:50.684 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:00:50.742 +06:00 [INF] Executed DbCommand (59ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:00:50.772 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:00:50.787 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.792 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 44ms reading results.
2024-01-19 18:00:50.797 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.804 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (6ms).
2024-01-19 18:00:50.826 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:00:50.842 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:00:50.846 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 18:00:50.850 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 18:00:50.860 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 18:00:50.897 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.900 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.904 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:00:50.906 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:00:50.908 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 18:00:50.910 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:00:50.924 +06:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:00:50.932 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.934 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 7ms reading results.
2024-01-19 18:00:50.938 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:50.939 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:00:50.961 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Cities_Users_userId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:606f023a-a062-405c-b49b-cfc0caa913ad
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Cities_Users_userId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:606f023a-a062-405c-b49b-cfc0caa913ad
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-19 18:00:51.036 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 1288.7489ms
2024-01-19 18:00:51.039 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:00:51.043 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Cities_Users_userId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:606f023a-a062-405c-b49b-cfc0caa913ad
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 115
   at CityInfo.API.Controllers.CitiesController.CreateCity(CityForCreationDto request) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\CitiesController.cs:line 89
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 18:00:51.074 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:00:51.079 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:00:51.082 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 18:00:51.084 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 1402.2177ms
2024-01-19 18:02:08.304 +06:00 [DBG] Connection id "0HN0OSP3J48PH" accepted.
2024-01-19 18:02:08.312 +06:00 [DBG] Connection id "0HN0OSP3J48PH" started.
2024-01-19 18:02:08.322 +06:00 [DBG] Connection 0HN0OSP3J48PH established using the following protocol: "Tls13"
2024-01-19 18:02:08.327 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/index.html - null null
2024-01-19 18:02:08.450 +06:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-01-19 18:02:08.469 +06:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-01-19 18:02:08.471 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/index.html - 200 null text/html;charset=utf-8 144.2857ms
2024-01-19 18:02:08.473 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_vs/browserLink - null null
2024-01-19 18:02:08.473 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - null null
2024-01-19 18:02:08.500 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_framework/aspnetcore-browser-refresh.js - 200 13760 application/javascript; charset=utf-8 27.6373ms
2024-01-19 18:02:08.526 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.6825ms
2024-01-19 18:02:08.624 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - null null
2024-01-19 18:02:08.742 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 118.816ms
2024-01-19 18:02:39.132 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json-patch+json 99
2024-01-19 18:02:39.137 +06:00 [DBG] POST requests are not supported
2024-01-19 18:02:39.138 +06:00 [DBG] The request has an origin header: 'https://localhost:7156'.
2024-01-19 18:02:39.140 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:02:39.142 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:02:39.144 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:02:39.147 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:02:39.149 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:02:39.151 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:02:39.153 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:02:39.155 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:02:39.158 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:02:39.160 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:02:39.162 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:02:39.164 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:02:39.167 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:02:39.169 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:02:39.171 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 18:02:39.174 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2024-01-19 18:02:39.175 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2024-01-19 18:02:39.177 +06:00 [DBG] Connection id "0HN0OSP3J48PH", Request id "0HN0OSP3J48PH:00000009": started reading request body.
2024-01-19 18:02:39.179 +06:00 [DBG] Connection id "0HN0OSP3J48PH", Request id "0HN0OSP3J48PH:00000009": done reading request body.
2024-01-19 18:02:39.181 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:02:39.183 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:02:39.185 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:02:39.187 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:02:39.200 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:02:39.207 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:02:39.209 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 18:02:39.211 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.213 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.214 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:02:39.216 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:02:39.218 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 18:02:39.220 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:02:39.239 +06:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:02:39.242 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:02:39.243 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.244 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 18:02:39.246 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.247 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:02:39.251 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:02:39.253 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:02:39.255 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 18:02:39.257 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 18:02:39.258 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 18:02:39.260 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.262 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.263 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:02:39.264 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:02:39.266 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 18:02:39.269 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:02:39.276 +06:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:02:39.280 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.281 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 2ms reading results.
2024-01-19 18:02:39.285 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.287 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 18:02:39.292 +06:00 [ERR] An exception occurred in the database while saving changes for context type 'CityInfo.API.DbContexts.CityInfoContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Cities_Users_userId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:606f023a-a062-405c-b49b-cfc0caa913ad
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Cities_Users_userId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:606f023a-a062-405c-b49b-cfc0caa913ad
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-01-19 18:02:39.357 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 193.5115ms
2024-01-19 18:02:39.360 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:02:39.362 +06:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Cities_Users_userId". The conflict occurred in database "CityInfo", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:606f023a-a062-405c-b49b-cfc0caa913ad
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at CityInfo.API.Services.CityInfoRepository.SaveChangesAsync() in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Services\CityInfoRepository.cs:line 115
   at CityInfo.API.Controllers.CitiesController.CreateCity(CityForCreationDto request) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\CitiesController.cs:line 89
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 18:02:39.376 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:02:39.378 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:02:39.380 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:02:39.382 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 250.0908ms
2024-01-19 18:04:04.774 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 18:04:04.841 +06:00 [DBG] Hosting starting
2024-01-19 18:04:04.954 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 18:04:04.956 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 18:04:04.957 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 18:04:04.958 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 18:04:04.959 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 18:04:04.960 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 18:04:04.962 +06:00 [INF] Hosting environment: Development
2024-01-19 18:04:04.963 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 18:04:04.964 +06:00 [DBG] Hosting started
2024-01-19 18:04:08.596 +06:00 [DBG] Connection id "0HN0OSQUT3R1E" accepted.
2024-01-19 18:04:08.599 +06:00 [DBG] Connection id "0HN0OSQUT3R1E" started.
2024-01-19 18:04:08.636 +06:00 [DBG] Connection 0HN0OSQUT3R1E established using the following protocol: "Tls13"
2024-01-19 18:04:08.662 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 18:04:08.671 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 18:04:08.677 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 18:04:08.679 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:04:08.680 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:04:08.681 +06:00 [DBG] The request is a preflight request.
2024-01-19 18:04:08.684 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 24.074ms
2024-01-19 18:04:08.688 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 86
2024-01-19 18:04:08.693 +06:00 [DBG] POST requests are not supported
2024-01-19 18:04:08.695 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:04:08.696 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:04:08.707 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:04:08.711 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:04:08.713 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:04:08.716 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:04:08.729 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:04:08.733 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:04:08.735 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:04:08.737 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:04:08.741 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:04:08.743 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:04:08.746 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:04:08.819 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 18:04:08.895 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:04:08.900 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:04:08.903 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 18:04:08.905 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 18:04:08.907 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 18:04:08.910 +06:00 [DBG] Connection id "0HN0OSQUT3R1E", Request id "0HN0OSQUT3R1E:00000003": started reading request body.
2024-01-19 18:04:08.912 +06:00 [DBG] Connection id "0HN0OSQUT3R1E", Request id "0HN0OSQUT3R1E:00000003": done reading request body.
2024-01-19 18:04:08.961 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:04:08.964 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:04:08.965 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:04:08.971 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:04:09.278 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:04:09.318 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 18:04:09.414 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 18:04:09.441 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:04:09.456 +06:00 [DBG] Created DbConnection. (14ms).
2024-01-19 18:04:09.460 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:09.626 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:09.630 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:04:09.635 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 18:04:09.642 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-01-19 18:04:09.650 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:04:09.700 +06:00 [INF] Executed DbCommand (52ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:04:09.725 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:04:09.739 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:09.744 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 38ms reading results.
2024-01-19 18:04:09.747 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:09.752 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (5ms).
2024-01-19 18:04:09.801 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 1053.302ms
2024-01-19 18:04:09.804 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:04:09.807 +06:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CityForDatabaseDto -> City
CityInfo.API.Models.CityForDatabaseDto -> CityInfo.API.Entities.City
   at lambda_method63(Closure, Object, City, ResolutionContext)
   at CityInfo.API.Controllers.CitiesController.CreateCity(CityForCreationDto request) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\CitiesController.cs:line 85
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 18:04:09.838 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:04:09.843 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:09.845 +06:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-01-19 18:04:09.847 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 1159.795ms
2024-01-19 18:04:42.336 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 18:04:42.343 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 18:04:42.344 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:04:42.346 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:04:42.348 +06:00 [DBG] The request is a preflight request.
2024-01-19 18:04:42.349 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 12.9849ms
2024-01-19 18:04:42.350 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 86
2024-01-19 18:04:42.357 +06:00 [DBG] POST requests are not supported
2024-01-19 18:04:42.359 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:04:42.361 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:04:42.364 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:04:42.366 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:04:42.369 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:04:42.372 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:04:42.375 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:04:42.380 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:04:42.383 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:04:42.385 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:04:42.388 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:04:42.390 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:04:42.392 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:04:42.394 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:04:42.396 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:04:42.399 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 18:04:42.401 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 18:04:42.402 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 18:04:42.404 +06:00 [DBG] Connection id "0HN0OSQUT3R1E", Request id "0HN0OSQUT3R1E:00000007": started reading request body.
2024-01-19 18:04:42.406 +06:00 [DBG] Connection id "0HN0OSQUT3R1E", Request id "0HN0OSQUT3R1E:00000007": done reading request body.
2024-01-19 18:04:42.408 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:04:42.410 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:04:42.412 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:04:42.413 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:04:47.679 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:04:47.686 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:04:47.687 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 18:04:47.689 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:47.691 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:47.693 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:04:47.695 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:04:47.697 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2024-01-19 18:04:47.700 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:04:47.721 +06:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:04:47.724 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:04:47.727 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:47.729 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 18:04:47.731 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:47.733 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 18:04:57.917 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 15524.2384ms
2024-01-19 18:04:57.919 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:04:57.921 +06:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CityForDatabaseDto -> City
CityInfo.API.Models.CityForDatabaseDto -> CityInfo.API.Entities.City
   at lambda_method63(Closure, Object, City, ResolutionContext)
   at CityInfo.API.Controllers.CitiesController.CreateCity(CityForCreationDto request) in C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API\Controllers\CitiesController.cs:line 85
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-01-19 18:04:57.929 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:04:57.930 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:04:57.932 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:04:57.935 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 500 null text/plain; charset=utf-8 15584.1249ms
2024-01-19 18:06:15.960 +06:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-01-19 18:06:16.019 +06:00 [DBG] Hosting starting
2024-01-19 18:06:16.133 +06:00 [INF] Now listening on: https://localhost:7156
2024-01-19 18:06:16.135 +06:00 [INF] Now listening on: http://localhost:5062
2024-01-19 18:06:16.136 +06:00 [DBG] Loaded hosting startup assembly CityInfo.API
2024-01-19 18:06:16.137 +06:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-01-19 18:06:16.138 +06:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-01-19 18:06:16.139 +06:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-19 18:06:16.141 +06:00 [INF] Hosting environment: Development
2024-01-19 18:06:16.142 +06:00 [INF] Content root path: C:\Users\smriad\Documents\GitHub\CityInfo\CityInfo.API\CityInfo.API
2024-01-19 18:06:16.143 +06:00 [DBG] Hosting started
2024-01-19 18:06:21.274 +06:00 [DBG] Connection id "0HN0OSS6EDQ0R" accepted.
2024-01-19 18:06:21.276 +06:00 [DBG] Connection id "0HN0OSS6EDQ0R" started.
2024-01-19 18:06:21.325 +06:00 [DBG] Connection 0HN0OSS6EDQ0R established using the following protocol: "Tls13"
2024-01-19 18:06:21.361 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 18:06:21.373 +06:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-01-19 18:06:21.383 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 18:06:21.387 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:06:21.389 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:06:21.391 +06:00 [DBG] The request is a preflight request.
2024-01-19 18:06:21.394 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 36.3183ms
2024-01-19 18:06:21.399 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 86
2024-01-19 18:06:21.406 +06:00 [DBG] POST requests are not supported
2024-01-19 18:06:21.407 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:06:21.409 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:06:21.424 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:06:21.427 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:06:21.430 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:06:21.435 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:06:21.454 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:06:21.459 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:06:21.461 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:06:21.463 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:06:21.467 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:06:21.469 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:06:21.472 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:06:21.543 +06:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-01-19 18:06:21.634 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:06:21.639 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:06:21.643 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 18:06:21.645 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 18:06:21.647 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 18:06:21.653 +06:00 [DBG] Connection id "0HN0OSS6EDQ0R", Request id "0HN0OSS6EDQ0R:00000003": started reading request body.
2024-01-19 18:06:21.655 +06:00 [DBG] Connection id "0HN0OSS6EDQ0R", Request id "0HN0OSS6EDQ0R:00000003": done reading request body.
2024-01-19 18:06:21.701 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:06:21.705 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:06:21.706 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:06:21.710 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:06:22.090 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:06:22.133 +06:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(c => c.userName == __userName_0)
    .FirstOrDefault()'
2024-01-19 18:06:22.241 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.email (string) Required MaxLength(50), 1], [Property: User.firstName (string) Required MaxLength(50), 2], [Property: User.lastName (string) Required, 3], [Property: User.password (string) Required MaxLength(50), 4], [Property: User.userName (string) Required MaxLength(50), 5] }
            SELECT TOP(1) u.Id, u.email, u.firstName, u.lastName, u.password, u.userName
            FROM Users AS u
            WHERE u.userName == @__userName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 18:06:22.261 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:06:22.273 +06:00 [DBG] Created DbConnection. (10ms).
2024-01-19 18:06:22.276 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:22.456 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:22.460 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:06:22.466 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-01-19 18:06:22.472 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2024-01-19 18:06:22.478 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:06:22.539 +06:00 [INF] Executed DbCommand (60ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:06:22.569 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:22.594 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:22.600 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 53ms reading results.
2024-01-19 18:06:22.605 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:22.610 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (4ms).
2024-01-19 18:06:25.211 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:25.231 +06:00 [DBG] The navigation 'City.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:25.240 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:25.934 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 18:06:25.944 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 18:06:25.958 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 18:06:26.011 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:26.015 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:26.018 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:06:26.020 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:06:26.022 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 18:06:26.025 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:06:26.038 +06:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:06:26.050 +06:00 [DBG] The foreign key property 'City.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 18:06:26.056 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:26.058 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 16ms reading results.
2024-01-19 18:06:26.061 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:26.062 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:06:26.069 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:26.074 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 18:06:27.078 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:06:27.084 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:06:27.085 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 18:06:27.086 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 18:06:27.087 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 18:06:27.089 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 18:06:27.119 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 5646.138ms
2024-01-19 18:06:27.122 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:06:27.128 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:06:27.134 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:27.137 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 18:06:27.140 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 200 24 application/json; charset=utf-8 5740.5789ms
2024-01-19 18:06:37.640 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 18:06:37.653 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 18:06:37.657 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:06:37.659 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:06:37.661 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:06:37.663 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:06:37.667 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:06:37.670 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:06:37.677 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:06:37.681 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:06:37.683 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:06:37.685 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:06:37.688 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:06:37.690 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:06:37.693 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:06:37.697 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:06:37.717 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:06:37.722 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .OrderBy(c => c.Name)'
2024-01-19 18:06:37.732 +06:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<City>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
        SELECT c.Id, c.Description, c.Name, c.userId
        FROM Cities AS c
        ORDER BY c.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
    CityInfo.API.DbContexts.CityInfoContext, 
    False, 
    False, 
    True
)'
2024-01-19 18:06:37.736 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:06:37.737 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 18:06:37.740 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:37.742 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:37.744 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:06:37.746 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:06:37.747 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 18:06:37.750 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 18:06:37.765 +06:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 18:06:37.769 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:37.773 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:37.776 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:37.778 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:06:37.781 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:37.783 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 14ms reading results.
2024-01-19 18:06:37.786 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:37.790 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (3ms).
2024-01-19 18:06:37.808 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:06:37.816 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:06:37.817 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 18:06:37.820 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 18:06:37.822 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 18:06:37.825 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 18:06:37.835 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 142.1543ms
2024-01-19 18:06:37.838 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:06:37.840 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:06:37.841 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:06:37.843 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:06:37.845 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 337 application/json; charset=utf-8 204.8027ms
2024-01-19 18:09:17.908 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 18:09:17.917 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 18:09:17.918 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:09:17.920 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:09:17.922 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:09:17.923 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:09:17.925 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:09:17.928 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:09:17.930 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:09:17.933 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:09:17.935 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:09:17.938 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:09:17.941 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:09:17.943 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:09:17.945 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:09:17.951 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:09:18.030 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:09:18.035 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:09:18.036 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 18:09:18.037 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:09:18.039 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:09:18.040 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:09:18.041 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:09:18.042 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 18:09:18.044 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 18:09:18.054 +06:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 18:09:18.056 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:09:18.058 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:09:18.059 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:09:18.061 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:09:18.062 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:09:18.064 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 7ms reading results.
2024-01-19 18:09:18.065 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:09:18.067 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:09:18.069 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:09:18.072 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:09:18.072 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 18:09:18.073 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 18:09:18.074 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 18:09:18.075 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 18:09:18.077 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 132.3266ms
2024-01-19 18:09:18.085 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:09:18.086 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:09:18.087 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:09:18.088 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:09:18.090 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 337 application/json; charset=utf-8 182.1569ms
2024-01-19 18:10:00.796 +06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7156/api/cities - null null
2024-01-19 18:10:00.803 +06:00 [DBG] OPTIONS requests are not supported
2024-01-19 18:10:00.803 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:10:00.805 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:10:00.805 +06:00 [DBG] The request is a preflight request.
2024-01-19 18:10:00.806 +06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7156/api/cities - 204 null null 10.2945ms
2024-01-19 18:10:00.808 +06:00 [INF] Request starting HTTP/2 POST https://localhost:7156/api/cities - application/json 83
2024-01-19 18:10:00.813 +06:00 [DBG] POST requests are not supported
2024-01-19 18:10:00.814 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:10:00.815 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:10:00.816 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:10:00.817 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:10:00.819 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:10:00.820 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:10:00.822 +06:00 [INF] Route matched with {action = "CreateCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CityInfo.API.Models.CityDto]] CreateCity(CityInfo.API.Models.CityForCreationDto) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:10:00.824 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:10:00.825 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:10:00.827 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:10:00.830 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:10:00.831 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:10:00.833 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:10:00.834 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:10:00.836 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:10:00.838 +06:00 [DBG] Attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' using the name '' in request data ...
2024-01-19 18:10:00.840 +06:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json'.
2024-01-19 18:10:00.841 +06:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json'.
2024-01-19 18:10:00.843 +06:00 [DBG] Connection id "0HN0OSS6EDQ0R", Request id "0HN0OSS6EDQ0R:0000000B": started reading request body.
2024-01-19 18:10:00.845 +06:00 [DBG] Connection id "0HN0OSS6EDQ0R", Request id "0HN0OSS6EDQ0R:0000000B": done reading request body.
2024-01-19 18:10:00.846 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:10:00.848 +06:00 [DBG] Done attempting to bind parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:10:00.849 +06:00 [DBG] Attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto' ...
2024-01-19 18:10:00.851 +06:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'CityInfo.API.Models.CityForCreationDto'.
2024-01-19 18:10:00.854 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:10:00.856 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:10:00.857 +06:00 [DBG] Created DbConnection. (0ms).
2024-01-19 18:10:00.858 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:00.860 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:00.861 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:10:00.862 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:10:00.863 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 18:10:00.865 +06:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:10:00.881 +06:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userName_0='?' (Size = 255) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[email], [u].[firstName], [u].[lastName], [u].[password], [u].[userName]
FROM [Users] AS [u]
WHERE [u].[userName] = @__userName_0
2024-01-19 18:10:00.883 +06:00 [DBG] Context 'CityInfoContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:00.885 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:00.888 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 4ms reading results.
2024-01-19 18:10:00.890 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:00.891 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:10:06.388 +06:00 [DBG] 'CityInfoContext' generated a temporary value for the property 'City.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:06.389 +06:00 [DBG] The navigation 'City.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:06.391 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:06.912 +06:00 [DBG] SaveChanges starting for 'CityInfoContext'.
2024-01-19 18:10:06.913 +06:00 [DBG] DetectChanges starting for 'CityInfoContext'.
2024-01-19 18:10:06.915 +06:00 [DBG] DetectChanges completed for 'CityInfoContext'.
2024-01-19 18:10:06.917 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:06.918 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:06.920 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:10:06.921 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:10:06.922 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 18:10:06.924 +06:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:10:06.936 +06:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 200), @p1='?' (Size = 50), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Cities] ([Description], [Name], [userId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2024-01-19 18:10:06.939 +06:00 [DBG] The foreign key property 'City.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-01-19 18:10:06.941 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:06.942 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 18:10:06.944 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:06.946 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:10:06.948 +06:00 [DBG] An entity of type 'City' tracked by 'CityInfoContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:06.950 +06:00 [DBG] SaveChanges completed for 'CityInfoContext' with 1 entities written to the database.
2024-01-19 18:10:07.769 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:10:07.773 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:10:07.773 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 18:10:07.774 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 18:10:07.775 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 18:10:07.776 +06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-01-19 18:10:07.778 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API) in 6945.4523ms
2024-01-19 18:10:07.780 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.CreateCity (CityInfo.API)'
2024-01-19 18:10:07.781 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:10:07.784 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:07.787 +06:00 [DBG] Disposed connection to database '' on server '' (3ms).
2024-01-19 18:10:07.790 +06:00 [INF] Request finished HTTP/2 POST https://localhost:7156/api/cities - 200 24 application/json; charset=utf-8 6981.8583ms
2024-01-19 18:10:11.059 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities - null null
2024-01-19 18:10:11.063 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 18:10:11.064 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:10:11.065 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:10:11.068 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities'
2024-01-19 18:10:11.070 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)' with route pattern 'api/cities' is valid for the request path '/api/cities'
2024-01-19 18:10:11.072 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:10:11.073 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:10:11.074 +06:00 [INF] Route matched with {action = "GetCities", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.CityWithoutPointOfInterestDto]]] GetCities() on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:10:11.076 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:10:11.078 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:10:11.080 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:10:11.082 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:10:11.084 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:10:11.086 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:10:11.088 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:10:11.091 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:10:11.093 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:10:11.094 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 18:10:11.096 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:11.098 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:11.099 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:10:11.101 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2024-01-19 18:10:11.102 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2024-01-19 18:10:11.104 +06:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 18:10:11.109 +06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
ORDER BY [c].[Name]
2024-01-19 18:10:11.111 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:11.113 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:11.115 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:11.117 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:11.118 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:11.120 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:11.122 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 10ms reading results.
2024-01-19 18:10:11.123 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:11.125 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:10:11.127 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:10:11.131 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:10:11.132 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 18:10:11.133 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 18:10:11.134 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 18:10:11.135 +06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CityInfo.API.Models.CityWithoutPointOfInterestDto, CityInfo.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-19 18:10:11.137 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API) in 50.6101ms
2024-01-19 18:10:11.138 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCities (CityInfo.API)'
2024-01-19 18:10:11.140 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:10:11.141 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:11.142 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:10:11.144 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities - 200 411 application/json; charset=utf-8 85.1027ms
2024-01-19 18:10:25.956 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/79 - null null
2024-01-19 18:10:25.964 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 18:10:25.966 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:10:25.967 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:10:25.968 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/79'
2024-01-19 18:10:25.970 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)' with route pattern 'api/cities/{id}' is valid for the request path '/api/cities/79'
2024-01-19 18:10:25.973 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-19 18:10:25.975 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-19 18:10:25.978 +06:00 [INF] Route matched with {action = "GetCity", controller = "Cities"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCity(Int32, Boolean) on controller CityInfo.API.Controllers.CitiesController (CityInfo.API).
2024-01-19 18:10:25.980 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:10:25.982 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:10:25.983 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:10:25.986 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:10:25.988 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:10:25.989 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:10:25.990 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.CitiesController (CityInfo.API)
2024-01-19 18:10:25.992 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-01-19 18:10:25.994 +06:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-01-19 18:10:25.996 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 18:10:25.998 +06:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-01-19 18:10:25.999 +06:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-01-19 18:10:26.002 +06:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-01-19 18:10:26.003 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-01-19 18:10:26.005 +06:00 [DBG] Attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean' using the name '' in request data ...
2024-01-19 18:10:26.007 +06:00 [DBG] Could not find a value in the request with name '' for binding parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 18:10:26.008 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 18:10:26.009 +06:00 [DBG] Done attempting to bind parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 18:10:26.010 +06:00 [DBG] Attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean' ...
2024-01-19 18:10:26.011 +06:00 [DBG] Done attempting to validate the bound parameter 'includePointsOfInterest' of type 'System.Boolean'.
2024-01-19 18:10:26.016 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:10:26.019 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Where(c => c.Id == __cityId_0)
    .FirstOrDefault()'
2024-01-19 18:10:26.024 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<City>(
    asyncEnumerable: new SingleQueryingEnumerable<City>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: City.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: City.Description (string) Required MaxLength(200), 1], [Property: City.Name (string) Required MaxLength(50), 2], [Property: City.userId (int) Required FK Index, 3] }
            SELECT TOP(1) c.Id, c.Description, c.Name, c.userId
            FROM Cities AS c
            WHERE c.Id == @__cityId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, City>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 18:10:26.027 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:10:26.028 +06:00 [DBG] Created DbConnection. (1ms).
2024-01-19 18:10:26.030 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:26.033 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:26.034 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:10:26.035 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 18:10:26.037 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 18:10:26.038 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 18:10:26.043 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[Name], [c].[userId]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__cityId_0
2024-01-19 18:10:26.046 +06:00 [DBG] Context 'CityInfoContext' started tracking 'City' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-01-19 18:10:26.048 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:26.050 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 3ms reading results.
2024-01-19 18:10:26.052 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:26.055 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (2ms).
2024-01-19 18:10:26.058 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:10:26.061 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:10:26.063 +06:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-01-19 18:10:26.064 +06:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-01-19 18:10:26.065 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2024-01-19 18:10:26.066 +06:00 [INF] Executing OkObjectResult, writing value of type 'CityInfo.API.Models.CityWithoutPointOfInterestDto'.
2024-01-19 18:10:26.068 +06:00 [INF] Executed action CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API) in 78.8635ms
2024-01-19 18:10:26.072 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.CitiesController.GetCity (CityInfo.API)'
2024-01-19 18:10:26.075 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:10:26.076 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:26.078 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:10:26.080 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/79 - 200 109 application/json; charset=utf-8 124.0655ms
2024-01-19 18:10:33.746 +06:00 [INF] Request starting HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - null null
2024-01-19 18:10:33.754 +06:00 [DBG] The request path  does not match the path filter
2024-01-19 18:10:33.756 +06:00 [DBG] The request has an origin header: 'http://localhost:4200'.
2024-01-19 18:10:33.758 +06:00 [INF] CORS policy execution successful.
2024-01-19 18:10:33.759 +06:00 [DBG] 1 candidate(s) found for the request path '/api/cities/0/pointsofinterest'
2024-01-19 18:10:33.761 +06:00 [DBG] Endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)' with route pattern 'api/cities/{cityID}/pointsofinterest' is valid for the request path '/api/cities/0/pointsofinterest'
2024-01-19 18:10:33.764 +06:00 [DBG] Request matched endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 18:10:33.766 +06:00 [INF] Executing endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 18:10:33.769 +06:00 [INF] Route matched with {action = "GetPointsOfInterest", controller = "PointsOfInterest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[CityInfo.API.Models.PointOfInterestDto]]] GetPointsOfInterest(Int32) on controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API).
2024-01-19 18:10:33.772 +06:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-01-19 18:10:33.773 +06:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-01-19 18:10:33.775 +06:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-01-19 18:10:33.777 +06:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-01-19 18:10:33.780 +06:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-01-19 18:10:33.782 +06:00 [DBG] Executing controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 18:10:33.784 +06:00 [DBG] Executed controller factory for controller CityInfo.API.Controllers.PointsOfInterestController (CityInfo.API)
2024-01-19 18:10:33.787 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' ...
2024-01-19 18:10:33.789 +06:00 [DBG] Attempting to bind parameter 'cityId' of type 'System.Int32' using the name 'cityId' in request data ...
2024-01-19 18:10:33.792 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 18:10:33.793 +06:00 [DBG] Done attempting to bind parameter 'cityId' of type 'System.Int32'.
2024-01-19 18:10:33.796 +06:00 [DBG] Attempting to validate the bound parameter 'cityId' of type 'System.Int32' ...
2024-01-19 18:10:33.798 +06:00 [DBG] Done attempting to validate the bound parameter 'cityId' of type 'System.Int32'.
2024-01-19 18:10:33.802 +06:00 [DBG] Entity Framework Core 8.0.0 initialized 'CityInfoContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.0' with options: None
2024-01-19 18:10:33.806 +06:00 [DBG] Compiling query expression: 
'DbSet<City>()
    .Any(c => c.Id == __cityId_0)'
2024-01-19 18:10:33.816 +06:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Cities AS c
                WHERE c.Id == @__cityId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CityInfo.API.DbContexts.CityInfoContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-01-19 18:10:33.828 +06:00 [DBG] Creating DbConnection.
2024-01-19 18:10:33.830 +06:00 [DBG] Created DbConnection. (2ms).
2024-01-19 18:10:33.832 +06:00 [DBG] Opening connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:33.834 +06:00 [DBG] Opened connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:33.835 +06:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-01-19 18:10:33.836 +06:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-01-19 18:10:33.837 +06:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-01-19 18:10:33.838 +06:00 [DBG] Executing DbCommand [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 18:10:33.843 +06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__cityId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Cities] AS [c]
        WHERE [c].[Id] = @__cityId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-19 18:10:33.852 +06:00 [DBG] Closing data reader to 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:33.854 +06:00 [DBG] A data reader for 'CityInfo' on server 'DPM23153' is being disposed after spending 5ms reading results.
2024-01-19 18:10:33.856 +06:00 [DBG] Closing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:33.858 +06:00 [DBG] Closed connection to database 'CityInfo' on server 'DPM23153' (1ms).
2024-01-19 18:10:33.861 +06:00 [INF] City with id 0 wasn't found when accessing points of interest.
2024-01-19 18:10:33.864 +06:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2024-01-19 18:10:33.867 +06:00 [DBG] No information found on request to perform content negotiation.
2024-01-19 18:10:33.869 +06:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-01-19 18:10:33.873 +06:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-01-19 18:10:33.875 +06:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-01-19 18:10:33.888 +06:00 [INF] Executed action CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API) in 106.4136ms
2024-01-19 18:10:33.890 +06:00 [INF] Executed endpoint 'CityInfo.API.Controllers.PointsOfInterestController.GetPointsOfInterest (CityInfo.API)'
2024-01-19 18:10:33.892 +06:00 [DBG] 'CityInfoContext' disposed.
2024-01-19 18:10:33.893 +06:00 [DBG] Disposing connection to database 'CityInfo' on server 'DPM23153'.
2024-01-19 18:10:33.894 +06:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-01-19 18:10:33.897 +06:00 [INF] Request finished HTTP/2 GET https://localhost:7156/api/cities/0/pointsofinterest - 404 162 application/problem+json; charset=utf-8 151.1994ms
